#LyX 1.3 created this file. For more info see http://www.lyx.org/
\lyxformat 221
\textclass amsart
\language english
\inputencoding auto
\fontscheme pslatex
\graphics default
\paperfontsize default
\spacing single 
\papersize Default
\paperpackage a4
\use_geometry 0
\use_amsmath 1
\use_natbib 0
\use_numerical_citations 0
\paperorientation portrait
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\defskip medskip
\quotes_language english
\quotes_times 2
\papercolumns 1
\papersides 1
\paperpagestyle default

\layout Title

The Minkowski Question Mark,
\newline 

\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset 

 and the Modular Group
\newline 
(Expository)
\layout Author

Linas Vepstas
\layout Address

<linas@linas.org>
\layout Date

12 October 2004 (updated 24 March 2007)
\layout Abstract

Fractals and continued fractions seem to be deeply related in many ways.
 Farey fractions appear naturally in both.
 Much of this relationship can be explained through the fact that a certain
 subset of the modular group 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

; called the 
\begin_inset Quotes eld
\end_inset 

dyadic monoid
\begin_inset Quotes erd
\end_inset 

 or 
\begin_inset Quotes eld
\end_inset 

dyadic lattice
\begin_inset Quotes erd
\end_inset 

, is the natural symmetry of many fractals, including those associated with
 period-doubling maps, with phase-locking maps, and with various dynamical
 systems in general.
 The aim of this text is to provide a simple exposition of the symmetry
 and its articulation.
\layout Abstract

The core underlying idea is that many fractals can be represented as an
 infinite binary tree.
 Aside from fractals, binary numbers (or 
\begin_inset Quotes eld
\end_inset 

dyadic numbers
\begin_inset Quotes erd
\end_inset 

) can also be represented as a binary tree.
 A string of 1's and 0's can be understood to be a choice of left and right
 movements through the branches of a tree; which gives it the structure
 of the Cantor set.
 The rational numbers also may be arranged into a binary tree, which is
 variously called a Farey tree or a Stern-Brocot tree.
 The Minkowski question mark function arises as the isomorphism between
 the tree of dyadic numbers, and the tree of rational numbers.
 Fractal self-similarity arises naturally, with the observation that a subtree
 of a binary tree is isomorphic to the tree itself.
\layout Abstract

This paper is written at an expository level, and should be readily accessible
 to advanced undergraduates and all graduate students.
\layout Abstract

XXXX This paper is unfinished.
 Although this version corrects a number of serious errors in the previous
 drafts, it is still misleading and confusing in many ways.
 The second half, in particular must surely contain errors and mis-statements!
 Caveat emptor! XXXX Expository
\layout Section

Introduction
\layout Standard

The Minkowski question mark function, shown in figure 
\begin_inset LatexCommand \ref{cap:The-Minkowski-Question}

\end_inset 

, has many strange and unusual properties.
 As is readily appearent, it is continuous everywhere, and monotonically
 increasing.
 A naive attempt to compute its derivative seems to show that it has a derivativ
e that is zero 
\begin_inset Quotes eld
\end_inset 

everywhere
\begin_inset Quotes erd
\end_inset 

, or at least, zero on the rational numbers.
 A visual examination shows that it is clearly self-similar, yet the self-simila
rity cannot be a simple re-scaling, as some stretching and shrinking is
 needed to make the self-similarity work.
 The goal of this paper is to describe, in simple terms, its analytic and
 topological properties, and, most importantly, its self-similarity properties.
 These will be seen to be the self-similarities of the infinite binary tree.
 
\layout Standard


\begin_inset Float figure
wide false
collapsed true

\layout Caption


\begin_inset LatexCommand \label{cap:The-Minkowski-Question}

\end_inset 

The Minkowski Question Mark Function
\layout Standard


\begin_inset Graphics
	filename quest.ps
	width 100text%

\end_inset 


\begin_inset Note
collapsed true

\layout Standard

This figure was generated with the code at misc/gap/quest.gplot
\end_inset 


\end_inset 


\layout Subsection

The Binary Tree
\layout Standard

The infinite binary tree is depicted in figure 
\begin_inset LatexCommand \ref{cap:The-Dyadic-Tree}

\end_inset 

.
 Its clearly 
\begin_inset Quotes eld
\end_inset 

binary
\begin_inset Quotes erd
\end_inset 

 in that branching downwards, there are two offshoots from each node.
 The nodes themselves are labelled with binary numbers, or, more precisely,
 with 
\begin_inset Quotes eld
\end_inset 

dyadic fractions
\begin_inset Quotes erd
\end_inset 

.
 A dyadic fraction is simply a fracion whose denominator is a power of two.
 This text will distinguish between binary and dyadic, with 
\begin_inset Quotes eld
\end_inset 

binary
\begin_inset Quotes erd
\end_inset 

 refering to the shape of the tree, and 
\begin_inset Quotes eld
\end_inset 

dyadic
\begin_inset Quotes erd
\end_inset 

 refering to powers of two.
 For example, the nodes of the binary tree need not be labelled with dyadic
 fractions.
 When they are, it may be called the 
\begin_inset Quotes eld
\end_inset 

dyadic tree
\begin_inset Quotes erd
\end_inset 

.
 
\layout Standard


\begin_inset Float figure
wide false
collapsed true

\layout Caption


\begin_inset LatexCommand \label{cap:The-Dyadic-Tree}

\end_inset 

The Dyadic Tree
\layout Standard


\begin_inset Graphics
	filename dyadic.eps
	width 100text%
	clip

\end_inset 


\end_inset 

 
\layout Standard

The binary tree is readily navigated when descending down it, by making
 a sequence of left and right moves.
 Labelling these moves by 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

, every node can be uniquely labelled by the path taken to get to it from
 the root of the tree.
 A general node of the tree thus corresponds to some string of letters 
\begin_inset Formula $L^{m}R^{n}L^{p}\cdots$
\end_inset 

 for some non-negative integer 
\begin_inset Formula $m$
\end_inset 

 and positive integers 
\begin_inset Formula $n$
\end_inset 

, 
\begin_inset Formula $p$
\end_inset 

, \SpecialChar \ldots{}
.
 The superscript, as usual, simply means that a given letter is repeated
 some number of times, so that 
\begin_inset Formula \[
L^{m}R^{n}L^{p}\cdots=\begin{array}{ccc}
\underbrace{LLL\cdots L} & \underbrace{RR\cdots R} & \underbrace{LL\cdots L}\\
m & n & p\end{array}\cdots\]

\end_inset 

For the dyadic tree, the path label can be directly converted to the dyadic
 label: the string of 
\begin_inset Formula $L$
\end_inset 

's and 
\begin_inset Formula $R$
\end_inset 

's can be taken as a string of 
\begin_inset Formula $0$
\end_inset 

's and 
\begin_inset Formula $1$
\end_inset 

's, a binary expansion; one adds an extra 
\begin_inset Formula $1$
\end_inset 

 at the end to get the dyadic value.
 Thus, starting at the root of the tree, taken to be 
\begin_inset Formula $1/2$
\end_inset 

, a series of left and right moves takes one to the following nodes:
\begin_inset Formula \[
\begin{array}{ccccc}
L & = & 0.01 & = & 1/4\\
R & = & 0.11 & = & 3/4\\
RL & = & 0.101 & = & 5/8\\
L^{2} & = & 0.001 & = & 1/8\\
L^{2}RL & = & 0.00101 & = & 5/32\end{array}\]

\end_inset 

 
\layout Standard

Selecting a node in the tree is the same as selecting a subtree, in that
 the node is the root of the entire subtree underneath it.
 Any subtree is clearly isomorphic to the whole tree, and it is from this
 property that self-similarity follows for any system that can be mapped
 onto the binary tree.
 If the nodes of the tree are labelled in strictly ascending order, as they
 are in the dyadic tree, then selecting a node in the tree is the same as
 specifying an interval: the interval runs from the lim 
\emph on 
inf
\emph default 
 to the lim 
\emph on 
sup
\emph default 
 of the subtree.
 The converse is not true: a general interval will not correspond to a single
 subtree.
 One may choose the lower limit of an interval arbitrarily, but the upper
 limit of the interval will be constrained by the possible subtrees with
 the given lower limit.
 These ideas, of the equivalence of intervals and trees and nodes, will
 be made more precise in later sections.
\layout Subsection

The Stern-Brocot Tree
\layout Standard

The Stern-Brocot tree
\begin_inset LatexCommand \cite{Bog96}

\end_inset 

, at whose nodes sit the Farey fractions
\begin_inset LatexCommand \cite{Har38}

\end_inset 

, is depicted in figure 
\begin_inset LatexCommand \ref{cap:The-Farey-Tree}

\end_inset 

.
 It is a binary tree labelled with rational numbers in the most peculiar
 fashion, and the tree has many unusual and interesting number-theoretic
 properties.
 It is constructed by means of mediants.
 The mediant of two fractions 
\begin_inset Formula $p/q$
\end_inset 

 and 
\begin_inset Formula $r/s$
\end_inset 

 is defined as 
\begin_inset Formula $(p+r)/(q+s)$
\end_inset 

: one adds numerator and denominator, as if making a school-child mistake.
 One begins the constuction by labelling the end-points of the unit interval
 as 
\begin_inset Formula $0/1$
\end_inset 

 to 
\begin_inset Formula $1/1$
\end_inset 

, and arranging them into a row, the zeroth row: 
\begin_inset Formula $\left\{ \frac{0}{1},\frac{1}{1}\right\} $
\end_inset 

.
 The first mediant is 
\begin_inset Formula $(0+1)/(1+1)=1/2$
\end_inset 

, which is placed in the middle to create the first row: 
\begin_inset Formula $\left\{ \frac{0}{1},\frac{1}{2},\frac{1}{1}\right\} $
\end_inset 

.
 At the next iteration, one may construct two more mediants,
\begin_inset Formula \begin{eqnarray*}
\frac{(0+1)}{(1+2)} & = & \frac{1}{3}\\
\frac{(1+1)}{(2+1)} & = & \frac{2}{3}\end{eqnarray*}

\end_inset 

 which are placed in between thier progenitors, so: 
\begin_inset Formula $\left\{ \frac{0}{1},\frac{1}{3},\frac{1}{2},\frac{2}{3},\frac{1}{1}\right\} $
\end_inset 

.
 The construction proceeds onwards in this manner, with the mediant being
 taken of neighboring fractions.
 The tree itself is obtained very simply by placing the mediants onto the
 the respective positions in the tree.
\layout Standard


\begin_inset Float figure
wide false
collapsed true

\layout Caption


\begin_inset LatexCommand \label{cap:The-Farey-Tree}

\end_inset 

The Stern-Brocot Tree
\layout Standard


\begin_inset Graphics
	filename farey.eps
	width 100text%

\end_inset 


\end_inset 


\layout Standard

Neighboring fractions in each row have the curious property of being 
\begin_inset Quotes eld
\end_inset 

unimodular
\begin_inset Quotes erd
\end_inset 

: by this, it is meant that if 
\begin_inset Formula $p/q$
\end_inset 

 and 
\begin_inset Formula $r/s$
\end_inset 

 are neighboring fractions, then 
\begin_inset Formula $rq-ps=1$
\end_inset 

.
 This is easily proved by induction: clearly, the relation holds for 
\begin_inset Formula $0/1$
\end_inset 

 and 
\begin_inset Formula $1/1$
\end_inset 

.
 One then shows that if the relationship holds for the pair 
\begin_inset Formula $\left(\frac{p}{q},\frac{r}{s}\right)$
\end_inset 

, then it also holds for the two pairs 
\begin_inset Formula $\left(\frac{p}{q},\frac{p+r}{q+s}\right)$
\end_inset 

 and 
\begin_inset Formula $\left(\frac{p+r}{q+s},\frac{r}{s}\right)$
\end_inset 

.
 The term 
\begin_inset Quotes eld
\end_inset 

unimodular
\begin_inset Quotes erd
\end_inset 

, while seemingly opaque here, is no accident.
 The pair of fractions, written as a 2x2 matrix 
\begin_inset Formula \[
A=\left[\begin{array}{cc}
r & p\\
s & q\end{array}\right]\]

\end_inset 

 has a unit determinant, and so 
\begin_inset Formula $A\in SL(2,\mathbb{Z})$
\end_inset 

, where 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

 is the group of 2x2 matricies with unit determinant.
 Although its appearence here seems arbitrary, this group of matricies will
 recur more deeply throughout the theory of binary trees.
 The unimodular property then allows one to prove that
\begin_inset Formula \[
\frac{p}{q}<\frac{p+r}{q+s}<\frac{r}{s}\]

\end_inset 

 and so mediants always lie strictly in between thier progenitors.
 This implies that every row of Farey fractions are in strict ascending
 order.
 From this it follows that any given fraction can appear only once in a
 given row, and that the progenitors of a given fraction are unique.
 In fact, it may be shown that every fraction appears somewhere in the tree;
 several simple proofs are provided in 
\begin_inset LatexCommand \cite{Bog96}

\end_inset 

.
\layout Subsection

The Question Mark Function
\layout Standard

By identifying the dyadic tree and the Stern-Brocot tree, one obtains the
 Minkowski question mark function as the map between the two trees.
 The question mark function is denoted by 
\begin_inset Formula $?(x)$
\end_inset 

, and is the map of labels from the Stern-Brocot tree to the dyadic tree,
 so that, for example, 
\begin_inset Formula $?(1/3)=1/4$
\end_inset 

.
 The recursive construction of the two trees also allows a recursive constructio
n of the question mark function
\begin_inset LatexCommand \cite[Contorted fractions, chapter 8]{Con76}

\end_inset 

.
 At the endpoints, one has 
\begin_inset Formula $?(0)=0$
\end_inset 

 and 
\begin_inset Formula $?(1)=1$
\end_inset 

.
 Then, given a pair of neighboring progenitors 
\begin_inset Formula $p/q$
\end_inset 

 and 
\begin_inset Formula $r/s$
\end_inset 

, one equates the Farey mediant to the arithmetic average:
\begin_inset Formula \begin{equation}
?\left(\frac{p+r}{q+s}\right)=\frac{1}{2}\left[?\left(\frac{p}{q}\right)+?\left(\frac{r}{s}\right)\right]\label{eq:recursive ? fun defn}\end{equation}

\end_inset 

That this gives a node on the dyadic tree follows easily, as the dyadic
 tree may be constructed in the same way that the Stern-Brocot tree was,
 with arithmetic average taking the place of the mediant.
\layout Standard

The recursive construction provides a map from the rationals to the dyadic
 rationals.
 Given a square-free number 
\begin_inset Formula $p,$
\end_inset 

 define
\begin_inset Formula \[
\mathbb{Q}_{p}=\left.\left\{ \frac{m}{p^{n}}\right|n\in\mathbb{N},\,0\le m<p^{n}\right\} \]

\end_inset 

 to be the 
\begin_inset Formula $p$
\end_inset 

-adic rationals on the unit interval, that is, the rational numbers with
 a power of 
\begin_inset Formula $p$
\end_inset 

 inp_{N-1}/q_{N-1} the denominator.
 Here, 
\begin_inset Formula $\mathbb{N}$
\end_inset 

 denotes the set of natural numbers.
 The term 
\begin_inset Quotes eld
\end_inset 

square-free
\begin_inset Quotes erd
\end_inset 

 simply means that all of the prime factors of 
\begin_inset Formula $p$
\end_inset 

 occur only once; 
\begin_inset Formula $p$
\end_inset 

 contains no squares.
 With this notation, the question mark function is then a map 
\begin_inset Formula \[
?:\mathbb{Q}\to\mathbb{Q}_{2}\]

\end_inset 

 where, by abuse of notation, 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 is understood to be the rational numbers on the unit interval.
 The restriction to the unit interval avoids the question of how to extend
 the question mark function to larger positive or negative arguments; several
 different, inequivalent extensions are possible.
 In all of what follows, whenever the symbols 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 or 
\begin_inset Formula $\mathbb{Q}_{2}$
\end_inset 

 or even 
\begin_inset Formula $\mathbb{R}$
\end_inset 

 are used, these should be understood to be limited to the unit interval;
 this avoids the need for a more cumbersome notation.
\layout Standard

The rationals 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 and the dyadics 
\begin_inset Formula $\mathbb{Q}_{2}$
\end_inset 

 are both dense in the reals 
\begin_inset Formula $\mathbb{R}$
\end_inset 

.
 A well-known theorem of general topology states that any continuous map
 of dense subsets of 
\begin_inset Formula $\mathbb{R}$
\end_inset 

 can be uniquely extended to a continuous map for all of 
\begin_inset Formula $\mathbb{R}$
\end_inset 

.
 It is straight-forward to show that the question mark function is continuous
 in the usual topology on the unit interval: given any open interval 
\begin_inset Formula $(a,b)$
\end_inset 

, the preimage 
\begin_inset Formula $?^{-1}(a,b)$
\end_inset 

 is also an open set.
 The proof of continuity follows from the fact that both the dyadic and
 the Stern-Brocot trees were strictly ordered (if 
\begin_inset Formula $p/q<r/s$
\end_inset 

 then 
\begin_inset Formula $p/q$
\end_inset 

 will appear to the left of 
\begin_inset Formula $r/s$
\end_inset 

 in the tree), and that all possible dyadics appear in the dyadic tree,
 and all possible rationals appear in the Stern-Brocot tree.
 Thus, one may conclude that the question mark function is well-defined
 on the real numbes, and furthermore, that it is monotonically increasing.
\layout Subsection

Representations of Real Numbers 
\layout Standard

An alternate definition of the question mark function may be given that
 is more suitable for many practical computations, than the recursive definition
 of equation 
\begin_inset LatexCommand \ref{eq:recursive ? fun defn}

\end_inset 

.
 The alternate defintion is given in terms of continued fractions, and requires
 a breif diversion into the representation of real numbers.
\layout Standard

Let 
\begin_inset Formula $x=[a_{1},a_{2},...]$
\end_inset 

 be the continued fraction representation
\begin_inset LatexCommand \cite{Khin35}

\end_inset 

 for a real number 
\begin_inset Formula $x$
\end_inset 

.
 In this representation, one has 
\begin_inset Formula \[
x=\frac{1}{a_{1}+\frac{1}{a_{2}+\frac{1}{a_{3}+\cdots}}}\]

\end_inset 

 for positive integers 
\begin_inset Formula $a_{1},a_{2},a_{3},\cdots$
\end_inset 

 .
 The word 
\begin_inset Quotes eld
\end_inset 

representation
\begin_inset Quotes erd
\end_inset 

 here is not lightly choosen, but is meant to evoke a deeper idea: that
 the real numbers exist as an abstract set, whereas the continued fraction
 is one way of writing down the value of a real number in a manipulable
 way.
 Other representations are possible: of course, everyone is taught the decimal
 expansion (the base-10 or 10-adic representation).
 Formally, one writes 
\begin_inset Formula \[
[]:\mathbb{R}\to\mathbb{N}^{\omega}\]

\end_inset 

 where 
\begin_inset Formula $[]$
\end_inset 

 is understood to be the operation of creating the continued fraction expansion
 of a real number, and 
\begin_inset Formula $\mathbb{N}^{\omega}=\mathbb{N}\times\mathbb{N}\times\cdots$
\end_inset 

 is understood to be the Cartesian product of a countable infinity of copies
 of the natural numbers 
\begin_inset Formula $\mathbb{N}$
\end_inset 

.
 By contrast, the 
\begin_inset Formula $p$
\end_inset 

-adic or base-
\begin_inset Formula $p$
\end_inset 

 representation of a real number is given by 
\begin_inset Formula \[
()_{p}:\mathbb{R}\to\mathbb{Z}_{p}^{\omega}\]

\end_inset 

 Here, 
\begin_inset Formula $\mathbb{Z}_{p}=\left\{ n\vert n\in\mathbb{Z},\,0\le n<p\right\} $
\end_inset 

 is the set of integers from 0 to 
\begin_inset Formula $p-1$
\end_inset 

, and so 
\begin_inset Formula $\mathbb{Z}_{p}^{\omega}=\mathbb{Z}_{p}\times\mathbb{Z}_{p}\times\cdots$
\end_inset 

 is the product of a countable infinity of copies of 
\begin_inset Formula $\mathbb{Z}_{p}$
\end_inset 

.
 Here, the symbol 
\begin_inset Formula $(x)_{p}$
\end_inset 

 just means, very simply, 
\begin_inset Quotes eld
\end_inset 

take the base-
\begin_inset Formula $p$
\end_inset 

 expansion of the real number 
\begin_inset Formula $x$
\end_inset 


\begin_inset Quotes erd
\end_inset 

, so that, for example, 
\begin_inset Formula $(\pi)_{10}=3.141592653\cdots$
\end_inset 

.
\layout Standard

A remarkable and sometimes-forgotten property of the 
\begin_inset Formula $p$
\end_inset 

-adic representation is that it is not isomorphic to the real numbers.
 A common school demonstration is that 
\begin_inset Formula $0.9999\cdots=1.000\cdots$
\end_inset 

: there are two different base-10 expansions that are equal to the same
 real number.
 In fact, this ambiguity exists for any 
\begin_inset Formula $p$
\end_inset 

-adic fraction when written out in base-
\begin_inset Formula $p$
\end_inset 

.
 This happens for 
\emph on 
every
\emph default 
 
\begin_inset Formula $p$
\end_inset 

-adic representation.
 There is a very simple way of visualizing this problem in terms of trees.
 Consider, for example, 
\begin_inset Formula $p=2$
\end_inset 

.
 A 
\begin_inset Formula $2$
\end_inset 

-adic fraction corresponds to a node in the dyadic tree:the dyadic tree
 provides a representation for the 2-adic fractions.
 Consider now the real number obtained by starting at a given node, taking
 the left branch, and then a succession of right branches, as so: 
\begin_inset Formula $LRRRR\cdots$
\end_inset 

.
 after an infinite number of steps, one arrives at a 
\begin_inset Quotes eld
\end_inset 

leaf
\begin_inset Quotes erd
\end_inset 

 of the tree.
 The numerical value of the leaf, expressed as a real number, is identical
 to the starting node.
 Similarly, one may take the right branch, followed by a succession of left
 branches, like so: 
\begin_inset Formula $RLLLL\cdots$
\end_inset 

 One concludes that the dyadic tree, as a representation of the real numbers,
 is triply degenerate at the 
\begin_inset Formula $2$
\end_inset 

-adic fractions, in that 
\begin_inset Formula $\frac{1}{2}=0.1000\cdots=0.01111\cdots$
\end_inset 

.
 In fact, the leaves of the dyadic tree form the Cantor set, a property
 that will be explored in a later section.
\layout Subsection

A Direct Form for the Question Mark Function
\layout Standard

For many purposes, including numerical exploration, a non-recursive defintion
 of the question mark function is convenient to have.
 That is, given any rational or real 
\begin_inset Formula $x$
\end_inset 

, one wants to be able to directly evaluate 
\begin_inset Formula $?(x)$
\end_inset 

.
 This may be easily done by the use of continued fractions.
 
\layout Standard

Given a continued-fraction expansion 
\begin_inset Formula $x=[a_{1},a_{2},\cdots]$
\end_inset 

 of a number real number 
\begin_inset Formula $x$
\end_inset 

, one then has that 
\begin_inset Formula \begin{equation}
?\left(x\right)=2\sum_{k=1}^{N}\left(-1\right)^{k}\;2^{-(a_{1}+a_{2}+...+a_{k})}\label{eq:direct ? fun defn}\end{equation}

\end_inset 

 where 
\begin_inset Formula $N$
\end_inset 

 is the length of the continued fraction; 
\begin_inset Formula $N=\infty$
\end_inset 

 for irrational numbers.This sum can be visualized as a count of an alternating
 sequence of 0's and 1's in the binary expansion of 
\begin_inset Formula $?(x)$
\end_inset 

: 
\begin_inset Formula \[
?(x)=\begin{array}{ccccc}
0.\underbrace{000...0} & \underbrace{11..1} & \underbrace{00..0} & \underbrace{11..1} & \underbrace{00..0}1..\\
a_{1}-1 & a_{2} & a_{3} & a_{4} & a_{5}\end{array}\]

\end_inset 

 When 
\begin_inset Formula $N$
\end_inset 

 is finite, then the expansion is completed by an infinite repetition of
 the opposite of the last digit, so that, for 
\begin_inset Formula $N$
\end_inset 

 even, the binary expansion trails off with all 0's, while for 
\begin_inset Formula $N$
\end_inset 

 odd, it ends with all 1's.
 This definition enables a simple algorithm for the direct evaluation of
 both the qestion mark function, and its inverse: in one direction, one
 simply computes the continued fraction expansion of a real number, and
 converts it to a sum.
 In the opposite direction, one simply counts digits in the dyadic expansion,
 using these to reconstruct the continued fraction.
\layout Theorem*

The recursive definition of the Minkowski question mark function, given
 in equation 
\begin_inset LatexCommand \ref{eq:recursive ? fun defn}

\end_inset 

, is equivalent to the direct definition of equation 
\begin_inset LatexCommand \ref{eq:direct ? fun defn}

\end_inset 

.
 
\layout Proof

To show equivalence, one needs to show that, after a sequence of left and
 right moves on the binary tree, the direct definition, in terms of continued
 fractions, gives a node on Stern-Brocot tree labelled with the correct
 value of the Farey fraction.
 This equivalence may be made by induction.
 
\layout Proof

The proof requires the use of partial convergents of continued fractions.
 Given a continued fraction 
\begin_inset Formula $[a_{1},a_{2},\cdots]$
\end_inset 

, one defines the 
\begin_inset Formula $k$
\end_inset 

'th convergent as 
\begin_inset Formula \[
\frac{p_{k}}{q_{k}}=[a_{1},a_{2},\cdots,a_{k}]\]

\end_inset 

 that is, as the result of terminating the continued fraction at the 
\begin_inset Formula $k$
\end_inset 

'th term.
 These are called convergents or approximants because these converge to
 the final value of the continued fraction: 
\begin_inset Formula \[
[a_{1},a_{2},\cdots]=\lim_{k\to\infty}\frac{p_{k}}{q_{k}}\]

\end_inset 

 The numerator and denominator of the convergent obey well-known recursion
 relations
\begin_inset LatexCommand \cite{Khin35}

\end_inset 

: 
\begin_inset Formula \begin{eqnarray*}
p_{k} & = & a_{k}p_{k-1}+p_{k-2}\\
q_{k} & = & a_{k}q_{k-1}+q_{k-2}\end{eqnarray*}

\end_inset 

 
\layout Proof

A walk to the left or to the right on the dyadic tree is equivalent to appending
 a 0 or a 1 to the dyadic expansion of a number.
 Using the direct definition, the operation of left and right moves on continued
 fractions may be discerened.
 A left move is given by 
\begin_inset Formula \[
L\left([a_{1},a_{2},\cdots,a_{N}]\right)=\begin{cases}
[a_{1},a_{2},\cdots,a_{N}+1] & \mbox{ for }N\mbox{ odd}\\{}
[a_{1},a_{2},\cdots,a_{N}-1,2] & \mbox{ for }N\mbox{ even }\end{cases}\]

\end_inset 

 whereas the right move is defined similarly, with the role of even and
 odd reversed.
 That is, a left move either increases the trailing entry in the continued
 fraction by one, or it inserts a comma, to start a new entry for the continued
 fraction.
 The seemingly strange appearence of the 
\begin_inset Quotes eld
\end_inset 

-1,2
\begin_inset Quotes erd
\end_inset 

 in the last is simply a byproduct of the identity 
\begin_inset Formula $[a_{1},a_{2},\cdots,a_{N}]=[a_{1},a_{2},\cdots,a_{N}-1,1]$
\end_inset 

.
 That is, the left move adds a one to the last entry, but only after normalizing
 the continued fraction so that it has an odd length.
 The right move does the same, after first normalizing to an even length.
 Thus, to understand the general case, its sufficient to contemplate the
 value of 
\begin_inset Formula $[a_{1},a_{2},\cdots,a_{N}+1]$
\end_inset 

.
\layout Proof

Let 
\begin_inset Formula \[
\frac{r_{N}}{s_{N}}=[a_{1},a_{2},\cdots,a_{N}+1]\]

\end_inset 

 be the convergent of the (left or right) subnode.
 One easily finds that 
\begin_inset Formula $r_{N}=p_{N}+p_{N-1}$
\end_inset 

 and 
\begin_inset Formula $s_{N}=q_{N}+q_{N-1}$
\end_inset 

.
 That is, the continued fraction 
\begin_inset Formula $[a_{1},a_{2},\cdots,a_{N}+1]$
\end_inset 

 is the mediant of its two last convergents, 
\begin_inset Formula $p_{N}/q_{N}$
\end_inset 

 and 
\begin_inset Formula $p_{N-1}/q_{N-1}$
\end_inset 

.
 This provides the inductive step.
 The convergent 
\begin_inset Formula $p_{N}/q_{N}$
\end_inset 

 corresponds to the immediate predecessor of 
\begin_inset Formula $r_{N}/s_{N}$
\end_inset 

 in the Stern-Brocot tree, while the convergent 
\begin_inset Formula $p_{N-1}/q_{N-1}$
\end_inset 

 represents the last 
\begin_inset Quotes eld
\end_inset 

change of direction
\begin_inset Quotes erd
\end_inset 

 in the left-right traversal.
\layout Standard

Just as the mediants of the Farey fractions were unimodular, so are the
 convergents of a continued fraction: 
\begin_inset Formula $q_{k}p_{k-1}-p_{k}q_{k-1}=(-1)^{k}$
\end_inset 

, so that, as before, these may be arranged into a 2x2 matrix with unit
 determinant.
\layout Subsection

Pellian Equations
\layout Standard

The question mark function has the curious property that it maps quadratic
 irrationals to rational numbers, and thus arises indirectly in the theory
 of Pellian equations.
 The connection can be demonstrated as follows.
 It has already been noted that the question mark maps rational numbers
 to dyadics.
 Dyadic rationals have, by definition, a finite length binary expansion;
 just as rational numbers have a finite number of terms in thier continued
 fraction expansion: the question mark maps finite sequences to finite sequences.
 But what about periodic sequences? The fraction 1/9 has a repeating 2-adic
 expansion: 
\begin_inset Formula $1/9=0.000111011101110\cdots$
\end_inset 

 Thus, the corresponding continued fraction must be periodic as well: 
\begin_inset Formula $?([4,3,1,3,1,3,1,\cdots])=1/9$
\end_inset 

.
 What is the value of the continued fraction? Writing 
\begin_inset Formula $[4,3,1,3,1,3,1,\cdots]=[4,x]$
\end_inset 

, the value of 
\begin_inset Formula $x$
\end_inset 

 must satisfy 
\begin_inset Formula $x=[3,1,x]$
\end_inset 

 or 
\begin_inset Formula $x=-1/2+\sqrt{7/12}$
\end_inset 

, so that 
\begin_inset Formula $[4,3,1,3,1,3,1,\cdots]=1/(4+x)=\left(21-\sqrt{21}\right)/77$
\end_inset 

.
 In other words, one has 
\begin_inset Formula $?\left(\left(21-\sqrt{21}\right)/77\right)=1/9$
\end_inset 

.
 
\layout Standard

The solution took the form 
\begin_inset Formula $\left(j+k\sqrt{D}\right)/m$
\end_inset 

 for some integers 
\begin_inset Formula $j,k$
\end_inset 

 and positive integers 
\begin_inset Formula $D,m$
\end_inset 

.
 A number of this form is called a quadratic irrational; every such number
 is a solution to a quadratic equation.
 Gauss had demonstrated that every continued fraction that eventually becomes
 periodic takes a value that is a quadratic irrational, and conversely,
 that every quadratic irrational has a continued fraction expansion that
 eventually becomes periodic.
 Gauss also demonstrated that the partial convergents of the continued fraction
 are solutions to an equation 
\layout Standard


\begin_inset Formula \[
p^{2}-nq^{2}=1\]

\end_inset 

 for integer 
\begin_inset Formula $p,q$
\end_inset 

 and square-free integer 
\begin_inset Formula $n$
\end_inset 

.
 This equation is the Pellian equation; clearly the rational 
\begin_inset Formula $p/q$
\end_inset 

 becomes a good approximation to 
\begin_inset Formula $\sqrt{n}$
\end_inset 

.
 The appearence of the 1 on the right-hand side is again a manifestation
 of the unimodular relationship between partial convergents of the continued
 fraction: again, 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

 enters the picture.
 Curiously, the classification of the solutions to the Pellain equation
 has a connection to the Riemann hypothesis.
\layout Standard

A side effect of the question mark mapping is that it provides a simple
 proof that the set of quadratic irrationals is countable: each one is associate
d to a unique rational, and the rationals are countable.
\layout Section

Symmetries of the Question Mark
\layout Standard

The question mark function is self-similar, and the generators of the similarity
 transformations can be written down explicitly.
 These generate a subset of a group (they do not generate a whole group,
 as will be made clear); a subset of the group 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset 

.
 We'll give it a name: the 
\emph on 
dyadic monoid
\emph default 
, although in many ways it is more of a lattice than a monoid.
 The concept of a monoid, and a lattice, will be defined below; the reason
 for naming the dyadic monoid now is to support a hypothesis: the dyadic
 monoid gives the symmetry of all period-doubling fractal and chaotic phenomena;
 and can more or less be promoted to a category.
 
\layout Standard

Given a real number 
\begin_inset Formula $x$
\end_inset 

 having the continued fraction expansion 
\begin_inset Formula $x=[a_{1},a_{2},\cdots]$
\end_inset 

, define the function 
\begin_inset Formula $g(x)$
\end_inset 

 to be 
\begin_inset Formula $g(x)=[a_{1}+1,a_{2},\cdots]$
\end_inset 

 .
 A straightforward manipulation shows that 
\begin_inset Formula $g(x)$
\end_inset 

 has an explicit, concrete form: 
\begin_inset Formula $g(x)=x/(1+x)$
\end_inset 

.
 Making use of the 
\begin_inset Quotes eld
\end_inset 

direct
\begin_inset Quotes erd
\end_inset 

 defintion of the question mark 
\begin_inset LatexCommand \ref{eq:direct ? fun defn}

\end_inset 

, one has that 
\begin_inset Formula $g$
\end_inset 

 is a homomorphism of the question mark: 
\layout Standard


\begin_inset Formula \begin{equation}
(?\circ g)(x)=?(g(x))=?\left(\frac{x}{1+x}\right)=\frac{?(x)}{2}\label{eq:dyadic g}\end{equation}

\end_inset 

Here, 
\begin_inset Formula $\circ$
\end_inset 

 denotes function composition.
 The above identity follows, as adding one to 
\begin_inset Formula $a_{1}$
\end_inset 

is the same as dividing by two in 
\begin_inset LatexCommand \ref{eq:direct ? fun defn}

\end_inset 

.
 The repeated application of the function 
\begin_inset Formula $g$
\end_inset 

 generates a symmetry of the question mark.
 Denoting repeated iterations by 
\begin_inset Formula $g^{n}$
\end_inset 

, one readily obtains 
\begin_inset Formula $g^{n}(x)=x/(1+nx)$
\end_inset 

.
 Equivalently, for a continued fraction, 
\begin_inset Formula \[
g^{n}([a_{1},a_{2},..])=[a_{1}+n,a_{2},...]\]

\end_inset 

 Iterating under the question mark gives 
\begin_inset Formula \[
\left(?\circ g^{n}\right)(x)=?\left(\frac{1}{nx+1}\right)=\frac{?(x)}{2^{n}}\]

\end_inset 

 The generator 
\begin_inset Formula $g$
\end_inset 

 maps intervals to intervals, specifically 
\begin_inset Formula $g^{n}:[[0,1]]\rightarrow[[0,\frac{1}{n+1}]]$
\end_inset 

.
 Here the non-standard notation 
\begin_inset Formula $x\in[[a,b]]$
\end_inset 

 is introduced to denote an interval 
\begin_inset Formula $a\le x\le b$
\end_inset 

; the double bracket form is used only to avoid confusion with 
\begin_inset Formula $[]$
\end_inset 

 for continued fraction expansions.
 On the dyadic side, we have 
\begin_inset Formula $(?\circ g^{n}):[[0,1]]\rightarrow[[0,1/2^{n}]]$
\end_inset 

.
 
\layout Standard

The other symmetry of the question mark is more trivial: the question mark
 is symmetric under a left-right reflection:
\begin_inset Formula \[
?(1-x)=1-?(x)\]

\end_inset 

Denoting this by 
\begin_inset Formula $r$
\end_inset 

 for 
\begin_inset Quotes eld
\end_inset 

reflection
\begin_inset Quotes erd
\end_inset 

, a reflection operator may be defined as 
\begin_inset Formula $r(x)=1-x$
\end_inset 

.
 As an operator, 
\begin_inset Formula $r$
\end_inset 

 commutes with 
\begin_inset Formula $?$
\end_inset 

, since 
\begin_inset Formula $(?\circ r)(x)=(r\circ?)(x)$
\end_inset 

.
 Clearly, 
\begin_inset Formula $r$
\end_inset 

 cannot be applied more than once, since 
\begin_inset Formula $r^{2}$
\end_inset 

 is the identity.
 The reflection operator 
\begin_inset Formula $r$
\end_inset 

, composed with 
\begin_inset Formula $g$
\end_inset 

, generates more self-symmetries.
 Thus, for example, 
\begin_inset Formula \[
\left(?rg^{n}\right)(x)=\left(r?g^{n}\right)(x)=r\left(\frac{?(x)}{2^{n}}\right)=1-\frac{?(x)}{2^{n}}=?\left(r\left(\frac{x}{nx+1}\right)\right)=?\left(\frac{1+(n-1)x}{1+nx}\right)\]

\end_inset 

 shows that 
\begin_inset Formula $rg^{n}$
\end_inset 

 is the operation that, under 
\begin_inset Formula $?$
\end_inset 

, maps 
\begin_inset Formula $[[0,1]]\rightarrow[[1,1-1/2^{n}]]$
\end_inset 

.
 A general self-similarity transform may be written as 
\begin_inset Formula \begin{equation}
\gamma\equiv g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}\label{eq:general gr monoid elt}\end{equation}

\end_inset 

Applying the above process, it is relatively straightforward to see that
 
\begin_inset Formula \begin{eqnarray}
(?\circ\gamma)(x) & = & \left(?\circ g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}\right)(x)\label{eq:q-mark isomorph}\\
 & = & \frac{1}{2^{a_{1}}}-\frac{1}{2^{a_{1}+a_{2}}}+\frac{1}{2^{a_{1}+a_{2}+a_{3}}}-...+(-)^{N+1}\frac{?(x)}{2^{a_{1}+a_{2}+a_{3}+...+a_{N}}}\end{eqnarray}

\end_inset 

 To see the other leg of the commutative diagram of the homomorphism, observe
 that 
\begin_inset Formula $g^{n}(x)$
\end_inset 

 may be itself written as a continued fraction: 
\begin_inset Formula \[
g^{n}(x)=\frac{1}{n+\frac{1}{x}}=[n,\frac{1}{x}]\]

\end_inset 

 In the same vein, one has 
\begin_inset Formula $(rg^{n})(x)=[1,n-1,x]$
\end_inset 

 and, with the slight abuse of allowing continued fractions with negative
 integers:
\begin_inset Formula \[
r(x)=\frac{1}{1+\frac{1}{-1+\frac{1}{x}}}=[1,-1,x]\]

\end_inset 

Continuing this exercise, one finds that
\begin_inset Formula \begin{equation}
\gamma(x)=(g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}})(x)=[a_{1}+1,a_{2},a_{3},...,a_{N-1},a_{N}-1,x]\label{eq:gamma acting on cont frac}\end{equation}

\end_inset 

 
\layout Standard

To obtain the explicit form of this as a fraction, one need only remark
 that both 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 take the form of a 
\begin_inset Quotes eld
\end_inset 

fractional linear transform
\begin_inset Quotes erd
\end_inset 

 or a 
\begin_inset Quotes eld
\end_inset 

Möbius transform
\begin_inset Quotes erd
\end_inset 

.
 That is, given a general 2x2 matrix, one defines the action 
\begin_inset Formula \begin{equation}
\left[\begin{array}{cc}
a & b\\
c & d\end{array}\right]:x\to\frac{ax+b}{cx+d}\label{eq:Mobius xform}\end{equation}

\end_inset 

 The utility of the fractional linear transform is that it commutes with
 matrix multiplication; one may multiply matrices on the left-hand side
 to get the correct expression on the right-hand side.
 In terms of Möbius transformations, one then has that 
\begin_inset Formula \begin{equation}
g=\left[\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right]\quad\mbox{ and }\quad r=\left[\begin{array}{cc}
-1 & 1\\
0 & 1\end{array}\right]\label{eq:gr elts}\end{equation}

\end_inset 

 and so 
\begin_inset Formula $g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}$
\end_inset 

 may be evaluated by matrix multiplication, followed by an application of
 the Möbius transformation 
\begin_inset LatexCommand \ref{eq:Mobius xform}

\end_inset 

 to obtain the fractional form.
 
\layout Subsection

Useful Identities
\layout Standard

Some curious combinations of these operators are tabulated here.
 The action of 
\begin_inset Formula $r$
\end_inset 

 on a continued fraaction is given by 
\layout Standard


\begin_inset Formula \[
r([a_{1},a_{2},..])=\left\{ \begin{array}{ccc}
\;[1,a_{1}-1,a_{2},..] & \;\textrm{\; for \;} & a_{1}\neq1\\
\;[a_{2}+1,a_{3},...] & \textrm{\;\; for \;} & a_{1}=1\end{array}\right.\]

\end_inset 

Using the above, the operator to insert a digit 
\begin_inset Formula $n\geq1$
\end_inset 

 at the front of the continued fraction expansion is 
\begin_inset Formula \[
(g^{n-1}rg)([a_{1},a_{2},...])=[n,a_{1},a_{2},...]\]

\end_inset 

which can be verified by using the Möbius transformation 
\begin_inset Formula \[
(g^{n-1}rg)(x)=\left(\left[\begin{array}{cc}
1 & 0\\
n-1\, & 1\end{array}\right]\left[\begin{array}{cc}
-1\, & 1\\
0 & 1\end{array}\right]\left[\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right]\right):(x)=\left(\begin{array}{cc}
0 & 1\\
1 & n\end{array}\right):(x)=\frac{1}{n+x}\]

\end_inset 

 The repeated application of the insertion operator leads to 
\begin_inset Formula \[
(g^{j-1}rg)(g^{k-1}rg)(g^{m-1}rg)...(x)=(g^{j-1}rg^{k}rg^{m}rg...)(x)=[j,k,m,...,x]\]

\end_inset 

 which provides a simple proof of equation 
\begin_inset LatexCommand \ref{eq:gamma acting on cont frac}

\end_inset 

.
\layout Standard

The append operator follows by combining 
\begin_inset Formula \[
[a_{1},a_{2},...,a_{N},g^{k}(x)]=[a_{1},a_{2},...,a_{N}+k,x]\]

\end_inset 

 and 
\begin_inset Formula \[
[a_{1},a_{2},...,a_{N},r(x)]=[a_{1},a_{2},...,a_{N}+1,-1,x]\]

\end_inset 

 The appending operator is 
\begin_inset Formula \[
\left(g^{-1}rg^{k+1}\right)(x)=\frac{kx+1}{x}\]

\end_inset 

 which, for 
\begin_inset Formula $k\geq1$
\end_inset 

, acts as 
\begin_inset Formula \[
[a_{1},a_{2},...,a_{N},(g^{-1}rg^{k+1})(x)]=[a_{1},a_{2},...,a_{N},k,x]\]

\end_inset 

 Continued fractions can be built up by appending at the back, starting
 from 
\begin_inset Formula $(g^{-1}rg)(x)=1/x=[x]$
\end_inset 

 as 
\begin_inset Formula \[
(g^{-1}rg)(g^{-1}rg^{j+1})(g^{-1}rg^{k+1})(g^{-1}rg^{m+1})...(x)=(g^{j-1}rg^{k}rg^{m}rg...)(x)=[j,k,m,...,x]\]

\end_inset 

 and so arriving at the same result as before.
\layout Subsection


\begin_inset LatexCommand \label{sub:Representations-of-Real}

\end_inset 

Representations of Real Numbers
\layout Standard

The dyadic numbers and continued fractions are often taken as 
\begin_inset Quotes eld
\end_inset 

being the same thing
\begin_inset Quotes erd
\end_inset 

 as the real numbers; more precisely, they are 
\emph on 
representations
\emph default 
 of the reals.
 That is, both systems offer a way of writing down, and computing with the
 real numbers; however, they are not quite the same thing as real numbers
 themselves.
 In particular, tehy have some strange properties of thier own, not shared
 by the reals in general.
 Thus, for example, in the dyadic representation, one has two different
 representations, 
\begin_inset Formula $1.000\cdots$
\end_inset 

 and 
\begin_inset Formula $0.111\cdots$
\end_inset 

, both of which represent the real number one.
 Thus, the dyadic representation is not even isomorphic to the reals; it
 is at best homomorphic.
 In a later section, we'll see the that the dyadics are isomorphic to the
 Cantor set.
 In this section, the relationship of these two representations is spelled
 out in greater detail and in more formal terms.
 
\layout Standard

Denote by 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 the dyadic representation of the real numbers 
\begin_inset Formula $\mathbb{R}$
\end_inset 

 in the dyadic expansions; that is, 
\begin_inset Formula $\forall x\in\mathbb{R}\;\exists x_{D}\in\mathbb{R}_{D}$
\end_inset 

 which represents the real number 
\begin_inset Formula $x$
\end_inset 

 as the dyadic expansion 
\begin_inset Formula $x_{D}$
\end_inset 

 with 
\begin_inset Formula \[
x_{D}=\sum_{n=-\infty}^{\infty}b_{n}2^{n}\]

\end_inset 

 where 
\begin_inset Formula $b_{k}\in\left\{ 0,1\right\} \;\forall k\in\mathbb{Z}$
\end_inset 

.
 Let 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

 denote the representation of the real numbers as continued fractions, that
 is, 
\begin_inset Formula $\forall x\in\mathbb{R}\;\exists x_{C}\in\mathbb{R}_{C}$
\end_inset 

 such that 
\begin_inset Formula \[
x_{C}=a_{0}+\frac{1}{a_{1}+\frac{1}{a_{2+...}}}=[a_{0};a_{1},a_{2},...]\]

\end_inset 

where 
\begin_inset Formula $a_{k}\in\mathbb{N}\;\forall k\in\mathbb{N}$
\end_inset 

, with the exception that 
\begin_inset Formula $a_{0}\in\mathbb{Z}$
\end_inset 

.
 
\layout Standard

Both of these representations are acted upon by the self-similarity transformati
on 
\begin_inset LatexCommand \ref{eq:general gr monoid elt}

\end_inset 

, but each in a different way.
 On the dyadic representation, the generator 
\begin_inset Formula $g$
\end_inset 

 has the representation 
\begin_inset Formula \begin{eqnarray*}
g_{D} & :\mathbb{R}_{D} & \,\longrightarrow\mathbb{R}_{D}\\
 & x & \longmapsto x/2\end{eqnarray*}

\end_inset 

 when acting on the set of dyadic numbers, whereas as this same element
 has the representation 
\begin_inset Formula \begin{eqnarray*}
g_{C} & :\mathbb{R}_{C} & \,\longrightarrow\mathbb{R}_{C}\\
 & x & \longmapsto x/(x+1)\end{eqnarray*}

\end_inset 

 when acting on the set of continued fractions.
 The other generator, 
\begin_inset Formula $r$
\end_inset 

, has the same representation on both sets: 
\begin_inset Formula $r(x)=1-x$
\end_inset 

.
 
\layout Standard

Define the set 
\begin_inset Formula \begin{equation}
M=\left\{ \gamma\,\vert\,\gamma=g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}\;\mbox{ for }\; a_{k}\in\mathbb{N}\;\mbox{ and }a_{1},a_{N}\ge0\right\} \label{eq:dyadic monoid}\end{equation}

\end_inset 

 That is, each 
\begin_inset Formula $a_{k}$
\end_inset 

 to be a positive integer, with the exception of 
\begin_inset Formula $a_{1}$
\end_inset 

 and 
\begin_inset Formula $a_{N}$
\end_inset 

 which may be zero.
 The set 
\begin_inset Formula $M$
\end_inset 

 is a 
\emph on 
monoid
\emph default 
, and, more formally, is the 
\emph on 
dyadic monoid
\emph default 
.
 A monoid is defined as a set with an associative operation, in this case
 multiplication; that is closed under the operation, in the sense that if
 
\begin_inset Formula $\gamma_{1}\in M$
\end_inset 

 and 
\begin_inset Formula $\gamma_{2}\in M$
\end_inset 

 then 
\begin_inset Formula $\gamma_{1}\gamma_{2}\in M$
\end_inset 

.
 Monoids are sometimes called 
\emph on 
semigroups
\emph default 
, although the term semigroup is sometimes reserved for the idea of a monoid,
 but without an identity element.
 In this case, 
\begin_inset Formula $M$
\end_inset 

 has an identity element 
\begin_inset Formula $e$
\end_inset 

, so that 
\begin_inset Formula $e\gamma=\gamma e=\gamma$
\end_inset 

 for all 
\begin_inset Formula $\gamma\in M$
\end_inset 

.
 This definition of a monoid is similar to that for a group, with an important
 difference: the monoid does not contain inverses.
 For a given 
\begin_inset Formula $\gamma\in M$
\end_inset 

, there is no 
\begin_inset Formula $\beta\in M$
\end_inset 

 such that 
\begin_inset Formula $\gamma\beta=e$
\end_inset 

.
 Thus, 
\begin_inset Formula $M$
\end_inset 

 is not a group.
 Now, associative monoids, such as this, do have the universal property
 of being extendable to a full-fledged group, and one certainly could do
 this for 
\begin_inset Formula $M$
\end_inset 

.
 However, such an extension can no longer be interpreted as a set of self-simila
rities acting on intervals.
 The extend to which some additional elements, that would act as inverses,
 can be added to 
\begin_inset Formula $M$
\end_inset 

, is explored in a later section.
 
\layout Standard

The role of the question mark function in connecting these two representations
 of the reals was just noted.
 This may be turned into a more formal theorem:
\layout Theorem*

The Minkowski question mark provides an homomorphism between 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

 and 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

.
 That is, there is a commuting diagram
\begin_inset Formula \[
\begin{array}{ccc}
\mathbb{R}_{C} & \begin{array}{c}
\gamma_{C}\\
\longrightarrow\\
\end{array} & \mathbb{R}_{C}\\
\begin{array}{ccc}
? & \downarrow\end{array} & \bigcirc & \begin{array}{ccc}
 & \downarrow & ?\end{array}\\
\mathbb{R}_{D} & \begin{array}{c}
\\\longrightarrow\\
\gamma_{D}\end{array} & \mathbb{R}_{D}\end{array}\]

\end_inset 

such that 
\begin_inset Formula $?\circ\gamma_{C}=\gamma_{D}\circ?$
\end_inset 

 holds for all 
\begin_inset Formula $\gamma\in M$
\end_inset 

.
 More precisely, the homomorphism 
\begin_inset Formula $\left(?\circ\gamma_{C}\right)(x_{C})=\left(\gamma_{D}\circ?\right)(x_{D})$
\end_inset 

 holds for all 
\begin_inset Formula $\gamma\in M$
\end_inset 

 and 
\begin_inset Formula $x\in\mathbb{R}$
\end_inset 

, where 
\begin_inset Formula $x_{D}\in\mathbb{R}_{D}$
\end_inset 

 and 
\begin_inset Formula $x_{C}\in\mathbb{R}_{C}$
\end_inset 

 are both representations of the same 
\begin_inset Formula $x$
\end_inset 

.
 
\layout Proof

The two representations of 
\begin_inset Formula $\gamma$
\end_inset 

 in the two spaces was given in the previous section above, but it will
 be repeated here just so to make this particularly clear.
 First, decompose the abstract group element 
\begin_inset Formula $\gamma\in M$
\end_inset 

 in terms of the generators 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

: 
\begin_inset Formula \[
\gamma=g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}\]

\end_inset 

 Then, this 
\begin_inset Formula $\gamma$
\end_inset 

 has the representation 
\begin_inset Formula $\gamma_{D}$
\end_inset 

, which is 
\begin_inset Formula \begin{equation}
\gamma_{D}(x)=\frac{1}{2^{a_{1}}}-\frac{1}{2^{a_{1}+a_{2}}}+\frac{1}{2^{a_{1}+a_{2}+a_{3}}}-...+(-)^{N+1}\frac{x}{2^{a_{1}+a_{2}+a_{3}+...+a_{N}}}\label{eq:dyadic gamma}\end{equation}

\end_inset 

 It also has the representation 
\begin_inset Formula $\gamma_{C}$
\end_inset 

, which is 
\begin_inset Formula \begin{equation}
\gamma_{C}(x)=[a_{1}+1,a_{2},a_{3},...,a_{N-1},a_{N}-1,x]\label{eq:modular gamma}\end{equation}

\end_inset 

 and so we need to prove that 
\begin_inset Formula $?(\gamma_{C}(x))=\gamma_{D}(?(x))$
\end_inset 

.
\layout Proof

First, it is clear that if this equivalence holds for any given 
\begin_inset Formula $\gamma$
\end_inset 

 and 
\begin_inset Formula $\gamma^{\prime}$
\end_inset 

 (at some fixed 
\begin_inset Formula $x$
\end_inset 

), then it also holds for the product 
\begin_inset Formula $\gamma\gamma^{\prime}$
\end_inset 

 (at the same fixed 
\begin_inset Formula $x$
\end_inset 

).
 Thus, induction on 
\begin_inset Formula $\gamma$
\end_inset 

 may be applied to show it holds for all 
\begin_inset Formula $\gamma\in M$
\end_inset 

.
 Next, we need to prove that this holds for all 
\begin_inset Formula $x$
\end_inset 

.
 The introductory discussions, up top, showed that the relation holds for
 
\begin_inset Formula $x=0$
\end_inset 

 and 
\begin_inset Formula $x=1$
\end_inset 

 , and, by congruence of the dyadic and Stern-Brocot trees, that it holds
 for any 
\begin_inset Formula $x$
\end_inset 

 that is a rational number.
 To complete the proof, one must show that, in the usual topology for the
 reals, that the rationals are dense in the reals, and so the closure of
 the rationals gives the reals.
 Intuitively, this seems obvious just from a consideration of the limiting
 values at the 
\begin_inset Quotes eld
\end_inset 

leaves
\begin_inset Quotes erd
\end_inset 

 of the infinite binary tree.
 However, care must be taken, as the dyadics have another closure besides
 the reals; and so the proof requires that 
\begin_inset Formula $?(x)$
\end_inset 

 be taken to be a continuous function.
 All this requires a somewhat more subtle discussion that is beyond the
 scope of (the currrent draft of) this paper.
\layout Standard

To summarize, the continued fractions 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

 and dyadic numbers 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 are two distinct and inequivalent representations of the real numbers,
 both homomorphic to the abstract concept of the reals.
 These two representations are distinct, having different transformation
 properties under the action of the dyadic monoid.
 In fact, both 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 and 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

 are isomorphic to the Cantor set, as will be discussed below, and so the
 question mark provides an isomorphism, not just a homomorphism, between
 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 and 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

.
 
\layout Section

Linear Groups and the Modular Group
\layout Standard

Throughout the development above, various two by two matricies appeared
 and were employed in curious ways.
 At this point, it is appropriate to review some of the properties of such
 matrices; they play many important roles in physics and mathematics, and
 so serve to tie the Minkowski question mark into the broader outlines.
 
\layout Standard

The most general case is the 
\emph on 
general linear group
\emph default 
 
\begin_inset Formula $GL(2,\mathbb{C})$
\end_inset 

.
 This is the set of 2x2 matricies 
\begin_inset Formula \begin{equation}
A=\left[\begin{array}{cc}
a & b\\
c & d\end{array}\right]\label{eq:matrix}\end{equation}

\end_inset 

with entries 
\begin_inset Formula $a,b,c,d\in\mathbb{C}$
\end_inset 

 from the complex numbers, whose determinant 
\begin_inset Formula $ad-bc\ne0$
\end_inset 

 is not zero.
 The non-vanishing determinant means that a given matrix may be inverted;
 as groups must always contain thier inverse.
 
\layout Standard

Thanks to the Möbius transformation 
\begin_inset LatexCommand \ref{eq:Mobius xform}

\end_inset 

, this group can be seen to act on the complex plane, taking a value 
\begin_inset Formula $z\in\mathbb{C}$
\end_inset 

 to a value 
\begin_inset Formula $(az+b)/(cz+d)$
\end_inset 

.
 In fact, it acts on the upper half-plane, as it can be shown that Möbius
 transformations always take complex numbers with a positive imaginary part
 to another complex number with postive imaginary part.
 The Möbius transformation introduces a bit of redundancy, however, as both
 
\begin_inset Formula $A$
\end_inset 

 and 
\begin_inset Formula $-A$
\end_inset 

 result in the same transformation.
 Thus, it is common to introduce 
\begin_inset Formula $PGL(2,\mathbb{C})$
\end_inset 

, the 
\emph on 
projective linear group
\emph default 
.
 It is obtained by moding out by plus and minus the identity matrix 
\begin_inset Formula $I$
\end_inset 

: 
\begin_inset Formula \[
PGL(2,\mathbb{C})=GL(2,\mathbb{C})/\left\{ +I,-I\right\} \]

\end_inset 

 The cosets of 
\begin_inset Formula $PGL(2,\mathbb{C})$
\end_inset 

 are 
\begin_inset Formula $\left\{ +A,-A\right\} $
\end_inset 

 of matricies together with thier negative.
 The group 
\begin_inset Formula $PGL(2,\mathbb{C})$
\end_inset 

 finds a remarkable application in the theory of 3-manifolds, as it is able
 to represent the set of conformal (angle-preserving) maps of a three-dimensiona
l ball into three-dimensional space
\begin_inset LatexCommand \cite{Mas88,Matsu98}

\end_inset 

.
 
\layout Standard

The determinant is an overall scaling factor that can be scaled away, and
 so the 
\emph on 
special linear group
\emph default 
 
\begin_inset Formula $SL(2,\mathbb{C})$
\end_inset 

 consists of matricies with unit determinant.
 This again forms a group, since, for any two matricies 
\begin_inset Formula $A,B$
\end_inset 

, one has 
\begin_inset Formula $\det AB=\det A\,\det B$
\end_inset 

.
 The speical linear group is remarkable for two distinct reasons.
 First, in physics, specifically in special relativity, it describes the
 transformation properties of a spinor under relativistic changes of coordinates.
 The product of 
\begin_inset Formula $SL(2,\mathbb{C})$
\end_inset 

 and its complex conjugate forms the adjoint representation of 
\begin_inset Formula $SO(3,1)$
\end_inset 

, which is the Lorentz group, which describes the transformation of vectors
 in special relativity
\begin_inset LatexCommand \cite{Carm77}

\end_inset 

.
 
\layout Standard

It is often convenient to work with the group 
\begin_inset Formula $S^{*}L(2,\mathbb{C})$
\end_inset 

, which is defined as the group of 2x2 matrices whose determinant is +1
 
\emph on 
or
\emph default 
 -1.
 It was already noted above that the partial convergents of a continued
 fraction, when arranged into a 2x2 matrix, will have a determinant of +1
 or -1.
 Finally, 
\begin_inset Formula $PS^{*}L(2,\mathbb{C})$
\end_inset 

 is the projective version.
 Since the determinant of both plus and minus the identity is +1, the projective
 case does not mix the signs of the determinants.
 
\layout Standard

Restricting the matrix entries to real numbers, one obtains 
\begin_inset Formula $SL(2,\mathbb{R})$
\end_inset 

, the 
\emph on 
special linear group over the reals
\emph default 
.
 The projective linear group over the reals 
\begin_inset Formula $PSL(2,\mathbb{R})$
\end_inset 

 plays an important role in the theory of Riemann surfaces, as it is the
 group of all orientation-preserving isometries of the upper half-plane.
 
\layout Standard

The remainder of this article concerns itself with 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset 

, the group of invertible 2x2 matricies with integer coefficients, and its
 subgroups 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

 and 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset 

.
 Note that 
\begin_inset Formula $S^{*}L(2,\mathbb{Z})=GL(2,\mathbb{Z})$
\end_inset 

, since if a 2x2 matrix has integer entries and is invertible, it must necessari
ly have a determinant equal to +1 or -1.
 
\layout Subsection

The Modular Group
\layout Standard

The projective linear group of two by two matricies with integer coefficients
 is 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset 

.
 This group plays an over-arching role in number theory, and has many fascinatin
g properties
\begin_inset LatexCommand \cite{Ran77,Apo90}

\end_inset 

.
 Its most important property is that it is the group of isomorphisms of
 the planaer grid of parallelograms.
 Take, for example, the square grid of all points 
\begin_inset Formula $(m,n)$
\end_inset 

 for integers 
\begin_inset Formula $m,n$
\end_inset 

.
 This lattice is generated by two vectors 
\begin_inset Formula $e_{1}$
\end_inset 

 and 
\begin_inset Formula $e_{2}$
\end_inset 

 
\begin_inset Formula \[
e_{1}=\left[\begin{array}{c}
1\\
0\end{array}\right]\quad\mbox{ and }\quad e_{2}=\left[\begin{array}{c}
0\\
1\end{array}\right]\]

\end_inset 

 in that the linear combinations 
\begin_inset Formula $v=me_{1}+ne_{2}$
\end_inset 

 visit every lattice point.
 These two generators are not unique; so, for example, 
\begin_inset Formula $(1,-2)$
\end_inset 

 and 
\begin_inset Formula $(0,1)$
\end_inset 

 will also generate the lattice.
 The general case is given is described by any matrix 
\begin_inset Formula $A\in SL(2,\mathbb{Z})$
\end_inset 

, and so the two vectors 
\begin_inset Formula $Ae_{1}$
\end_inset 

 and 
\begin_inset Formula $Ae_{2}$
\end_inset 

 are also generators of the grid.
 Conversely, any pair of generators of the grid can be expressed as a matrix
 in 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

.
 
\layout Standard

The connection to fractions follows from the fact that the matrix entries
 are all relatively prime to one another.
 Writing the matrix as 
\begin_inset LatexCommand \ref{eq:matrix}

\end_inset 

, one has that the pair of integers 
\begin_inset Formula $(a,b)$
\end_inset 

 have no common factors, and so the fraction 
\begin_inset Formula $a/b$
\end_inset 

 is in lowest common terms, as are the fractions 
\begin_inset Formula $b/c$
\end_inset 

, 
\begin_inset Formula $c/d$
\end_inset 

 and 
\begin_inset Formula $d/a$
\end_inset 

.
 
\layout Standard

The connection to the Minkowski question mark becomes visible when one tries
 to eneumerate all of the possible elements of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset 

.
 There are several ways in which this is commonly done.
 One is to find that 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset 

 is isomorphic to the free group 
\begin_inset Formula $\mathbb{Z}_{2}*\mathbb{Z}_{3}$
\end_inset 

.
 That is, one defines two matricies 
\begin_inset Formula $V,P$
\end_inset 

 as 
\begin_inset Formula \[
V=\left[\begin{array}{cc}
0 & -1\\
1 & 0\end{array}\right]\quad\mbox{ and }\quad P=\left[\begin{array}{cc}
0 & -1\\
1 & 1\end{array}\right]\]

\end_inset 

 which have the property that 
\begin_inset Formula $V^{2}=P^{3}=-I$
\end_inset 

.
 It may then be shown that every element 
\begin_inset Formula $A\in SL(2,\mathbb{Z})$
\end_inset 

 may be written as 
\begin_inset Formula \begin{equation}
A=\left(-I\right)^{r}P^{p_{0}}VP^{p_{1}}VP^{p_{3}}V\cdots VP^{p_{n}}\label{eq:VP elt}\end{equation}

\end_inset 

 for some finite integer 
\begin_inset Formula $n$
\end_inset 

.
 Furthermore, it can be shown that this enumeration is unique
\begin_inset LatexCommand \cite{Ran77}

\end_inset 

, provided one sticks to the enumeration that 
\begin_inset Formula $r$
\end_inset 

 can be only zero or one, 
\begin_inset Formula $p_{0}$
\end_inset 

 and 
\begin_inset Formula $p_{n}$
\end_inset 

 can take the values 0,1,2 and the remaining 
\begin_inset Formula $p_{k}$
\end_inset 

 can only take the values 1,2.
 By 
\begin_inset Quotes eld
\end_inset 

ignoring
\begin_inset Quotes erd
\end_inset 

 the value of 
\begin_inset Formula $r$
\end_inset 

, one gets an element of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset 

.
 
\layout Standard

Another pair of generators 
\begin_inset Formula $L,R$
\end_inset 

 (for 
\begin_inset Quotes eld
\end_inset 

left
\begin_inset Quotes erd
\end_inset 

 and 
\begin_inset Quotes eld
\end_inset 

right
\begin_inset Quotes erd
\end_inset 

) may be obtained by defining 
\begin_inset Formula \[
L=V^{-1}P^{2}=-VP^{2}=\left[\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right]\quad\mbox{ and }\quad R=V^{-1}P=-VP=\left[\begin{array}{cc}
1 & 1\\
0 & 1\end{array}\right]\]

\end_inset 

 The next section will show that these correspond to left and right moves
 on the binary tree, from which they earn thier name.
 Using the definitions of 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 in the previous expression, it is clear that every element 
\begin_inset Formula $A$
\end_inset 

 can be written uniquely as 
\begin_inset Formula \begin{equation}
A=\left(-I\right)^{s}\left(R^{-1}L\right)^{p_{0}}L^{a_{1}-1}R^{a_{2}}L^{a_{3}}\cdots R^{a_{n}}\left(R^{-1}LR^{-1}\right)^{v_{0}}\label{eq:RL elt}\end{equation}

\end_inset 

 for finite 
\begin_inset Formula $n$
\end_inset 

.
 Again, 
\begin_inset Formula $s$
\end_inset 

 can be only zero or one.
 The value of 
\begin_inset Formula $p_{0}$
\end_inset 

 is exactly as before, since 
\begin_inset Formula $P=R^{-1}L$
\end_inset 

.
 There may or may not be a terminating 
\begin_inset Formula $V=R^{-1}LR^{-1}$
\end_inset 

, so that 
\begin_inset Formula $v_{0}$
\end_inset 

 is 0 or 1, depending on whether 
\begin_inset Formula $p_{n}$
\end_inset 

was zero or not.
 The remaining coefficients 
\begin_inset Formula $a_{k}$
\end_inset 

 are all positive integers, except for 
\begin_inset Formula $a_{n}$
\end_inset 

which may be zero, so as to describe the general case.
 Clearly, the integers 
\begin_inset Formula $a_{k}$
\end_inset 

 offer a run-length encoding of the number of times that 
\begin_inset Formula $p_{j}$
\end_inset 

 is one or two: 
\begin_inset Formula \[
\begin{array}{cccccc}
A=\left(-I\right)^{r+a_{1}+\cdots+a_{n}}P^{p_{0}} & \underbrace{VP^{2}VP^{2}\cdots VP^{2}} & \underbrace{VPVP\cdots VP} & \underbrace{VP^{2}VP^{2}\cdots VP^{2}} & \cdots & \underbrace{VPVP\cdots VP}\left(V\right)^{v_{0}}\\
 & a_{1}-1 & a_{2} & a_{3} &  & a_{n}\end{array}\]

\end_inset 

 Clearly, the elements of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

 can be enumerated either with a finite-length continued fraction, or by
 a dyadic rational.
 Since 
\begin_inset Formula $s$
\end_inset 

 and 
\begin_inset Formula $v_{0}$
\end_inset 

 can take one of two values, and 
\begin_inset Formula $p_{0}$
\end_inset 

 one of three, this effectively demonstrates how the elements of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

 can be enumerated by 
\begin_inset Formula $\mathbb{Z}_{2}\times\mathbb{Z}_{2}\times\mathbb{Z}_{3}\times\mathbb{Q}$
\end_inset 

.
 This is not the only possible enumeration; others will be given below.
\layout Standard

The 
\begin_inset Formula $L,R$
\end_inset 

 form of the group elements begs the question, what happens if some of the
 
\begin_inset Formula $a_{k}$
\end_inset 

 are negative? Although legitimate group elements result, the enumeration
 is no longer unique.
 In particular, 
\begin_inset Formula $L^{-1}=-PV$
\end_inset 

 and 
\begin_inset Formula $R^{-1}=-PV^{2}$
\end_inset 

 and so strings containing negative powers of 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 can be converted to strings containing only positive powers, after re-grouping
 terms.
 
\layout Standard

The identity 
\begin_inset Formula $P^{3}=V^{2}=-I$
\end_inset 

 with 
\begin_inset Formula $P=R^{-1}L$
\end_inset 

 and 
\begin_inset Formula $V=-L^{-1}RL^{-1}$
\end_inset 

 leads to the curious identity 
\begin_inset Formula $LR^{-1}L=R^{-1}LR^{-1}$
\end_inset 

.
 This is reminiscent of the identities defining the braid group.
 The braid group describes what happens when one inter-twines a set of strands,
 that is, when one braids them.
 The braid group in a certain sense generalizes the permutation group, in
 that, instead of just permuting objects, one tracks thier histories as
 well, by attaching strings to show where they came from.
 The general braid group 
\begin_inset Formula $B_{n}$
\end_inset 

 of 
\begin_inset Formula $n$
\end_inset 

 strands has 
\begin_inset Formula $n-1$
\end_inset 

 generators 
\begin_inset Formula $b_{k}$
\end_inset 

, which represent the right-handed exchange of a pair of neighboring strands.
 These obey the relations 
\begin_inset Formula $b_{k}b_{k+1}b_{k}=b_{k+1}b_{k}b_{k+1}$
\end_inset 

, which show that there are two equivalent ways to exchange a neighboring
 set of three strands in the braid.
 There are no additional relations between the 
\begin_inset Formula $b_{k}$
\end_inset 

.
 For the case of 
\begin_inset Formula $n=3$
\end_inset 

, the braid group 
\begin_inset Formula $B_{3}$
\end_inset 

 has two generators, 
\begin_inset Formula $b_{0}$
\end_inset 

 and 
\begin_inset Formula $b_{1}$
\end_inset 

.
 Identifying 
\begin_inset Formula $b_{0}=L$
\end_inset 

 and 
\begin_inset Formula $b_{1}=R^{-1}$
\end_inset 

, it is clear that the braid group 
\begin_inset Formula $B_{3}$
\end_inset 

 has a representation in terms of 2x2 matrices.
 As there are no further relations between 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

, then clearly, 
\begin_inset Formula $B_{3}$
\end_inset 

 is isomorphic to 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

[xxx need ref].
 
\layout Standard

Rather remarkably, the free group in two letters appears as a subgroup of
 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

! This can be most easily shown by re-interpreting the (free) monodromy
 group around two branch points as a subgroup of the braid group.
 It is well known that the set of homotopy loops that can be cast around
 two points forms the free group 
\begin_inset Formula $\mathbb{Z}*\mathbb{Z}$
\end_inset 

 in two letters.
 That is, letting 
\begin_inset Formula $X$
\end_inset 

 denote a loop that winds around one point, and 
\begin_inset Formula $Y$
\end_inset 

 a loop around the other point, a general element of the free group is 
\begin_inset Formula $X^{k}Y^{m}X^{n}Y^{p}\cdots$
\end_inset 

, where 
\begin_inset Formula $k,m,n$
\end_inset 

 and 
\begin_inset Formula $p$
\end_inset 

 are any, positive or negative, integers, with no further constraints on
 what values can appear.
 Fixing two strands of the braid group 
\begin_inset Formula $B_{3}$
\end_inset 

 so that they are rigid and not movable, the third strand can be made to
 wind around the first two, as long as its tip always returns to its starting
 position.
 Clearly, the third strand can wind around in every which way, thus forming
 the free group.
 In terms of the group generators, these moves correspond to 
\begin_inset Formula $X=b_{0}^{2}=L^{2}$
\end_inset 

 and 
\begin_inset Formula $Y=b_{1}^{2}=R^{-2}$
\end_inset 

.
 Because only the squares appear, the previouisly established identity 
\begin_inset Formula $LR^{-1}L=R^{-1}LR^{-1}$
\end_inset 

 cannot be applied to limit which combinations of 
\begin_inset Formula $X$
\end_inset 

 and 
\begin_inset Formula $Y$
\end_inset 

 are unique.
\layout Standard

Another commonly used pair of generators are 
\begin_inset Formula $S,T$
\end_inset 

 with 
\begin_inset Formula $S=V$
\end_inset 

 and 
\begin_inset Formula $T=R$
\end_inset 

.
 These are of interest primarily because the Möbius transformations 
\begin_inset Formula $S\tau=-1/\tau$
\end_inset 

 and 
\begin_inset Formula $T\tau=\tau+1$
\end_inset 

 give a particularly simple form to the invariance properties of modular
 forms
\begin_inset LatexCommand \cite{Apo90}

\end_inset 

.
 The general group element 
\begin_inset Formula $B\in SL(2,\mathbb{Z})$
\end_inset 

 may be written as 
\begin_inset Formula \begin{equation}
B=T^{m_{1}}ST^{m_{2}}ST^{m_{3}}S\cdots ST^{m_{n}}\label{eq:ST elts}\end{equation}

\end_inset 

 for some integers 
\begin_inset Formula $m_{k}$
\end_inset 

, which may be taken to be positive or negative.
 In this case, the representation is not unique, as again, negative powers
 may be converted to positive powers.
 Comparing to the left-right generators, one has 
\begin_inset Formula $L=-TST$
\end_inset 

 and so 
\layout Standard


\begin_inset Formula \[
L^{a_{1}-1}R^{a_{2}}L^{a_{3}}\cdots R^{a_{n}}=\left(-I\right)^{a_{1}+a_{3}+\cdots-1}T\left(ST^{2}\right)^{a_{1}-1}T^{a_{2}}\left(ST^{2}\right)^{a_{3}}\cdots T^{a_{n}-1}\]

\end_inset 

 The requirement for the enumeration 
\begin_inset LatexCommand \ref{eq:RL elt}

\end_inset 

 to be unique was that all of the 
\begin_inset Formula $a_{k}$
\end_inset 

 be positive integers.
 The equivalent requirement for uniqueness on the 
\begin_inset Formula $ST$
\end_inset 

 enumeration then requires that, in general 
\begin_inset Formula $m_{k}\ge2$
\end_inset 

.
 An intuitive way for understanding this is to note that 
\begin_inset Formula $P=ST$
\end_inset 

, and so there are string identities such as 
\begin_inset Formula $STSTST=-I$
\end_inset 

.
 
\layout Standard

XXX Also mention symplectic group.
 
\layout Section

Representations of the Dyadic Monoid
\layout Standard

The dyadic monoid, defined as the abstract set 
\begin_inset LatexCommand \ref{eq:dyadic monoid}

\end_inset 

 of self-similarities, has several possible representations, in terms of
 matricies, as well as other objects.
 These are discussed in greater detail here.
\layout Subsection

The Modular Representation
\layout Standard

The generators 
\begin_inset Formula $g,r$
\end_inset 

 of the self-similarities of the question mark, acting on the continued
 fractions, were given in equation 
\begin_inset LatexCommand \ref{eq:gr elts}

\end_inset 

 as
\layout Standard


\begin_inset Formula \[
g_{C}=\left[\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right]\quad\mbox{ and }\quad r_{C}=\left[\begin{array}{cc}
-1 & 1\\
0 & 1\end{array}\right]\]

\end_inset 

The subscript 
\begin_inset Formula $C$
\end_inset 

 is used to indicate that these are the transformations discussed in section
 
\begin_inset LatexCommand \ref{sub:Representations-of-Real}

\end_inset 

.
 These matrices do 
\emph on 
not
\emph default 
 belong to 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

, since the determinant of 
\begin_inset Formula $r_{C}$
\end_inset 

 is -1.
 They do belong to 
\begin_inset Formula $S^{*}L(2,\mathbb{Z})=GL(2,\mathbb{Z})$
\end_inset 

, the group of matrices with determinant +1 or -1.
 The group 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset 

 can be built from 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

 simply by adjoining a matrix 
\begin_inset Formula \[
N=\left[\begin{array}{cc}
1 & 0\\
0 & -1\end{array}\right]\]

\end_inset 

 which has the property that 
\begin_inset Formula $N^{2}=1$
\end_inset 

 and 
\begin_inset Formula $\det N=-1$
\end_inset 

.
 This matrix, when used as a commutator, has the remarkable property of
 inverting 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

, so that 
\begin_inset Formula $NRN=R^{-1}$
\end_inset 

 and 
\begin_inset Formula $NLN=L^{-1}$
\end_inset 

.
 Then, using 
\begin_inset Formula $g_{C}=L$
\end_inset 

 and 
\begin_inset Formula $r_{C}=-RN$
\end_inset 

, the general self-similarity transform 
\begin_inset LatexCommand \ref{eq:general gr monoid elt}

\end_inset 

 may be written as 
\begin_inset Formula \[
\gamma_{C}=g_{C}^{a_{1}}r_{C}g_{C}^{a_{2}}r_{C}\cdots r_{C}g_{C}^{a_{n}}=\begin{cases}
L^{a_{1}+1}R^{a_{2}}L^{a_{3}}\cdots R^{a_{n-1}}L^{a_{n}-1} & \;\mbox{ for }n\mbox{ odd}\\
F\, R^{a_{1}+1}L^{a_{2}}\cdots R^{a_{n-1}}L^{a_{n}-1} & \;\mbox{ for }n\mbox{ even}\end{cases}\]

\end_inset 

 That is, the general element is a sequence of left and right moves.
 Here, for 
\begin_inset Formula $n$
\end_inset 

 even, the letter 
\begin_inset Formula $F$
\end_inset 

 was introduced to stand for a 
\begin_inset Quotes eld
\end_inset 

flip
\begin_inset Quotes erd
\end_inset 

, 
\begin_inset Formula \[
F=VN=g_{C}^{-1}r_{C}g_{C}=\left[\begin{array}{cc}
0 & 1\\
1 & 0\end{array}\right]\]

\end_inset 

in that it converts 
\begin_inset Formula $L$
\end_inset 

's to 
\begin_inset Formula $R$
\end_inset 

's when it commutes: 
\begin_inset Formula $LF=FR$
\end_inset 

 and 
\begin_inset Formula $RF=FL$
\end_inset 

.
 As a Möbius transform, 
\begin_inset Formula $F:x=1/x$
\end_inset 

, while, for continued fractions, 
\begin_inset Formula $F:[a_{1},a_{2},\cdots]=[0,a_{1},a_{2},\cdots]$
\end_inset 

.
 
\layout Subsection

The Dyadic Representation as Affine Transformations
\layout Standard

The action of 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 on the dyadic numbers, given in eqn 
\begin_inset LatexCommand \ref{eq:dyadic g}

\end_inset 

, can also be expressed in terms of 2x2 matrices.
 However, quite unlike the modular representation, these matrices are not
 at all a subset of 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset 

.
 The action is that of a linear affine transformation.
 A general affine transformation is a map 
\begin_inset Formula \[
x\mapsto ax+b\]

\end_inset 

 Affine transformations can always be written as a matrix equation by taking
 
\begin_inset Formula $x$
\end_inset 

 to be a vector, and bumping up the dimension of the vector by one.
 Thus, for example, one writes 
\layout Standard


\begin_inset Formula \[
\left[\begin{array}{c}
1\\
x\end{array}\right]\mapsto\left[\begin{array}{cc}
1 & 0\\
b & a\end{array}\right]\left[\begin{array}{c}
1\\
x\end{array}\right]=\left[\begin{array}{c}
1\\
ax+b\end{array}\right]\]

\end_inset 

 The affine represention is then 
\begin_inset Formula \[
\left[\begin{array}{c}
1\\
\gamma_{D}(x)\end{array}\right]=\gamma_{D}\cdot\left[\begin{array}{c}
1\\
x\end{array}\right]=g_{D}^{a_{1}}r_{D}g_{D}^{a_{2}}r_{D}\cdots r_{D}g_{D}^{a_{N}}\cdot\left[\begin{array}{c}
1\\
x\end{array}\right]\]

\end_inset 

 where 
\begin_inset Formula \begin{equation}
g_{D}=\left[\begin{array}{cc}
1 & 0\\
0 & \frac{1}{2}\end{array}\right]\quad\mbox{ and }\quad r_{D}=\left[\begin{array}{cc}
1 & 0\\
1 & -1\end{array}\right]\label{eq:g_D matrix}\end{equation}

\end_inset 

 It is straighforward to verify that this gives the expression 
\begin_inset LatexCommand \ref{eq:dyadic gamma}

\end_inset 

 for the action of a general monoid element on 
\begin_inset Formula $x$
\end_inset 

.
 Although 
\begin_inset Formula $\gamma_{D}$
\end_inset 

 is thus representable as a two-by-two matrix, it is utterly different from
 
\begin_inset Formula $\gamma_{C}$
\end_inset 

.
 In particular, the determinant of 
\begin_inset Formula $\gamma_{D}$
\end_inset 

is not 1.
 The 
\begin_inset Formula $\gamma_{D}$
\end_inset 

 are lower-triangular, and thus generate a 
\begin_inset Quotes eld
\end_inset 

Borel monoid
\begin_inset Quotes erd
\end_inset 

 , in analogy to the name 
\begin_inset Quotes eld
\end_inset 

Borel group
\begin_inset Quotes erd
\end_inset 

 given to the group of upper-triangular matricies.
 
\layout Subsection

Higher Dimensional Affine Representations
\layout Standard

The dyadic representation can be generalized by using more general, 
\begin_inset Formula $N\times N$
\end_inset 

 matrices in place of 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

.
 The full generalization is known as a 
\emph on 
de Rham curve
\emph default 
, and is discussed in a later section, below.
 A particularly noteworthy example, however, is the three-dimensional representa
tion, as it clearly embeds the dyadic representation.
 It occurs naturally in the description of the self symmetries of the Takagi
 curve.
\layout Standard


\begin_inset Float figure
wide false
collapsed true

\layout Caption


\begin_inset LatexCommand \label{cap:The-Takagi-Curve}

\end_inset 

The Takagi Curve
\layout Standard


\begin_inset Graphics
	filename takagi.png
	width 100text%

\end_inset 


\layout Standard

The Takagi or Blancmange Curve.
\end_inset 


\layout Standard

The Takagi curve is shown in figure 
\begin_inset LatexCommand \ref{cap:The-Takagi-Curve}

\end_inset 

.
 It is named after Teiji Takagi, who described it in 1901, proving that
 it was differentiable nowhere
\begin_inset LatexCommand \cite{Tak1903,Man88}

\end_inset 

.
 The curve may be constructed as a superposition of triangle waves
\begin_inset Formula \[
t_{w}(x)=\sum_{n=0}^{\infty}w^{n}\tau^{n+1}(x)=\sum_{n=0}^{\infty}w^{n}\tau\left(2^{n}x\right)\]

\end_inset 

 where 
\begin_inset Formula $\tau(x)$
\end_inset 

 is the triangle wave 
\begin_inset Formula \[
\tau(x)=\begin{cases}
2x & \quad\mbox{ for }0\le x\le\frac{1}{2}\\
2(1-x) & \quad\mbox{ for }\frac{1}{2}\le x\le1\end{cases}\]

\end_inset 

 Here, 
\begin_inset Formula $\tau^{k}$
\end_inset 

 simply denotes the 
\begin_inset Formula $k$
\end_inset 

-times composition of 
\begin_inset Formula $\tau$
\end_inset 

 with itself: 
\begin_inset Formula $\tau^{k}=\tau\circ\tau\circ\cdots\circ\tau$
\end_inset 

.
 The variable 
\begin_inset Formula $w$
\end_inset 

 is simply a parameter describing the curve; it may be taken as a real or
 complex value, but must have a magnitude of less than one in order for
 the series to converge.
 The figure 
\begin_inset LatexCommand \ref{cap:The-Takagi-Curve}

\end_inset 

 shows the curve for a paramter of 
\begin_inset Formula $w=0.618$
\end_inset 

.
\layout Standard

Visually, the Takagi curve has a clear self-similarity.
 The action of 
\begin_inset Formula $g$
\end_inset 

 on 
\begin_inset Formula $t_{w}$
\end_inset 

, understood to cut the interval in half, is to produce a scaled, sheared
 copy of itself:
\begin_inset Formula \[
\left[gt_{w}\right](x)=t_{w}\left(\frac{x}{2}\right)=x+wt_{w}(x)\]

\end_inset 

 By contrast, its left-right symmetry just means that 
\begin_inset Formula $rt_{w}=t_{w}$
\end_inset 

.
 It is not hard to deduce that the action of a general element 
\begin_inset Formula $\gamma=g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}$
\end_inset 

 on 
\begin_inset Formula $t_{w}$
\end_inset 

 will be of the form 
\begin_inset Formula $a+bx+ct_{w}$
\end_inset 

 for some constants 
\begin_inset Formula $a,b,c$
\end_inset 

.
 This may be recognized immediately as a three-dimensional vector, and so
 the action of 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 can be given as operators acting on a three-dimensional space.
 Its also not hard to see that the action is linear, and so 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 are given by 3x3 matricies.
 Thier explicit form may be given by making the identification of 
\begin_inset Formula $1$
\end_inset 

, 
\begin_inset Formula $x$
\end_inset 

 and 
\begin_inset Formula $t_{w}$
\end_inset 

 as the basis vectors of the three dimensional space:
\begin_inset Formula \begin{eqnarray*}
1\;\longmapsto\; e_{1} & = & \left[\begin{array}{c}
1\\
0\\
0\end{array}\right]\\
x\;\longmapsto\; e_{2} & = & \left[\begin{array}{c}
0\\
1\\
0\end{array}\right]\\
t_{w}(x)\;\longmapsto\; e_{3} & = & \left[\begin{array}{c}
0\\
0\\
1\end{array}\right]\end{eqnarray*}

\end_inset 

 The transformation of each of these under 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 are given by
\begin_inset Formula \[
g_{3}=\left[\begin{array}{ccc}
1 & 0 & 0\\
0 & \frac{1}{2} & 0\\
0 & 1 & w\end{array}\right]\quad\mbox{ and }\quad r_{3}=\left[\begin{array}{ccc}
1 & 0 & 0\\
1 & -1 & 0\\
0 & 0 & 1\end{array}\right]\]

\end_inset 

Note that the upper-right 2x2 subparts of these matricies are just exactly
 
\begin_inset Formula $g_{D}$
\end_inset 

 and 
\begin_inset Formula $r_{D}$
\end_inset 

 given above, in equation 
\begin_inset LatexCommand \ref{eq:g_D matrix}

\end_inset 

, which describe the action on the subspace spanned by 
\begin_inset Formula $(e_{1},e_{2})=(1,x)$
\end_inset 

.
 
\layout Standard

A similar curve, transforming as a four-dimensional representation, may
 be constructed from sections of a parabola; a five-dimensional representation
 can be built from sections of a cubic, and so on; this is explored in greater
 detail in 
\begin_inset LatexCommand \cite{Ve-T04}

\end_inset 

.
 The development begs several questions: what happens when 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 are replaced by general matricies, and even more generally, what happens
 when 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 are replaced by general maps? This is explored in the next section.
\layout Subsection

The Interval Map Representation
\layout Standard

Every element of the dyadic monoid corresponds uniquely to a node in the
 infinite binary tree.
 There are several ways to see this.
 First, the letters 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 may be taken to be the left and right moves through the binary tree; thus,
 any finite string consisting of the letters 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 uniquely specify a node on the tree.
 Alternately, 
\begin_inset Formula $g$
\end_inset 

 may be taken as a left-ward move on the tree, while 
\begin_inset Formula $r$
\end_inset 

 may be taken as a left-right reflection of the entire tree.
 Again, a finite-length string consisting of the letters 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 then uniquely identifies a node in the binary tree.
 It doesn't matter which navigation system is used; either can be converted
 to the other.
 
\layout Standard

The subtree under a node on the tree represents an interval: the subtree
 encompasses everything from the left-most to the right-most sides of the
 subtree.
 Thus, the action of the dyadic monoid on the tree can be understood to
 be the action of a set of maps that map intervals to sub-intervals.
 Each interval is the range of a self-similarity map.
 To different interval maps were already given; these are 
\begin_inset LatexCommand \ref{eq:dyadic gamma}

\end_inset 

 and 
\begin_inset LatexCommand \ref{eq:modular gamma}

\end_inset 

.
 
\layout Standard

The endpoints of an interval are the sup and inf of all the values on the
 corresponding subtree.
 For the Stern-Brocot tree, the enpoints are always rational; for the dyadic
 tree, they are dyadics.
 That they are rational is most easily demonstrated by noting that the interval
 is the range of an interval map, so the endpoints are given by 
\begin_inset Formula $\gamma(0)$
\end_inset 

 and 
\begin_inset Formula $\gamma(1)$
\end_inset 

.
 For the modular map 
\begin_inset LatexCommand \ref{eq:modular gamma}

\end_inset 

, one endpoint is given by the rational number 
\begin_inset Formula $\gamma_{C}(0)=[a_{1}+1,a_{2},a_{3},...,a_{N-1}]$
\end_inset 

 (note the missing 
\begin_inset Formula $a_{N}$
\end_inset 

).
 The other endpoint is 
\begin_inset Formula $\gamma_{C}(1)=[a_{1}+1,a_{2},a_{3},...,a_{N}]$
\end_inset 

 when 
\begin_inset Formula $a_{N}\geq1$
\end_inset 

, although it must be written as 
\begin_inset Formula $\gamma_{C}(1)=[a_{1}+1,a_{2},a_{3},...,a_{N-2}]$
\end_inset 

 when 
\begin_inset Formula $a_{N}=0$
\end_inset 

; this last special case is really just a reversal of the two endpoints.
 By coonsidering interval endpoints, the question mark isomorphism 
\begin_inset LatexCommand \ref{eq:q-mark isomorph}

\end_inset 

 can be written in the shorter form
\begin_inset Formula \[
?(\gamma_{C}(x))=?(\gamma_{C}(0))+\frac{\left(-1\right)^{N+1}}{\left(2^{a_{1}+a_{2}+...+a_{N}}\right)}?(x)\]

\end_inset 


\layout Standard

The endpoints of an interval are not completely arbitrary, but are correlated.
 Although one endpoint can be picked freely, so, one can pick an arbitrary
 
\begin_inset Formula $\gamma_{C}(0)=p/q\in\mathbb{Q}$
\end_inset 

, the choice for the other enpoint is limited: the other end of the interval
 is given by 
\begin_inset Formula $a_{N}\in\mathbb{N}$
\end_inset 

 a positive integer.
 Since intervals correspond to elements of the dyadic monoid 
\begin_inset Formula $M$
\end_inset 

, elements of 
\begin_inset Formula $M$
\end_inset 

 may be enumerated by 
\begin_inset Formula $\mathbb{Q}\times\mathbb{N}$
\end_inset 

.
 This, of course, is hardly the only possible enumeration: of course, the
 intervals could have been enumerated by the node at the root of the tree;
 for the Stern-Brocot tree, this node is a unique rational number, and so
 the intervals could be equally well enumerated just by 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 alone.
 The difference between these two schemes is, of course, just Hilbert's
 infinite hotel.
\layout Standard

The idea of self-similar maps that map intervals to sub-intervals is appealing
 because of its simple intuitive connection to many common fractals.
 When looking at the Koch snowflake curve, for example, one feels that one
 can point anywhere to find a self-similar copy: this is the freedom of
 choosing one endpoint to belong to 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

.
 But to find the entire run of the self-similar part, one's choices are
 far more limited: only certain strict sub-intervals appear; this is the
 more limited choice of 
\begin_inset Formula $\mathbb{N}$
\end_inset 

 for the other endpoint.
 Thus, the 
\begin_inset Formula $\mathbb{Q}\times\mathbb{N}$
\end_inset 

 enumeration of intervals is in this sense one of the more intuitive ways
 of specifying elements of the dyadic monoid.
 
\layout Subsection

The Cantor Set
\layout Standard

The interval maps given by equations 
\begin_inset LatexCommand \ref{eq:dyadic gamma}

\end_inset 

 or 
\begin_inset LatexCommand \ref{eq:modular gamma}

\end_inset 

 can be generalized in several different ways.
 These maps had several properties:
\layout Enumerate

The maps 
\begin_inset Formula $L(x)$
\end_inset 

 and 
\begin_inset Formula $R(x)$
\end_inset 

 are maps from the unit interval to the unit interval.
\layout Enumerate

The maps 
\begin_inset Formula $L(x)$
\end_inset 

 and 
\begin_inset Formula $R(x)$
\end_inset 

 together are surjective onto the unit inverval.
 That is, the union of the range of 
\begin_inset Formula $L$
\end_inset 

 and the range of 
\begin_inset Formula $R$
\end_inset 

 together cover the whole interval.
 There are no gaps.
\layout Enumerate

The range of 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 intersect at exactly one point: 
\begin_inset Formula $L(1)=R(0)$
\end_inset 

.
 
\layout Enumerate

The maps 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 meet exactly in the middle; that is, 
\begin_inset Formula $L(1)=R(0)=1/2$
\end_inset 

.
\layout Standard

One possible generalization is to relax the first condition, to let 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 be endomorphisms of some general space 
\begin_inset Formula $X$
\end_inset 

.
 The result of this generalization is the de Rham curve
\begin_inset LatexCommand \cite{DeR57}

\end_inset 

, a continuous curve in the space 
\begin_inset Formula $X$
\end_inset 

.
 The construction of this curve is breifly reviewd in the next section.
\layout Standard

Another possiblity is to relax the second condition (and so also the third
 and fourth).
 The result of doing so is the Cantor set.
 So, for example, the standard construction of the Cantor set may be given
 as follows.
 Let 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 be the maps 
\begin_inset Formula \begin{eqnarray*}
L(x) & = & x/3\\
R(x) & = & (2+x)/3\end{eqnarray*}

\end_inset 

 so that 
\begin_inset Formula $L$
\end_inset 

 maps the closed unit interval 
\begin_inset Formula $[0,1]$
\end_inset 

 to the closed interval 
\begin_inset Formula $[0,1/3]$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 maps it to 
\begin_inset Formula $[2/3,1]$
\end_inset 

.
 Effectively, the open interval 
\begin_inset Formula $(1/3,2/3)$
\end_inset 

 in the middle has been excluded.
 But this is just the first step of the standard construction of the Cantor
 set: the removal of the middle third.
 This first step corresponds to the first level of the binary tree: there
 are two branches, and the middle has been excluded.
 Repeating this process, it should be clear that what remains, after an
 infinite number of steps, is the Cantor set.
 Furthermore, it should be clear that every remaining element of the Cantor
 set can be assigned a unique label, an infinite string of 
\begin_inset Formula $L$
\end_inset 

's and 
\begin_inset Formula $R$
\end_inset 

's applied in succession.
 The Cantor set can be visualized as the limit of the infinite binary tree:
 it is the set of 
\begin_inset Quotes eld
\end_inset 

leaves
\begin_inset Quotes erd
\end_inset 

 of the infinite binary tree.
 
\layout Standard

All of the properties of the Cantor set are evident in the construction.
 The Cantor set is totally disconnected, in that, given one string of letters
 
\begin_inset Formula $L$
\end_inset 

, 
\begin_inset Formula $R$
\end_inset 

 specifying one path on the binary tree, every other string will take one
 to another point that is a finite distance away.
 The Cantor set is also a compact Hausdorff space.
 This may be argued by noting that the unit interval is a compact Haussdorff
 space, that both 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 are continuous maps, and that the continuous map of a Hausdorff space is
 a Hausdorff space.
 A totally disconnected, compact Hausdorff space is an example of a Stone
 space, a them that will be returned to when reconsidering the dyadic monoid
 as a lattice.
\layout Standard

There are several notworthy corollaries of this excercise.
 First is that the dyadic representation of a real number is isomorphic
 to the Cantor set, in that if 
\begin_inset Formula $x=\sum_{n}b_{n}2^{-n}$
\end_inset 

, the binary digits 
\begin_inset Formula $b_{n}$
\end_inset 

 can be taken to be the moves 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 on the binary tree.
 Next, the maps 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 can be quite general.
 One need not remove the middle third; one can remove less.
 One can arragne to remove even geometrically less at each step, so that
 the resulting set is no longer a Cantor set of measure zero, but the so-called
 
\begin_inset Quotes eld
\end_inset 

fat Cantor set
\begin_inset Quotes erd
\end_inset 

, a Cantor set with finite measure.
 Noteably, there are Cantor sets with measure one.
 In particular, if one removes the dyadic rationals from the real number
 line, what is left is a Cantor set, but it is a Cantor set with measure
 one (since the dyadic rationals are a set of measure zero).
 If instead one considers the Stern-Brocot tree, it is then clear that the
 reals with all rationals removed is likewise the Cantor set.
 In essence, this is then a proof of something usually taken for granted:
 every irrational number 
\begin_inset Formula $x$
\end_inset 

 has a unique expansion 
\begin_inset Formula $x=\sum_{n}b_{n}2^{-n}$
\end_inset 

 in terms of binary digits 
\begin_inset Formula $b_{n}$
\end_inset 

.
 It is the disconnectedness of the Cantor set that makes such an expansion
 unique.
\layout Subsection

De Rham Curves
\layout Standard

The maps 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 may be taken to be endomorphisms of some general space 
\begin_inset Formula $X$
\end_inset 

.
 Then the repeated iteration of of these maps, as described above, will
 result in the binary tree being mapped to a 
\begin_inset Quotes eld
\end_inset 

dust
\begin_inset Quotes erd
\end_inset 

 of points, called the 
\begin_inset Quotes eld
\end_inset 

Cantor dust
\begin_inset Quotes erd
\end_inset 

.
 With the right maps, the points of this dust can be joined together into
 a continuous line.
 If 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 are contracting maps, then, by the Banach fixed-point theorem, they will
 have fixed points.
 Let 
\begin_inset Formula $p_{L}$
\end_inset 

 denote a fixed point of 
\begin_inset Formula $L$
\end_inset 

, so that 
\begin_inset Formula $L(p_{L})=p_{L}$
\end_inset 

, and likewise, let 
\begin_inset Formula $p_{R}$
\end_inset 

 denote a fixed point of 
\begin_inset Formula $R$
\end_inset 

.
 Then, if 
\begin_inset Formula $p_{L}$
\end_inset 

 is in the basin of attraction 
\begin_inset Formula $R$
\end_inset 

 and 
\begin_inset Formula $p_{R}$
\end_inset 

 is in the basin of attraction for 
\begin_inset Formula $L$
\end_inset 

, and furthermore, if the two maps are such that 
\begin_inset Formula $L(p_{R})=R(p_{L})$
\end_inset 

, then the Cantor set is mapped into a continuous one-dimensional curve.
 This curve may be called a de Rham curve, in honour of Georges de Rham
 who described them and proved thier continuity in 1957
\begin_inset LatexCommand \cite{DeR57}

\end_inset 

.
\layout Standard


\begin_inset Float figure
wide false
collapsed true

\layout Caption


\begin_inset LatexCommand \label{cap:A-Generic-de}

\end_inset 

A Generic de Rham curve
\layout Standard


\begin_inset Graphics
	filename deRham.png
	width 100text%

\end_inset 


\end_inset 

 
\layout Standard

A 
\begin_inset Quotes eld
\end_inset 

typical
\begin_inset Quotes erd
\end_inset 

 de Rham curve is shown in figure 
\begin_inset LatexCommand \ref{cap:A-Generic-de}

\end_inset 

.
 Its construction in terms of self-similar left and right pieces should
 be visually self-evident.
 It should also be clear that, with the right choice of parameters, a de
 Rham curve can be a space-filling curve.
 The set of all possible de Rham curves generated by two-dimensional linear
 affine transformations is five-dimensional (excluding degeneracies due
 to rotations, translations and rescaling), and is explored as a picture
 gallery in 
\begin_inset LatexCommand \cite{Ve-deRham}

\end_inset 

.
 Several famous fractal curves fall in this class, including the Koch snowflake
 curve, the Peano curve and the Lévy C curve.
\layout Section

The Dyadic Lattice
\layout Standard

The introduction of the dyadic monoid sidestepped some important questions:
 why can't the monoid be extended to be a full group? Is the monoid the
 most appropriate algebraic structure, or is there some other structure
 that more closely captures the structure of this thing? There is another,
 perhaps evan a more appropriate, structure with which the set of self-symetries
 can be understood.
 This is the lattice or Stone space
\begin_inset LatexCommand \cite{John82}

\end_inset 

 that is often used in general topology and is the focus of study in order
 theory.
\layout Subsection

Inadequacy of the Dyadic Monoid
\layout Standard

Calling the set of self-similarities a monoid is inadequate, and fails to
 capture the full structure of the thing.
 There are several ways to see this.
 Corresponding to move to sub-trees, there are inverse moves that take one
 back up the tree.
 If one moves the the left branch with 
\begin_inset Formula $L$
\end_inset 

, there is an inverse move 
\begin_inset Formula $L^{-1}$
\end_inset 

that takes one back to where one started.
 Similarly, there is an 
\begin_inset Formula $R^{-1}$
\end_inset 

 to undo a move 
\begin_inset Formula $R$
\end_inset 

 to the right branch.
 But 
\begin_inset Formula $L^{-1}$
\end_inset 

 and 
\begin_inset Formula $R^{-1}$
\end_inset 

are the same thing: there is only one way to move back on the tree, and
 it does not depend on where one came from.
 Call it 
\begin_inset Formula $B$
\end_inset 

, for 
\begin_inset Quotes eld
\end_inset 

back
\begin_inset Quotes erd
\end_inset 

, so that 
\begin_inset Formula $B=L^{-1}=R^{-1}$
\end_inset 

, with the non-move given by 
\begin_inset Formula $BL=LB=BR=RB=e$
\end_inset 

.
 A number of 
\begin_inset Formula $B$
\end_inset 

's can be concatenated together to indicate a number of upward moves.
 Thus, naively, one might want to extend the dyadic monoid by adjoining
 the letter 
\begin_inset Formula $B$
\end_inset 

.
 Several uncomfortable problems arise with such an idea.
 First, the adjunction of 
\begin_inset Formula $B$
\end_inset 

 does not magically turn the monoid into a group: there is no element 
\begin_inset Formula $B^{-1}$
\end_inset 

.
 Next, the presence of 
\begin_inset Formula $B$
\end_inset 

 in any string of letters 
\begin_inset Formula $R,L$
\end_inset 

 automatically 
\begin_inset Quotes eld
\end_inset 

erases
\begin_inset Quotes erd
\end_inset 

 those letters: thus, there are no strings that mix together 
\begin_inset Formula $L,R$
\end_inset 

 and 
\begin_inset Formula $B$
\end_inset 

.
 A third problem is that the operation of 
\begin_inset Formula $B$
\end_inset 

 is position-dependent.
 If one is at the the root of the tree, there is no way to back up any further.
 Thus, any given string 
\begin_inset Formula $B^{n}$
\end_inset 

 of 
\begin_inset Formula $n$
\end_inset 

 backwards moves may or may not be idempotent, depending on whether the
 starting point is at leas 
\begin_inset Formula $n$
\end_inset 

 levels deep in the tree, or not.
 One concludes that there is a legitimate need to be able to formally discuss
 a back-up move, but that simply adding 
\begin_inset Formula $B$
\end_inset 

 to the monoid is insufficient.
\layout Standard

There might be a temptation to try a different tack: to define a formal
 inverse.
 Every free monoid has a universal cover that is a group; the covering group
 is obtained by formally adjoining inverse elements to the monoid.
 The construction is straightforward, and is known as a 
\begin_inset Quotes eld
\end_inset 

universal property
\begin_inset Quotes erd
\end_inset 

, as it can be applied to the category of free monoids.
 In more concrete terms, this just simply means that one adds two elements
 
\begin_inset Formula $R^{-1}$
\end_inset 

 and 
\begin_inset Formula $L^{-1}$
\end_inset 

 which are, by definition, inverses:
\begin_inset Formula $L^{-1}L=LL^{-1}=R^{-1}R=RR^{-1}=e$
\end_inset 

.
 However, in this universal extension, no further conditions are imposed;
 in particular, 
\begin_inset Formula $L^{-1}$
\end_inset 

 does not commute with 
\begin_inset Formula $R$
\end_inset 

, and similarly 
\begin_inset Formula $R^{-1}$
\end_inset 

 does not commute with 
\begin_inset Formula $L$
\end_inset 

.
 Thus, this formal extension does not match up with the idea of backwards
 moves on the binary tree.
 
\layout Standard

If one considers the interval map representation, the formal extension also
 results in undefined moves.
 Consider, for example, 
\begin_inset Formula $L(x)$
\end_inset 

 to be the function 
\begin_inset Formula $L(x)=x/2$
\end_inset 

 that maps the whole unit interval to its left sub-half.
 Then 
\begin_inset Formula $L^{-1}(x)$
\end_inset 

 is an inverse, whose domain is the half-interval [0,1/2].
 Similarly, let 
\begin_inset Formula $R(x)=(x+1)/2$
\end_inset 

 map the whole interval to the right half.
 What then should one make of 
\begin_inset Formula $(L^{-1}\circ R)(x)$
\end_inset 

? The range of 
\begin_inset Formula $R$
\end_inset 

 simply does not intersect the domain of 
\begin_inset Formula $L^{-1}$
\end_inset 

; so 
\begin_inset Formula $L^{-1}\circ R$
\end_inset 

 is undefined.
 The universal extension of the free monoid to a free group simply does
 not act on the binary tree in a meaningful way.
 One might try to rescue the situation by defining 
\begin_inset Formula $L^{-1}(x)=2x\mbox{ mod}1$
\end_inset 

, so that 
\begin_inset Formula $L^{-1}(x)$
\end_inset 

 is well-defined on the entire unit interval.
 But then, 
\begin_inset Formula $L^{-1}(x)=R^{-1}(x)=B(x)$
\end_inset 

, and one is back to having a 
\begin_inset Quotes eld
\end_inset 

group element
\begin_inset Quotes erd
\end_inset 

 that commutes, which is not what the universal extension did.
 
\layout Subsection

Lattice
\layout Standard

Write me.
\layout Standard

there are two inequivalent ways to turn the binary tree into a lattice,
 one way is is not a distributive lattice, the other is.
 The natural one is not distributive.
\layout Standard

dyadic lattice has no complements, thus not distributive.
 Its not even modular.
\layout Standard

Every element is an ideal, and in fact a principal ideal; this is trivial,
 since every element is represented by a single root of a tree.
 
\layout Standard

its meet-irreducible, therefore meet-prime.
 It has no join-primes
\layout Standard

i.e.
 every element is a prime ideal.
\layout Standard

Every ideal is the kernel of a semi-lattice homomorphism.
 The cosets of teh resulting equivalence relation are the trees that are
 the direct parents of the ideal in question.
 Thus the quotient is always finite, and is always totally ordered.
\layout Section

xxxxxx
\layout Standard

Everything below is misleadingly or confusingly stated and possibly wrong.
 Everything below this point needs to be corrected and re-written from scratch.
\layout Subsection

xxxxxx
\layout Standard

in the above, in order to work with a consistent definition of the continued
 fraction, we are more-or-less force to limit ourselves to considering only
 those group elements with positive 
\begin_inset Formula $j,k,m,...$
\end_inset 

 By contrast, the true general group element can have positive or negative
 values for these exponents.
 
\layout Subsection

More about representations of real numbers
\layout Standard

For one, the set 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 is larger than the set 
\begin_inset Formula $\mathbb{R}$
\end_inset 

: the set 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 contains the elements 0.11111...
 and 1.0000...
 which are clearly distinct in 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 but represent the same number in 
\begin_inset Formula $\mathbb{R}$
\end_inset 

.
 We have something similar happening in 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

 in that a rational has the multiple representations 
\begin_inset Formula $[a_{0};a_{1},a_{2},...,a_{n},\infty,a_{n+2},a_{n+3},...]$
\end_inset 

 where it does not matter what we pick for 
\begin_inset Formula $a_{n+2}$
\end_inset 

, etc.
 Thus, both 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

 and 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 are coverings of 
\begin_inset Formula $\mathbb{R}$
\end_inset 

.
 So, for example, there exists a homomorphism, a projection, 
\begin_inset Formula $\pi:\mathbb{R}_{D}\rightarrow\mathbb{R}$
\end_inset 

 such that 
\begin_inset Formula $\pi(0.1111...)=\pi(1.000...)$
\end_inset 

, thus implying that 
\begin_inset Formula $\mbox{Ker}\;\pi$
\end_inset 

 is non-trivial.
 The real numbers are then defined as a quotient space of 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 by the equivalence relation induced by 
\begin_inset Formula $\pi$
\end_inset 

.
 
\layout Standard

Show 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset 

 as being isomorphic to 
\begin_inset Formula $\mathbb{Z}_{2}\times\mathbb{Z}_{2}\times\cdots=\mathbb{Z}_{2}^{\omega}$
\end_inset 

but some care to be taken.
 Multiple possible topologies on 
\begin_inset Formula $\mathbb{Z}_{2}^{\omega}$
\end_inset 

, including the product topology (which is what is wanted) and the box topology,
 (which is finer than the reals).
 Is there a need to discuss functions of a continuous variable, and so the
 dual spaces, the weak topology, etc? 
\layout Standard

Show that 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset 

 is isomorphic to 
\begin_inset Formula $\mathbb{Z}\times\mathbb{Z}\times\cdots=\mathbb{Z}^{\omega}$
\end_inset 

 and etc.
\layout Subsection

The Dyadic Lattice 
\layout Standard

lets try to build a superset of the set 
\begin_inset Formula $M$
\end_inset 

, encompassing more elements of the modular group.
 We begin by recalling that every 
\begin_inset Formula $\gamma\in M$
\end_inset 

 defines an open interval 
\begin_inset Formula $\upsilon_{\gamma}$
\end_inset 

 whose endpoints are given by 
\begin_inset Formula $\gamma_{C}(0)$
\end_inset 

 and 
\begin_inset Formula $\gamma_{C}(1)$
\end_inset 

.
 For the purposes of the following discussion, it does not matter if we
 speak of the intervals generated by 
\begin_inset Formula $\gamma_{C}(x)$
\end_inset 

 or 
\begin_inset Formula $\gamma_{D}(x)$
\end_inset 

; both will provide an equivalent topology, the equivalence being given
 by the Question Mark.
 Thus, for now, we drop the subscript.
 The length of this interval is strictly less than one: 
\begin_inset Formula $|\upsilon_{\gamma}|=|\gamma(0)-\gamma(1)|<1$
\end_inset 

 (except, of course, for the identity element for which the interval is
 the unit interval).
 The set 
\begin_inset Formula $M$
\end_inset 

 consisted precisely of shrinking maps of the unit interval into itself.
\layout Standard

Next, we recall that the set 
\begin_inset Formula $M$
\end_inset 

 consisted of maps of the entire binary tree onto a subtree of itself.
 Subtrees of trees are totally ordered.
 Here, by '
\emph on 
totally ordered
\emph default 
', we mean the usual, standard definition as that applied to lattices in
 topology: that there exists a relation 
\begin_inset Formula $\subset$
\end_inset 

 such that given two trees, either one tree is a subtree of the other, or
 they share no common nodes whatsoever.
 Given the monotonically increasing labels on the Farey tree and the dyadic
 tree, we have equivalently a total order of intervals.
 That is, we have a simple theorem about interval intersection: given any
 two 
\begin_inset Formula $\gamma_{1},\gamma_{2}\in M$
\end_inset 

, then one of the following three statements holds: 
\begin_inset Formula $\upsilon_{1}\cap\upsilon_{2}=\upsilon_{1}$
\end_inset 

 or 
\begin_inset Formula $\upsilon_{1}\cap\upsilon_{2}=\upsilon_{2}$
\end_inset 

 or 
\begin_inset Formula $\upsilon_{1}\cap\upsilon_{2}=\emptyset$
\end_inset 

.
 This total ordering of intervals follows from considering the tree representati
on: given two subtrees, one is either a subtree of the other, or they are
 non-intersecting.
 
\layout Standard

Note that 
\begin_inset Formula $\forall\gamma\in M$
\end_inset 

, the function 
\begin_inset Formula $\gamma^{-1}(x)$
\end_inset 

 is well-defined on the domain 
\begin_inset Formula $x\in\upsilon$
\end_inset 

 and has a range (co-domain) over the entire unit interval.
 This implies that 
\begin_inset Formula $\forall\gamma_{1},\gamma_{2}\in M$
\end_inset 

 we have that 
\begin_inset Formula $(\gamma_{1}\circ\gamma_{2}^{-1})(x)$
\end_inset 

 is well-defined on the domain 
\begin_inset Formula $x\in\upsilon_{2}$
\end_inset 

 and has a range (co-domain) over 
\begin_inset Formula $\upsilon_{1}$
\end_inset 

.
 Thus, isomorphisms on 
\begin_inset Formula $M$
\end_inset 

 extend naturally to all elements of the form 
\begin_inset Formula $\gamma_{1}\gamma_{2}^{-1}$
\end_inset 

as long as we restrict the mapping to the domain 
\begin_inset Formula $\upsilon_{2}$
\end_inset 

.
 That is, elements of the form 
\begin_inset Formula $\gamma_{1}\gamma_{2}^{-1}$
\end_inset 

 are also self-similarities of the Question mark, although they were not
 enumerated in 
\begin_inset Formula $M$
\end_inset 

.
 (It is hopefully obvious that 
\begin_inset Formula $\gamma_{1}\gamma_{2}^{-1}\notin M$
\end_inset 

: first, the domain of all elements in 
\begin_inset Formula $M$
\end_inset 

 is the whole unit interval, whereas the domain for 
\begin_inset Formula $\gamma_{1}\gamma_{2}^{-1}$
\end_inset 

 is not; alternately, the exponents 
\begin_inset Formula $a_{k}$
\end_inset 

 of the representation of 
\begin_inset Formula $\gamma_{2}^{-1}$
\end_inset 

 as 
\begin_inset Formula $...rg^{a_{k}}r...$
\end_inset 

 are negative, whereas they were by definition positive in 
\begin_inset Formula $M$
\end_inset 

).
\layout Standard

We now propose a theorem: the only interval maps that provide a set-theoretic
 representation are those maps of the form 
\begin_inset Formula $\gamma=\alpha\beta^{-1}$
\end_inset 

 with 
\begin_inset Formula $\alpha,\beta\in M$
\end_inset 

.
 There are no other maps.
 The set 
\begin_inset Formula $\widetilde{M}=\{\gamma=\alpha\beta^{-1}:\alpha,\beta\in M\}$
\end_inset 

.
 Note that following the previous enumerations, we can enumerate 
\begin_inset Formula $\widetilde{M}$
\end_inset 

 as 
\begin_inset Formula $(\mathbb{Q}\times\mathbb{N}\times C_{2})\times(\mathbb{Q}\times\mathbb{N}\times C_{2})$
\end_inset 

.
 The remainder of this subsection is a proof of this result.
\layout Standard

We begin by exploring the reverse ordering.
 That is, given 
\begin_inset Formula $\gamma_{2},\gamma_{3}\in M$
\end_inset 

, we want to construct the element 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}\in GL(2,\mathbb{Z})$
\end_inset 

, and ask if, or how, it might be a self-similarity.
 If 
\begin_inset Formula $\upsilon_{2}\supset\upsilon_{3}$
\end_inset 

, then 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset 

 has a domain of the entire unit interval, although its range is less than
 the whole interval.
 In fact, one can show that 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}\in M$
\end_inset 

.
 The simplest proof for this can be realized by appealing to the tree structure.
 The statement that 
\begin_inset Formula $\upsilon_{2}\supset\upsilon_{3}$
\end_inset 

 implies that 
\begin_inset Formula $\upsilon_{3}$
\end_inset 

 is represented by a sub-tree of 
\begin_inset Formula $\upsilon_{2}$
\end_inset 

.
 But the only way of getting from one node to a subnode is by navigating
 left and right branches till one reaches the desired subtree.
 But the left and right descent operators are 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $rgr$
\end_inset 

, and so any descent path in the tree is given by some element 
\begin_inset Formula $\delta\in M$
\end_inset 

.
 Thus we have 
\begin_inset Formula $\gamma_{3}=\gamma_{2}\delta$
\end_inset 

 or 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}=\delta\in M$
\end_inset 

 which completes the demonstration.
\layout Standard

Consider the case 
\begin_inset Formula $\upsilon_{3}\supset\upsilon_{2}$
\end_inset 

.
 The map 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset 

 has a domain that is less than the entire unit interval, although the range
 is clearly the whole unit interval.
 It is not hard to prove that 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})^{-1}\in M$
\end_inset 

, and we do this by applying the proof in the last paragraph.
 The interval inclusion order implies that 
\begin_inset Formula $\gamma_{3}^{-1}\gamma_{2}\in M$
\end_inset 

, and then we note simply that 
\begin_inset Formula $\gamma_{3}^{-1}\gamma_{2}=(\gamma_{2}^{-1}\gamma_{3})^{-1}$
\end_inset 

, completing the demonstration.
 So again, the map induced by 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}$
\end_inset 

 doesn't provide 
\begin_inset Quotes eld
\end_inset 

anything new
\begin_inset Quotes erd
\end_inset 

.
\layout Standard

Finally, consider the case 
\begin_inset Formula $\upsilon_{2}\cap\upsilon_{3}=\emptyset$
\end_inset 

.
 In this case, the map 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset 

 is an invalid form: the co-domain of 
\begin_inset Formula $\gamma_{3}(x)$
\end_inset 

 does not intersect the domain of 
\begin_inset Formula $\gamma_{2}^{-1}(x)$
\end_inset 

.
 Thus the map 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset 

 cannot generate a self-similarity of the Question Mark.
 However, we do have the case that 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}\notin M$
\end_inset 

 and 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})^{-1}\notin M$
\end_inset 

, and so 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}$
\end_inset 

 does provide 
\begin_inset Quotes eld
\end_inset 

something new
\begin_inset Quotes erd
\end_inset 

.
\layout Standard

The net result of these considerations is that one does not gain anything
 new in considering a chain of elements of the form 
\begin_inset Formula $\gamma=\gamma_{1}\gamma_{2}^{-1}\gamma_{3}\gamma_{4}^{-1}...$
\end_inset 

 with each 
\begin_inset Formula $\gamma_{k}\in M$
\end_inset 

.
 A necessary condition that 
\begin_inset Formula $\gamma(x)$
\end_inset 

 has a domain and a co-domain that is not the empty set is that 
\begin_inset Formula $\upsilon_{2j}\cap\upsilon_{2j+1}\ne\emptyset$
\end_inset 

.
 But as soon as this condition is imposed, we find that each adjacent pair
 
\begin_inset Formula $\gamma_{2j}^{-1}\gamma_{2j+1}$
\end_inset 

 can be contracted with its neighbor on the left or right.
 Repeating this exercise, we find eventually that 
\begin_inset Formula $\gamma(x)$
\end_inset 

 has a domain and a co-domain that is the empty set, or that 
\begin_inset Formula $\gamma$
\end_inset 

 can be expressed as 
\begin_inset Formula $\gamma=\alpha\beta^{-1}$
\end_inset 

 with 
\begin_inset Formula $\alpha,\beta\in M$
\end_inset 

.
 This concludes the proof: we have shown that the only interval maps in
 this interval map representation are those maps that belong to 
\begin_inset Formula $\widetilde{M}$
\end_inset 

.
\layout Subsection

Binary Tree Rotations
\layout Standard

The semi-group 
\begin_inset Formula $M$
\end_inset 

 contains many, but not all, of the self-similarities of the Question Mark.
 
\layout Standard

Most of this chapter has focused on a interval representation; however,
 one should note that the interval representation is not the only possible
 representation of fractal self-similarities.
 An alternate representation can be obtained in terms of the hyperbolic
 rotations of binary trees.
 These hyperbolic maps are injective and surjective: that is, they are valid
 on the entire unit interval.
 They will be developed in detail in a later chapter.
\layout Subsection

The Modular Group, In General
\layout Standard

The close focus on the interval representation 
\begin_inset Formula $\widetilde{M}$
\end_inset 

 in the above begs the questions 
\begin_inset Quotes eld
\end_inset 

What about the other elements of the modular group? Where do they fit in?
\begin_inset Quotes erd
\end_inset 

 These questions in fact have a simple answer: the modular group is the
 symmetry group of a two dimensional lattice.
 Let 
\begin_inset Formula $\vec{v}_{1},\vec{v}_{2}\in\mathbb{R}^{2}$
\end_inset 

 be two non-colinear vectors in the plane.
 Then the latice 
\begin_inset Formula $\Lambda(\vec{v}_{1},\vec{v}_{2})=\{ p\vec{v}_{1}+q\vec{v}_{2}\;:\; p,q\in\mathbb{Z}\}$
\end_inset 

 generated by 
\begin_inset Formula $\vec{v}_{1},\vec{v}_{2}$
\end_inset 

 can be envisioned as a simple collection of parallelograms tiling the plane.
 The generators 
\begin_inset Formula $\vec{v}_{1},\vec{v}_{2}$
\end_inset 

 are not unique; in fact any other pair 
\begin_inset Formula $\vec{w}_{1}=a\vec{v}_{1}+b\vec{v}_{2}$
\end_inset 

 and 
\begin_inset Formula $\vec{w}_{2}=c\vec{v}_{1}+d\vec{v}_{2}$
\end_inset 

 will generate exactly the same lattice, if and only if 
\begin_inset Formula $a,b,c,d\in\mathbb{Z}$
\end_inset 

 and 
\begin_inset Formula $ad-bc=1$
\end_inset 

.
 That is, 
\begin_inset Formula $\Lambda(\vec{v}_{1},\vec{v}_{2})=\Lambda(\vec{w}_{1},\vec{w}_{2})$
\end_inset 

 iff 
\begin_inset Formula \begin{equation}
\left(\begin{array}{c}
\vec{w}_{1}\\
\vec{w}_{2}\end{array}\right)=\left(\begin{array}{cc}
a & b\\
c & d\end{array}\right)\left(\begin{array}{c}
\vec{v}_{1}\\
\vec{v}_{2}\end{array}\right)\label{eq:}\end{equation}

\end_inset 

 where 
\begin_inset Formula $\left(\begin{array}{cc}
a & b\\
c & d\end{array}\right)\in SL(2,\mathbb{Z})$
\end_inset 

.
 If we take 
\begin_inset Formula $\vec{v}_{1}=\vec{e}_{1}$
\end_inset 

 and 
\begin_inset Formula $\vec{v}_{2}=\vec{e}_{2}$
\end_inset 

 so that we have a square grid, then we can visualize the rationals as consistin
g of the points 
\begin_inset Formula $p/q$
\end_inset 

 in the upper-right quadrant of the grid, and specifically, those points
 visible from the origin, i.e.
 those points for which 
\begin_inset Formula $p/q$
\end_inset 

 is irreducible.
 The rationals confined to the unit interval correspond to those grid points
 lying above the horizontal axis, but below the 
\begin_inset Formula $45^{\circ}$
\end_inset 

line extending to the upper right.
 Subintervals of the unit interval can now be understood to correspond tho
 those 
\begin_inset Formula $(\vec{w}_{1},\vec{w}_{2})$
\end_inset 

 where both vectors are contained in this octant.
 The semigroup 
\begin_inset Formula $M\subset SL(2,\mathbb{Z})$
\end_inset 

 of interval maps can now be understood as precisely those elements that
 stay within this octant.
 The 
\begin_inset Quotes eld
\end_inset 

other
\begin_inset Quotes erd
\end_inset 

 elements of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset 

 that are not in 
\begin_inset Formula $M$
\end_inset 

 are those that take intervals out of the octant.
 In particular, some elements of the modular group will take 
\begin_inset Formula $(\vec{w}_{1},\vec{w}_{2})$
\end_inset 

 so that one lies in the left half-plane, the other in the right half-plane.
 Since the vertical line 
\begin_inset Formula $p/q=1/0$
\end_inset 

 corresponds to infinity, we see that such maps correspond to Mobius maps
 with a pole.
 
\layout Standard

To summarize, the previous development of the interval representation seems
 to lend an air of mystery to the missing elements, those elements that
 are not in 
\begin_inset Formula $M$
\end_inset 

.
 The mystery is dispelled in this wider picture, which accounts for all
 of the elements of the modular group.
 Armed with this knowledge, we could seek to extended the definition of
 the Question Mark function to the entire real number line, as corresponding
 to the map between the full Stern-Brocot tree (which contains all of the
 rationals) and the full dyadic tree, rather than just those pieces that
 correspond to the unit interval.
 The full Stern-Brocot tree is shown in figure xxx (need figure here).
 However, there are several 
\begin_inset Quotes eld
\end_inset 

natural
\begin_inset Quotes erd
\end_inset 

 extensions of the dyadic tree to numbers larger than one, and so the appropriat
e extension of the Question Mark function is somewhat ambiguous.
 
\layout Standard

One 
\begin_inset Quotes eld
\end_inset 

natural
\begin_inset Quotes erd
\end_inset 

 way to generate the dyadic tree is through the Takagi function recurrence
 relation 
\layout Standard


\begin_inset Formula \begin{equation}
t_{w}\left(\frac{p}{2^{n}}\right)=w^{n-1}+\frac{1}{2}\left[t_{w}\left(\frac{p-1}{2^{n}}\right)+t_{w}\left(\frac{p+1}{2^{n}}\right)\right]\label{eq:}\end{equation}

\end_inset 

 Besides generating the Blancmange curve, which we will explore in a later
 chapter, it also generates other interesting sequences if we pick a different
 set of starting conditions.
 For example, taking 
\begin_inset Formula $w=0$
\end_inset 

, and writing 
\begin_inset Formula $t_{0}\equiv d$
\end_inset 

, using the initial conditions 
\begin_inset Formula $d(0)=0$
\end_inset 

 and 
\begin_inset Formula $d(1)=1$
\end_inset 

, we generate the tree of dyadic numbers between 0 and 1; that is, we can
 promptly deduce that 
\begin_inset Formula $d(x)=x$
\end_inset 

 for all 
\begin_inset Formula $x=p/2^{n}$
\end_inset 

.
 If instead, we write 
\begin_inset Formula $t_{0}\equiv J$
\end_inset 

 with the boundary conditions 
\begin_inset Formula $J(1)=1$
\end_inset 

 and 
\begin_inset Formula $J(1/2^{n})=2^{n}$
\end_inset 

, then we find that 
\begin_inset Formula $J$
\end_inset 

 generates the tree of dyadic numbers greater than one.
 This is shown in graph xxxx (todo Show the greater-than-one map explicitly.)
 Show also the extended Minkowski function for this dyadic sequence.
 
\layout Standard

Another approach to the 
\begin_inset Quotes eld
\end_inset 

problem
\begin_inset Quotes erd
\end_inset 

 of the modular group being 
\begin_inset Quotes eld
\end_inset 

bigger
\begin_inset Quotes erd
\end_inset 

 than what is naively needed for fractal symmetry is to shrink its size.
 That is, one could try to construct a quotient group, mapping the eight
 octants into one.
 The benefit would seem to be that such a quotient construction would elevate
 the semigroup 
\begin_inset Formula $M$
\end_inset 

 to the status of a real group, containing inverses.
 However, it is not clear that any additonal insight into fractal self-similarit
y is gained by doing so.
\layout Section

Notes.
 
\layout Standard

There is also a well-known representation of the Stern-Brocot Tree on the
 lattice 
\begin_inset Formula $\mathbb{Z\mathbb{\times Z}}$
\end_inset 

, where a fraction 
\begin_inset Formula $p/q$
\end_inset 

 is denoted as the ordered pair 
\begin_inset Formula $(p,q)$
\end_inset 

.
 In this representation, the left-right navigation operators 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 have the values 
\begin_inset Formula $L=\left(\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right)$
\end_inset 

 and 
\begin_inset Formula $R=\left(\begin{array}{cc}
1 & 1\\
0 & 1\end{array}\right)$
\end_inset 

 and thus positions are given as elements of 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

.
 Maybe we'll elaborate on this later xxxx.
 To do...
 elaborate.
\layout Standard

To summarize, it is this expansion in binary digits that provides the underlying
 connection between period-doubling maps, such as the Mandelbrot Set, and
 Farey Numbers.
 Binary expansions, or code-words, occur naturally in the analysis of Duoady-Hub
bard landing rays.
 We'll demonstrate an explicit mapping in a later section.
 XXX cut/reword this last paragraph.
\layout Subsection

Some Curious Properties of the Question Mark 
\layout Standard

If there is a 3-adic or p-adic generalization of the Minkowski Question
 Mark, it is not obvious; one 'obvious' generalization is 
\layout Standard


\begin_inset Formula \begin{equation}
\sum_{k=1}\left(-1\right)^{k}\;3^{-(a_{1}+a_{2}+...+a_{k})}\label{eq:}\end{equation}

\end_inset 

but its highly discontinuous.
 Other generalizations based on roots of unity in the complex plane also
 don't seem to work.
 One might be able to get traction by looking at groups that have 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

 as a subgroup but also have some 
\begin_inset Formula $p$
\end_inset 

-fold symmetry.
\layout Section

Conclusions
\layout Standard

To conclude, we've demonstrated two different binary trees commonly used
 in the representation of the real numbers, and have shown that the Minkowski
 Question Mark function is the mapping between these two trees.
 We've then reviewed the the modular group in terms of its action on trees,
 and showed that the self-similarity of the trees induces a fractal self-similar
ity on tree homomorphisms; in this case the homomorphism being the Question
 Mark function.
 We will explore the generalization of these ideas in the next chapter.
\layout Standard

The wide-spread occurrence of the rationals fairly screams for an adelic
 (or 
\begin_inset Formula $p$
\end_inset 

-adic) treatment of the subject matter.
 That is, in the above, we made no appeals to the closure of the rationals
 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 by 
\begin_inset Formula $\mathbb{R}$
\end_inset 

 or by 
\begin_inset Formula $\mathbb{Q}_{p}$
\end_inset 

; on the other hand, the interval representation makes numerous appeals
 to a total ordering.
 It would be interesting to see if and how any of the above conclusions
 are modified for the 
\begin_inset Formula $p$
\end_inset 

-adic numbers.
 
\layout Standard

Note that the modular group is isomorphic to the symplectic group, that
 is, 
\begin_inset Formula $SL(2,\mathbb{Z})=Sp(2,\mathbb{Z})$
\end_inset 

.
 Insofar as the symplectic group is implicated in Hamiltonian dynamics,
 it is natural to wonder whether the above proceedings can shed light onto
 chaotic dynamics or lead to new integrable systems.
 Unfortunately, the subset 
\begin_inset Formula $\widetilde{M}$
\end_inset 

 of interval maps seems to exclude the symplectic case: the matrix 
\begin_inset Formula $J=\left(\begin{array}{cc}
0 & 1\\
-1 & 0\end{array}\right)$
\end_inset 

 does not belong to 
\begin_inset Formula $\widetilde{M}$
\end_inset 

, and although one does have 
\begin_inset Formula $\gamma_{C}^{T}J\gamma_{C}=\pm J$
\end_inset 

 for the Farey representation 
\begin_inset Formula $\gamma_{C}\in\widetilde{M}$
\end_inset 

, one does not have a satisfying analogous relation for the 
\begin_inset Formula $\gamma_{D}$
\end_inset 

.
 The closest that one comes to to find 
\begin_inset Formula $K=\left(\begin{array}{cc}
1 & 0\\
0 & 0\end{array}\right)$
\end_inset 

 which satisfies 
\begin_inset Formula $\gamma_{D}^{T}K\gamma_{D}=K$
\end_inset 

, but this 
\begin_inset Formula $K$
\end_inset 

 only singles out the trivial representation.
 The dyadic and higher-order interval representations are not symplectic.
 However, one senses that this is not the end of the story, and that there
 must be a deeper connection; after all, hyperbolic dynamics are chaotic,
 and hyperbolic manifolds do have a Fuchsian symmetry.
 
\layout Standard

Finally, we note that the interval representation is a topology, and that
 it is not exactly a trivial topology for a subset of the modular group.
 A more precise statement of the topological nature of the entire modular
 group, and how it relates to the interval representation, is called for.
\layout Standard


\begin_inset LatexCommand \BibTeX[plain]{/home/linas/linas/fractal/paper/fractal}

\end_inset 


\the_end
