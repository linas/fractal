#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass amsart
\use_default_options false
\begin_modules
theorems-ams
eqs-within-sections
figs-within-sections
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "times" "default"
\font_sans "helvet" "default"
\font_typewriter "courier" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 2
\use_package amssymb 2
\use_package cancel 1
\use_package esint 0
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
The Minkowski Question Mark
\begin_inset Newline newline
\end_inset

and the Modular Group 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset


\begin_inset Newline newline
\end_inset

(Expository)
\end_layout

\begin_layout Author
Linas Vepstas
\end_layout

\begin_layout Address
<linasvepstas@gmail.com>
\end_layout

\begin_layout Date
12 October 2004 (updated 22 August 2014)
\begin_inset Foot
status open

\begin_layout Plain Layout
December 2023: Bug fixes; significant rewrites of assorted sections.
\end_layout

\end_inset


\end_layout

\begin_layout Abstract
Fractals and continued fractions seem to be deeply related in many ways.
 Farey fractions appear naturally in both.
 Much, maybe even most of this relationship can be explained by the fact
 that both are represented with the infinite binary tree.
 In turn, this tree describes the structure of the Cantor set.
\end_layout

\begin_layout Abstract
This text is meant to be an easy-to-read and informal presentation as to
 how all of these ideas tie together, to reveal how they are all just different
 representations of the same thing.
 Reading this text does not require any formal education in mathematics:
 it should be accessible to anyone who is interested.
 That said, a raft of fancy keywords provide hooks for finding more information
 via search engines.
 Here's the raft.
\end_layout

\begin_layout Abstract
The infinite binary tree can be viewed as a certain subset of the modular
 group 
\begin_inset Formula $PSL\left(2,\mathbb{Z}\right)$
\end_inset

.
 This is the dyadic groupoid or dyadic monoid.
 It provides a natural setting for the symmetry and self-similarity of many
 fractals, including those associated with period-doubling maps, with phase-lock
ing maps, and with various dynamical systems in general.
 
\end_layout

\begin_layout Abstract
The dyadic monoid appears to be isomorphic to a large collection of other
 things: the rational numbers; the dyadic rationals (have a power of two
 in the denominator), the infinite binary tree, the Cantor space, viewed
 as a set of infinitely long strings of 1's and 0's, the Farey and Stern-Brocot
 trees, continued fractions, the set of quadratic irrationals, Baire space
 (viewed as a set of infinitely long strings of positive integers).
 The dyadic monoid has a surjection onto the real numbers.
 When also passing through the continued fractions, this gives the Minkowski
 Question Mark function.
 All of these inter-relationships are presented in this text.
\end_layout

\begin_layout Abstract
A particular amount of effort is expended on demonstrating the fractal self-simi
larlity, the symmetry properties of all of these objects.
 This is examined from many different angles, so as to make clear it's 
\begin_inset Quotes eld
\end_inset

always the same thing
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Abstract
XXX Caution: this paper is in a perpetual state of being unfinished.
 This version corrects a number of serious errors found in previous drafts.
 Yet, it will surely still be misleading and confusing in many ways.
 The second half, in particular must surely contain errors and mis-statements!
 Caveat emptor! XXX
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
The Minkowski Question Mark function, shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Minkowski-Question"

\end_inset

, has many strange and unusual properties.
 As is readily apparent, it is continuous everywhere, and monotonically
 increasing.
 A naive attempt to compute its derivative seems to show that it has a derivativ
e that is zero 
\begin_inset Quotes eld
\end_inset

everywhere
\begin_inset Quotes erd
\end_inset

, or at least, zero on the rational numbers.
 A visual examination shows that it is clearly self-similar, yet the self-simila
rity cannot be a simple re-scaling, as some stretching and shrinking is
 needed to make the self-similarity work.
 The goal of this paper is to describe, in simple terms, its analytic and
 topological properties, and, most importantly, its self-similarity properties.
 These will be seen to be the self-similarities of the infinite binary tree.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:The-Minkowski-Question"

\end_inset

The Minkowski Question Mark Function
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename quest.ps
	width 60text%

\end_inset


\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
This figure was generated with the code at experiments/gap/quest.gplot
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
The Binary Tree
\end_layout

\begin_layout Standard
The infinite binary tree is depicted in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Dyadic-Tree"

\end_inset

.
 Its clearly 
\begin_inset Quotes eld
\end_inset

binary
\begin_inset Quotes erd
\end_inset

 in that branching downwards, there are two offshoots from each node.
 The nodes themselves are labeled with binary numbers, or, more precisely,
 with 
\begin_inset Quotes eld
\end_inset

dyadic fractions
\begin_inset Quotes erd
\end_inset

.
 A dyadic fraction is simply a fraction whose denominator is a power of
 two.
 This text will distinguish between binary and dyadic, with 
\begin_inset Quotes eld
\end_inset

binary
\begin_inset Quotes erd
\end_inset

 referring to the shape of the tree, and 
\begin_inset Quotes eld
\end_inset

dyadic
\begin_inset Quotes erd
\end_inset

 referring to powers of two.
 For example, the nodes of the binary tree need not be labeled with dyadic
 fractions.
 When they are, it may be called the 
\begin_inset Quotes eld
\end_inset

dyadic tree
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:The-Dyadic-Tree"

\end_inset

The Dyadic Tree
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename dyadic.eps
	width 60text%
	clip

\end_inset


\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
created with inkscape see dyadic.svg for the source.
\end_layout

\end_inset


\end_layout

\end_inset

 
\end_layout

\begin_layout Standard
The binary tree is readily navigated when descending down it, by making
 a sequence of left and right moves.
 Labeling these moves by 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

, every node can be uniquely labeled by the path taken to get to it from
 the root of the tree.
 A general node of the tree thus corresponds to some string of letters 
\begin_inset Formula $L^{m}R^{n}L^{p}\cdots$
\end_inset

 for some non-negative integer 
\begin_inset Formula $m$
\end_inset

 and positive integers 
\begin_inset Formula $n$
\end_inset

, 
\begin_inset Formula $p$
\end_inset

, \SpecialChar ldots
.
 The superscript, as usual, simply means that a given letter is repeated
 some number of times, so that 
\begin_inset Formula 
\[
L^{m}R^{n}L^{p}\cdots=\begin{array}{ccc}
\underbrace{LLL\cdots L} & \underbrace{RR\cdots R} & \underbrace{LL\cdots L}\\
m & n & p
\end{array}\cdots
\]

\end_inset

For the dyadic tree, the path label can be directly converted to the dyadic
 label: the string of 
\begin_inset Formula $L$
\end_inset

's and 
\begin_inset Formula $R$
\end_inset

's can be taken as a string of 
\begin_inset Formula $0$
\end_inset

's and 
\begin_inset Formula $1$
\end_inset

's, a binary expansion; one adds an extra 
\begin_inset Formula $1$
\end_inset

 at the end to get the dyadic value.
 Thus, starting at the root of the tree, taken to be 
\begin_inset Formula $1/2$
\end_inset

, a series of left and right moves takes one to the following nodes:
\begin_inset Formula 
\[
\begin{array}{ccccc}
L & = & 0.01 & = & 1/4\\
R & = & 0.11 & = & 3/4\\
RL & = & 0.101 & = & 5/8\\
L^{2} & = & 0.001 & = & 1/8\\
L^{2}RL & = & 0.00101 & = & 5/32
\end{array}
\]

\end_inset

 
\end_layout

\begin_layout Standard
Selecting a node in the tree is the same as selecting a subtree, in that
 the node is the root of the entire subtree underneath it.
 Any subtree is clearly isomorphic to the whole tree, and it is from this
 property that self-similarity follows for any system that can be mapped
 onto the binary tree.
 If the nodes of the tree are labeled in strictly ascending order, as they
 are in the dyadic tree, then selecting a node in the tree is the same as
 specifying an interval: the interval runs from the lim 
\emph on
inf
\emph default
 to the lim 
\emph on
sup
\emph default
 of the subtree.
 The converse is not true: a general interval will not correspond to a single
 subtree.
 One may choose the lower limit of an interval arbitrarily, but the upper
 limit of the interval will be constrained by the possible subtrees with
 the given lower limit.
 These ideas, of the equivalence of intervals and trees and nodes, will
 be made more precise in later sections.
\end_layout

\begin_layout Subsection
The Farey Tree and the Stern-Brocot Tree
\end_layout

\begin_layout Standard
The Farey tree
\begin_inset CommandInset citation
LatexCommand cite
key "Bog96"
literal "true"

\end_inset

, at whose nodes sit the Farey fractions
\begin_inset CommandInset citation
LatexCommand cite
key "Har38"
literal "true"

\end_inset

, is depicted in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Farey-Tree"

\end_inset

.
 It is a binary tree labeled with rational numbers in the most peculiar
 fashion, and the tree has many unusual and interesting number-theoretic
 properties.
 It is constructed by means of mediants.
 The mediant of two fractions 
\begin_inset Formula $p/q$
\end_inset

 and 
\begin_inset Formula $r/s$
\end_inset

 is defined as 
\begin_inset Formula $(p+r)/(q+s)$
\end_inset

: one adds numerator and denominator, as if making a school-child mistake.
 One begins the construction by labeling the end-points of the unit interval
 as 
\begin_inset Formula $0/1$
\end_inset

 to 
\begin_inset Formula $1/1$
\end_inset

, and arranging them into a row, the zeroth row: 
\begin_inset Formula $\left\{ \frac{0}{1},\frac{1}{1}\right\} $
\end_inset

.
 The first mediant is 
\begin_inset Formula $(0+1)/(1+1)=1/2$
\end_inset

, which is placed in the middle to create the first row: 
\begin_inset Formula $\left\{ \frac{0}{1},\frac{1}{2},\frac{1}{1}\right\} $
\end_inset

.
 At the next iteration, one may construct two more mediants,
\begin_inset Formula 
\begin{eqnarray*}
\frac{(0+1)}{(1+2)} & = & \frac{1}{3}\\
\frac{(1+1)}{(2+1)} & = & \frac{2}{3}
\end{eqnarray*}

\end_inset

 which are placed in between their progenitors, so: 
\begin_inset Formula $\left\{ \frac{0}{1},\frac{1}{3},\frac{1}{2},\frac{2}{3},\frac{1}{1}\right\} $
\end_inset

.
 The construction proceeds onward in this manner, with the mediant being
 taken of neighboring fractions.
 The tree itself is obtained very simply by placing the mediants onto the
 the respective positions in the tree.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:The-Farey-Tree"

\end_inset

The Farey Tree
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename farey.eps
	width 60text%

\end_inset


\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
created with inkscape, see farey.svg for the source.
 
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Neighboring fractions in each row have the curious property of being 
\begin_inset Quotes eld
\end_inset

unimodular
\begin_inset Quotes erd
\end_inset

: by this, it is meant that if 
\begin_inset Formula $p/q$
\end_inset

 and 
\begin_inset Formula $r/s$
\end_inset

 are neighboring fractions, then 
\begin_inset Formula $rq-ps=1$
\end_inset

.
 This is easily proved by induction: clearly, the relation holds for 
\begin_inset Formula $0/1$
\end_inset

 and 
\begin_inset Formula $1/1$
\end_inset

.
 One then shows that if the relationship holds for the pair 
\begin_inset Formula $\left(\frac{p}{q},\frac{r}{s}\right)$
\end_inset

, then it also holds for the two pairs 
\begin_inset Formula $\left(\frac{p}{q},\frac{p+r}{q+s}\right)$
\end_inset

 and 
\begin_inset Formula $\left(\frac{p+r}{q+s},\frac{r}{s}\right)$
\end_inset

.
 The term 
\begin_inset Quotes eld
\end_inset

unimodular
\begin_inset Quotes erd
\end_inset

, while seemingly opaque here, is no accident.
 The pair of fractions, written as a 2x2 matrix 
\begin_inset Formula 
\[
A=\left[\begin{array}{cc}
r & p\\
s & q
\end{array}\right]
\]

\end_inset

 has a unit determinant, and so 
\begin_inset Formula $A\in SL(2,\mathbb{Z})$
\end_inset

, where 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 is the group of 2x2 matrices with unit determinant.
 Although its appearance here seems arbitrary, this group of matrices will
 recur more deeply throughout the theory of binary trees.
 The unimodular property then allows one to prove that
\begin_inset Formula 
\[
\frac{p}{q}<\frac{p+r}{q+s}<\frac{r}{s}
\]

\end_inset

 and so mediants always lie strictly in between their progenitors.
 This implies that every row of Farey fractions are in strict ascending
 order.
 From this it follows that any given fraction can appear only once in a
 given row, and that the progenitors of a given fraction are unique.
 In fact, it may be shown that every fraction appears somewhere in the tree;
 several simple proofs are provided in 
\begin_inset CommandInset citation
LatexCommand cite
key "Bog96"
literal "true"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
The 
\begin_inset CommandInset label
LatexCommand label
name "cap:The-Stern-Brocot-Tree"

\end_inset

Stern-Brocot Tree
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename stern-brocot.eps
	width 60text%

\end_inset


\end_layout

\end_inset

Closely related to the Farey tree is the Stern-Brocot tree, depicted in
 figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Stern-Brocot-Tree"

\end_inset

.
 The construction proceeds in a similar manner to that of the Farey tree.
 The primary difference is that the Stern-Brocot tree spans the entire non-negat
ive real number line 
\begin_inset Formula $0/1\le p/q\le1/0=\infty$
\end_inset

, instead of just the closed unit interval.
 As is readily apparent from the figure, the left half of the tree is identical
 to the Farey tree.
 Equally apparent, the right half has the same form as the left half, but
 with the fractions 
\begin_inset Formula $p/q$
\end_inset

 turned upside-down, to form 
\begin_inset Formula $q/p$
\end_inset

.
 Matching up the nodes of the Farey tree to the nodes of the Stern-Brocot
 tree induces a function from the the rationals on the unit interval to
 all positive rationals.
 This function is given by
\begin_inset Formula 
\begin{equation}
f\left(x\right)=\frac{x}{1-x}\label{eq:Farey to Stern-Brocot}
\end{equation}

\end_inset

It is not hard to imagine that this function holds for real numbers as well:
 that one can take not only an unbounded number of steps down the tree,
 but that one can go infinitely far, arriving at the real numbers.
 The reals can be imagined as those places that correspond to the gaps between
 the branches in the tree.
 That is, one can imagine that chasing a single branch all the way down
 will still arrive at something that 
\begin_inset Quotes eld
\end_inset

feels like
\begin_inset Quotes erd
\end_inset

 a rational number.
 The reals, somehow, live 
\begin_inset Quotes eld
\end_inset

in between
\begin_inset Quotes erd
\end_inset

.
 The function 
\begin_inset Formula $x/\left(1-x\right)$
\end_inset

 does 
\begin_inset Quotes eld
\end_inset

make sense
\begin_inset Quotes erd
\end_inset

 for the reals as well as the rationals.
 The limit seems to be well-defined, the function seems continuous.
 
\end_layout

\begin_layout Standard
This will be almost the last time that the word 
\begin_inset Quotes eld
\end_inset

continuous
\begin_inset Quotes erd
\end_inset

 is mentioned in this text.
 For two reasons.
 First is that this is not really the topic that this text wants to talk
 about.
 Second is that it really can't: a proper, formal defintion of continuity
 requires the defintion of open sets, and, more generally a topology.
 This requires a lot of work, and if one is not careful to bound the discussion,
 it can reach into the depths of general topology and descriptive set theory.
 Entire books have been written on these topics, and more than a few.
 There is no topology in this text.
 Most of the discussion will be about single points, individual instances
 of things: perhaps integers, perhaps strings of integers, perhaps rationals.
\end_layout

\begin_layout Standard
Another characteristic of this text is that it will carefully avoid using
 any kind of sophisticated mathematics at all.
 There will be a number of quite fancy words brandished here or there.
 These can be used in a search engine, to find more information.
 There will be no appeals to any fancy or deep theorems from mathematics.
 This text is meant to be readable by enthusiasts and amateurs.
 It is not aimed at mathematicians.
\end_layout

\begin_layout Subsection
The Question Mark Function
\end_layout

\begin_layout Standard
By identifying the dyadic tree and the Farey tree, one obtains the Minkowski
 question mark function as the map between the two trees.
 The question mark function is denoted by 
\begin_inset Formula $?(x)$
\end_inset

, and is the map of labels from the Farey tree to the dyadic tree, so that,
 for example, 
\begin_inset Formula $?(1/3)=1/4$
\end_inset

.
 The recursive construction of the two trees also allows a recursive constructio
n of the question mark function
\begin_inset CommandInset citation
LatexCommand cite
after "Contorted fractions, chapter 8"
key "Con76"
literal "true"

\end_inset

.
 At the endpoints, one has 
\begin_inset Formula $?(0)=0$
\end_inset

 and 
\begin_inset Formula $?(1)=1$
\end_inset

.
 Then, given a pair of neighboring progenitors 
\begin_inset Formula $p/q$
\end_inset

 and 
\begin_inset Formula $r/s$
\end_inset

, one equates the Farey mediant to the arithmetic average:
\begin_inset Formula 
\begin{equation}
?\left(\frac{p+r}{q+s}\right)=\frac{1}{2}\left[?\left(\frac{p}{q}\right)+?\left(\frac{r}{s}\right)\right]\label{eq:recursive ? fun defn}
\end{equation}

\end_inset

That this gives a node on the dyadic tree follows easily, as the dyadic
 tree may be constructed in the same way that the Farey tree was, with arithmeti
c average taking the place of the mediant.
\end_layout

\begin_layout Standard
The recursive construction provides a map from the rationals to the dyadic
 rationals.
 Given a square-free number 
\begin_inset Formula $p,$
\end_inset

 define
\begin_inset Formula 
\begin{equation}
\mathbb{Q}_{p}=\left.\left\{ \frac{m}{p^{n}}\right|n\in\mathbb{N},\,0\le m<p^{n}\right\} \label{eq:p-adic rationals}
\end{equation}

\end_inset

 to be the 
\begin_inset Formula $p$
\end_inset

-adic rationals on the unit interval, that is, the rational numbers with
 a power of 
\begin_inset Formula $p$
\end_inset

 in  the denominator.
 Here, 
\begin_inset Formula $\mathbb{N}$
\end_inset

 denotes the set of natural numbers.
 The term 
\begin_inset Quotes eld
\end_inset

square-free
\begin_inset Quotes erd
\end_inset

 simply means that all of the prime factors of 
\begin_inset Formula $p$
\end_inset

 occur only once; 
\begin_inset Formula $p$
\end_inset

 contains no squares.
 With this notation, the question mark function is then a map 
\begin_inset Formula 
\[
?:\mathbb{Q}\to\mathbb{Q}_{2}
\]

\end_inset

where, by abuse of notation, 
\begin_inset Formula $\mathbb{Q}$
\end_inset

 is understood to be the rational numbers on the unit interval.
 The restriction to the unit interval avoids the question of how to extend
 the question mark function to larger positive or negative arguments; several
 different, inequivalent extensions are possible.
 In all of what follows, whenever the symbols 
\begin_inset Formula $\mathbb{Q}$
\end_inset

 or 
\begin_inset Formula $\mathbb{Q}_{2}$
\end_inset

 or even 
\begin_inset Formula $\mathbb{R}$
\end_inset

 are used, these should be understood to be limited to the unit interval;
 this avoids the need for a more cumbersome notation.
\end_layout

\begin_layout Standard
The rationals 
\begin_inset Formula $\mathbb{Q}$
\end_inset

 and the dyadics 
\begin_inset Formula $\mathbb{Q}_{2}$
\end_inset

 are both dense in the reals 
\begin_inset Formula $\mathbb{R}$
\end_inset

.
 A well-known theorem of general topology states that any continuous map
 of dense subsets of 
\begin_inset Formula $\mathbb{R}$
\end_inset

 can be uniquely extended to a continuous map for all of 
\begin_inset Formula $\mathbb{R}$
\end_inset

.
 It is straight-forward to show that the question mark function is continuous
 in the usual topology on the unit interval: given any open interval 
\begin_inset Formula $(a,b)$
\end_inset

, the preimage 
\begin_inset Formula $?^{-1}(a,b)$
\end_inset

 is also an open set.
 The proof of continuity follows from the fact that both the dyadic and
 the Farey trees were strictly ordered (if 
\begin_inset Formula $p/q<r/s$
\end_inset

 then 
\begin_inset Formula $p/q$
\end_inset

 will appear to the left of 
\begin_inset Formula $r/s$
\end_inset

 in the tree), and that all possible dyadics appear in the dyadic tree,
 and all possible rationals appear in the Farey tree.
 Thus, one may conclude that the question mark function is well-defined
 on the real numbers, and furthermore, that it is monotonically increasing.
\end_layout

\begin_layout Subsection
Representations of Real Numbers 
\end_layout

\begin_layout Standard
An alternate definition of the question mark function may be given that
 is more suitable for many practical computations, than the recursive definition
 of equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:recursive ? fun defn"

\end_inset

.
 The alternate definition is given in terms of continued fractions, and
 requires a brief diversion into the representation of real numbers.
\end_layout

\begin_layout Standard
Let 
\begin_inset Formula $x=[a_{1},a_{2},\cdots]$
\end_inset

 be the continued fraction representation
\begin_inset CommandInset citation
LatexCommand cite
key "Khin35"
literal "true"

\end_inset

 for a real number 
\begin_inset Formula $x$
\end_inset

.
 In this representation, one has 
\begin_inset Formula 
\[
x=\dfrac{1}{a_{1}+\dfrac{1}{a_{2}+\dfrac{1}{\cdots}}}
\]

\end_inset

for positive integers 
\begin_inset Formula $a_{1},a_{2},\cdots$
\end_inset

 .
 The word 
\begin_inset Quotes eld
\end_inset

representation
\begin_inset Quotes erd
\end_inset

 here is not lightly chosen, but is meant to evoke a deeper idea: that the
 real numbers exist as an abstract set, whereas the continued fraction is
 one way of writing down the value of a real number in a manipulable way.
 Other representations are possible: of course, everyone is taught the decimal
 expansion (the base-10 or 10-adic representation).
 Formally, one writes 
\begin_inset Formula 
\[
[\;]:\mathbb{R}\to\mathbb{N}^{\omega}
\]

\end_inset

where 
\begin_inset Formula $[\;]$
\end_inset

 is understood to be the operation of creating the continued fraction expansion
 of a real number, and 
\begin_inset Formula $\mathbb{N}^{\omega}=\mathbb{N}\times\mathbb{N}\times\cdots$
\end_inset

 is understood to be the Cartesian product of a countable infinity of copies
 of the natural numbers 
\begin_inset Formula $\mathbb{N}$
\end_inset

.
 The space 
\begin_inset Formula $\mathbb{N}^{\omega}$
\end_inset

 is sometimes called Baire space; however, the standard definition of Baire
 space comes with a natural topology on it, and we have not yet broached
 the subject of topologies.
 
\end_layout

\begin_layout Standard
By contrast, the 
\begin_inset Formula $p$
\end_inset

-adic or base-
\begin_inset Formula $p$
\end_inset

 representation of a real number is given by 
\begin_inset Formula 
\[
(\,)_{p}:\mathbb{R}\to\mathbb{Z}_{p}^{\omega}
\]

\end_inset

Here, 
\begin_inset Formula $\mathbb{Z}_{p}=\left\{ n\vert n\in\mathbb{Z},\,0\le n<p\right\} $
\end_inset

 is the set of integers from 0 to 
\begin_inset Formula $p-1$
\end_inset

, and so 
\begin_inset Formula $\mathbb{Z}_{p}^{\omega}=\mathbb{Z}_{p}\times\mathbb{Z}_{p}\times\cdots$
\end_inset

 is the product of a countable infinity of copies of 
\begin_inset Formula $\mathbb{Z}_{p}$
\end_inset

.
 Here, the symbol 
\begin_inset Formula $(x)_{p}$
\end_inset

 just means, very simply, 
\begin_inset Quotes eld
\end_inset

take the base-
\begin_inset Formula $p$
\end_inset

 expansion of the real number 
\begin_inset Formula $x$
\end_inset


\begin_inset Quotes erd
\end_inset

, so that, for example, 
\begin_inset Formula $(\pi)_{10}=3.141592653\cdots$
\end_inset

.
\end_layout

\begin_layout Standard
A remarkable and sometimes-forgotten property of the 
\begin_inset Formula $p$
\end_inset

-adic representation is that it is not isomorphic to the real numbers.
 A common school demonstration is that 
\begin_inset Formula $0.9999\cdots=1.000\cdots$
\end_inset

: there are two different base-10 expansions that are equal to the same
 real number.
 In fact, this ambiguity exists for any 
\begin_inset Formula $p$
\end_inset

-adic fraction when written out in base-
\begin_inset Formula $p$
\end_inset

.
 This happens for 
\emph on
every
\emph default
 
\begin_inset Formula $p$
\end_inset

-adic representation.
 There is a very simple way of visualizing this problem in terms of trees.
 Consider, for example, 
\begin_inset Formula $p=2$
\end_inset

.
 A 
\begin_inset Formula $2$
\end_inset

-adic fraction corresponds to a node in the dyadic tree:the dyadic tree
 provides a representation for the 2-adic fractions.
 Consider now the real number obtained by starting at a given node, taking
 the left branch, and then a succession of right branches, as so: 
\begin_inset Formula $LRRRR\cdots$
\end_inset

.
 after an infinite number of steps, one arrives at a 
\begin_inset Quotes eld
\end_inset

leaf
\begin_inset Quotes erd
\end_inset

 of the tree.
 The numerical value of the leaf, expressed as a real number, is identical
 to the starting node.
 Similarly, one may take the right branch, followed by a succession of left
 branches, like so: 
\begin_inset Formula $RLLLL\cdots$
\end_inset

 One concludes that the dyadic tree, as a representation of the real numbers,
 is triply degenerate at the 
\begin_inset Formula $2$
\end_inset

-adic fractions, in that 
\begin_inset Formula $\frac{1}{2}=0.1000\cdots=0.01111\cdots$
\end_inset

.
 In fact, the leaves of the dyadic tree form the Cantor set, a property
 that will be explored in a later section.
\end_layout

\begin_layout Subsection
Topology
\end_layout

\begin_layout Standard
The space 
\begin_inset Formula $\mathbb{N}^{\omega}$
\end_inset

 has a natural topology, called the product topology, and when given that
 topology, is called Baire space.
 Likewise, the Cantor set 
\begin_inset Formula $\mathbb{Z}_{2}^{\omega}$
\end_inset

 or, more generally, 
\begin_inset Formula $\mathbb{Z}_{p}^{\omega}$
\end_inset

 also has the product topology as its 
\begin_inset Quotes eld
\end_inset

natural
\begin_inset Quotes erd
\end_inset

 topology.
 Neither of these topologies are isomorphic to each other, or the natural
 topology on the reals; it is the interplay between these that leads to
 many of the interesting properties discussed here.
\end_layout

\begin_layout Subsection
A Direct Form for the Question Mark Function
\end_layout

\begin_layout Standard
For many purposes, including numerical exploration, a non-recursive definition
 of the question mark function is convenient to have.
 That is, given any rational or real 
\begin_inset Formula $x$
\end_inset

, one wants to be able to directly evaluate 
\begin_inset Formula $?(x)$
\end_inset

.
 This may be easily done by the use of continued fractions.
 
\end_layout

\begin_layout Standard
Given a continued-fraction expansion 
\begin_inset Formula $x=[a_{1},a_{2},\cdots]$
\end_inset

 of a number real number 
\begin_inset Formula $x$
\end_inset

, one then has an expansion given by Conway
\begin_inset CommandInset citation
LatexCommand cite
key "Con76"
literal "true"

\end_inset

 (sometimes called the 
\begin_inset Quotes eld
\end_inset

Denjoy expansion
\begin_inset Quotes erd
\end_inset

): 
\begin_inset Formula 
\begin{equation}
?\left(x\right)=2\sum_{k=1}^{N}\left(-1\right)^{k+1}\;2^{-(a_{1}+a_{2}+\cdots+a_{k})}\label{eq:direct ? fun defn}
\end{equation}

\end_inset

where 
\begin_inset Formula $N$
\end_inset

 is the length of the continued fraction; 
\begin_inset Formula $N=\infty$
\end_inset

 for irrational numbers.
 This sum can be visualized as a count of an alternating sequence of 0's
 and 1's in the binary expansion of 
\begin_inset Formula $?(x)$
\end_inset

: 
\begin_inset Formula 
\[
?(x)=\begin{array}{ccccc}
0.\underbrace{000..0} & \underbrace{11..1} & \underbrace{00..0} & \underbrace{11..1} & \underbrace{00..0}1..\\
a_{1}-1 & a_{2} & a_{3} & a_{4} & a_{5}
\end{array}
\]

\end_inset

When 
\begin_inset Formula $N$
\end_inset

 is finite, then the expansion is completed by an infinite repetition of
 the opposite of the last digit, so that, for 
\begin_inset Formula $N$
\end_inset

 even, the binary expansion trails off with all 0's, while for 
\begin_inset Formula $N$
\end_inset

 odd, it ends with all 1's.
 This definition enables a simple algorithm for the direct evaluation of
 both the question mark function, and its inverse: in one direction, one
 simply computes the continued fraction expansion of a real number, and
 converts it to a sum.
 In the opposite direction, one simply counts digits in the dyadic expansion,
 using these to reconstruct the continued fraction.
\end_layout

\begin_layout Theorem*
The recursive definition of the Minkowski question mark function, given
 in equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:recursive ? fun defn"

\end_inset

, is equivalent to the direct definition of equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:direct ? fun defn"

\end_inset

.
 
\end_layout

\begin_layout Proof
To show equivalence, one needs to show that, after a sequence of left and
 right moves on the binary tree, the direct definition, in terms of continued
 fractions, gives a node on Farey tree labeled with the correct value of
 the Farey fraction.
 This equivalence may be made by induction.
 
\end_layout

\begin_layout Proof
The proof requires the use of partial convergents of continued fractions.
 Given a continued fraction 
\begin_inset Formula $[a_{1},a_{2},\cdots]$
\end_inset

, one defines the 
\begin_inset Formula $k$
\end_inset

'th convergent as 
\begin_inset Formula 
\[
\frac{p_{k}}{q_{k}}=[a_{1},a_{2},\cdots,a_{k}]
\]

\end_inset

that is, as the result of terminating the continued fraction at the 
\begin_inset Formula $k$
\end_inset

'th term.
 These are called convergents or approximants because these converge to
 the final value of the continued fraction: 
\begin_inset Formula 
\[
[a_{1},a_{2},\cdots]=\lim_{k\to\infty}\frac{p_{k}}{q_{k}}
\]

\end_inset

The numerator and denominator of the convergent obey well-known recursion
 relations
\begin_inset CommandInset citation
LatexCommand cite
key "Khin35"
literal "true"

\end_inset

: 
\begin_inset Formula 
\begin{eqnarray*}
p_{k} & = & a_{k}p_{k-1}+p_{k-2}\\
q_{k} & = & a_{k}q_{k-1}+q_{k-2}
\end{eqnarray*}

\end_inset

 
\end_layout

\begin_layout Proof
A walk to the left or to the right on the dyadic tree is equivalent to appending
 a 0 or a 1 to the dyadic expansion of a number.
 Using the direct definition, the operation of left and right moves on continued
 fractions may be discerned.
 A left move is given by 
\begin_inset Formula 
\[
L\left([a_{1},a_{2},\cdots,a_{N}]\right)=\begin{cases}
[a_{1},a_{2},\cdots,a_{N}+1] & \mbox{ for }N\mbox{ odd}\\{}
[a_{1},a_{2},\cdots,a_{N}-1,2] & \mbox{ for }N\mbox{ even}
\end{cases}
\]

\end_inset

whereas the right move is defined similarly, with the role of even and odd
 reversed.
 That is, a left move either increases the trailing entry in the continued
 fraction by one, or it inserts a comma, to start a new entry for the continued
 fraction.
 The seemingly strange appearance of the 
\begin_inset Quotes eld
\end_inset

-1,2
\begin_inset Quotes erd
\end_inset

 in the last is simply a byproduct of the identity 
\begin_inset Formula $[a_{1},a_{2},\cdots,a_{N}]=[a_{1},a_{2},\cdots,a_{N}-1,1]$
\end_inset

.
 That is, the left move adds a one to the last entry, but only after normalizing
 the continued fraction so that it has an odd length.
 The right move does the same, after first normalizing to an even length.
 Thus, to understand the general case, its sufficient to contemplate the
 value of 
\begin_inset Formula $[a_{1},a_{2},\cdots,a_{N}+1]$
\end_inset

.
\end_layout

\begin_layout Proof
Let 
\begin_inset Formula 
\[
\frac{r_{N}}{s_{N}}=[a_{1},a_{2},\cdots,a_{N}+1]
\]

\end_inset

be the convergent of the (left or right) subnode.
 One easily finds that 
\begin_inset Formula $r_{N}=p_{N}+p_{N-1}$
\end_inset

 and 
\begin_inset Formula $s_{N}=q_{N}+q_{N-1}$
\end_inset

.
 That is, the continued fraction 
\begin_inset Formula $[a_{1},a_{2},\cdots,a_{N}+1]$
\end_inset

 is the mediant of its two last convergents, 
\begin_inset Formula $p_{N}/q_{N}$
\end_inset

 and 
\begin_inset Formula $p_{N-1}/q_{N-1}$
\end_inset

.
 This provides the inductive step.
 The convergent 
\begin_inset Formula $p_{N}/q_{N}$
\end_inset

 corresponds to the immediate predecessor of 
\begin_inset Formula $r_{N}/s_{N}$
\end_inset

 in the Farey tree, while the convergent 
\begin_inset Formula $p_{N-1}/q_{N-1}$
\end_inset

 represents the last 
\begin_inset Quotes eld
\end_inset

change of direction
\begin_inset Quotes erd
\end_inset

 in the left-right traversal.
\end_layout

\begin_layout Standard
Just as the mediants of the Farey fractions were unimodular, so are the
 convergents of a continued fraction: 
\begin_inset Formula $q_{k}p_{k-1}-p_{k}q_{k-1}=(-1)^{k}$
\end_inset

, so that, as before, these may be arranged into a 2x2 matrix with unit
 determinant.
\end_layout

\begin_layout Subsection
Extending to the Real Number Line
\end_layout

\begin_layout Standard
The question mark function, as constructed above, is defined only on the
 unit interval.
 There are several different ways of extending the function to entire positive
 real axis.
 Ideally, this extension should have some sort of 
\begin_inset Quotes eld
\end_inset

natural
\begin_inset Quotes erd
\end_inset

 interpretation of a map from one tree to another.
 The Stern-Brocot tree, shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Stern-Brocot-Tree"

\end_inset

, ranges over the entire positive real axis 
\begin_inset Formula $(0,\infty)$
\end_inset

.
 How should the dyadic tree 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Dyadic-Tree"

\end_inset

 be extended to the same range? One such extension is known as the 
\begin_inset Quotes eld
\end_inset

Birthday Tree
\begin_inset Quotes erd
\end_inset

, and is shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:The-Birthday-Tree"

\end_inset

.
 Note that the birthday tree has the dyadic tree as the left subtree, and
 that the dyadic tree is repeated, shifted by one, under each positive integer.
 The positive integers appear along the right side of the tree.
 The birthday tree occurs as a very natural construction of the real numbers,
 given by J.
 H Conway, as an extension of the construction of the Peano arithmetic
\begin_inset CommandInset citation
LatexCommand cite
key "Con76"
literal "true"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
The Birthday Tree
\begin_inset CommandInset label
LatexCommand label
name "fig:The-Birthday-Tree"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename birthday.eps
	width 60col%

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Aligning the birthday tree with the Stern-Brocot tree results in the extension
 
\begin_inset Formula 
\[
?\left(x\right)=\left\lfloor x\right\rfloor +?\left(x-\left\lfloor x\right\rfloor \right)
\]

\end_inset

where 
\begin_inset Formula $\left\lfloor x\right\rfloor $
\end_inset

 is the largest integer less than or equal to 
\begin_inset Formula $x$
\end_inset

.
 The left-handed side is defined for the entire positive number line, making
 use only of the definition of 
\begin_inset Formula $?\left(x\right)$
\end_inset

 on the unit interval.
 For comparison, the map between the dyadic tree and the birthday tree is
 given by 
\begin_inset Formula 
\[
b\left(x\right)=\begin{cases}
2x & \mbox{ for }0\leq x\le\frac{1}{2}\\
4x-1 & \mbox{ for }\frac{1}{2}\le x\le\frac{3}{4}\\
\cdots & \cdots\\
2^{n+1}x+n+2-2^{n+1} & \mbox{ for }\dfrac{2^{n}-1}{2^{n}}\le x\le\dfrac{2^{n+1}-1}{2^{n+1}}
\end{cases}
\]

\end_inset

The map from the Farey tree to the Stern-Brocot tree was given earlier,
 and is much simpler:
\begin_inset Formula 
\[
f\left(x\right)=\frac{x}{1-x}
\]

\end_inset

One can deduce that 
\begin_inset Formula $f=?^{-1}\circ b\circ?$
\end_inset

 by lining up each of the trees.
 Formal tools that avoid the need for visual lining-up are developed in
 later sections.
\end_layout

\begin_layout Subsection
Pellian Equations
\end_layout

\begin_layout Standard
The question mark function has the curious property that it maps quadratic
 irrationals to rational numbers, and thus arises indirectly in the theory
 of Pellian equations.
 The connection can be demonstrated as follows.
 It has already been noted that the question mark maps rational numbers
 to dyadics.
 Dyadic rationals have, by definition, a finite length binary expansion;
 just as rational numbers have a finite number of terms in their continued
 fraction expansion: the question mark maps finite sequences to finite sequences.
 But what about periodic sequences? The fraction 1/9 has a repeating 2-adic
 expansion: 
\begin_inset Formula $1/9=0.000111011101110\cdots$
\end_inset

 Thus, the corresponding continued fraction must be periodic as well: 
\begin_inset Formula $?([4,3,1,3,1,3,1,\cdots])=1/9$
\end_inset

.
 What is the value of the continued fraction? Writing 
\begin_inset Formula $[4,3,1,3,1,3,1,\cdots]=[4,x]$
\end_inset

, the value of 
\begin_inset Formula $x$
\end_inset

 must satisfy 
\begin_inset Formula $x=[3,1,x]$
\end_inset

 or 
\begin_inset Formula $x=-1/2+\sqrt{7/12}$
\end_inset

, so that 
\begin_inset Formula $[4,3,1,3,1,3,1,\cdots]=1/(4+x)=\left(21-\sqrt{21}\right)/77$
\end_inset

.
 In other words, one has 
\begin_inset Formula $?\left(\left(21-\sqrt{21}\right)/77\right)=1/9$
\end_inset

.
 
\end_layout

\begin_layout Standard
The solution took the form 
\begin_inset Formula $\left(j+k\sqrt{D}\right)/m$
\end_inset

 for some integers 
\begin_inset Formula $j,k$
\end_inset

 and positive integers 
\begin_inset Formula $D,m$
\end_inset

.
 A number of this form is called a quadratic irrational; every such number
 is a solution to a quadratic equation.
 Gauss had demonstrated that every continued fraction that eventually becomes
 periodic takes a value that is a quadratic irrational, and conversely,
 that every quadratic irrational has a continued fraction expansion that
 eventually becomes periodic.
 Gauss also demonstrated that the partial convergents of the continued fraction
 are solutions to an equation 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
p^{2}-nq^{2}=1
\]

\end_inset

for integer 
\begin_inset Formula $p,q$
\end_inset

 and square-free integer 
\begin_inset Formula $n$
\end_inset

.
 This equation is the Pellian equation; clearly the rational 
\begin_inset Formula $p/q$
\end_inset

 becomes a good approximation to 
\begin_inset Formula $\sqrt{n}$
\end_inset

.
 The appearance of the 1 on the right-hand side is again a manifestation
 of the unimodular relationship between partial convergents of the continued
 fraction: again, 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 enters the picture.
 Curiously, the classification of the solutions to the Pellian equation
 has a connection to the Riemann hypothesis.
\end_layout

\begin_layout Standard
A side effect of the question mark mapping is that it provides a simple
 proof that the set of quadratic irrationals is countable: each one is associate
d to a unique rational, and the rationals are countable.
\end_layout

\begin_layout Standard
XXX to-do: this section should be re-written to provide a better, stronger
 review of these (well-worn) topics.
\end_layout

\begin_layout Section
Symmetries of the Question Mark
\end_layout

\begin_layout Standard
The Question Mark function is self-similar, and the generators of the similarity
 transformations can be written down explicitly.
 These generate a subset of a group (they do not generate a whole group,
 as will be made clear); a subset of the group 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset

.
 We'll give it a name: the 
\emph on
dyadic monoid
\emph default
, although it can also be understood to be a semilattice; also, the dyadic
 monoid is a subset of the 
\emph on
dyadic groupoid
\emph default
.
 The definitions of a monoid, a groupoid, and a lattice, will be reviewed
 later; the reason for naming the dyadic monoid now is to voice a hypothesis:
 the dyadic monoid gives the symmetry of all period-doubling fractal and
 chaotic phenomena.
 
\end_layout

\begin_layout Standard
Given a real number 
\begin_inset Formula $x$
\end_inset

 having the continued fraction expansion 
\begin_inset Formula $x=[a_{1},a_{2},\cdots]$
\end_inset

, define the function 
\begin_inset Formula $g(x)$
\end_inset

 to be 
\begin_inset Formula $g(x)=[a_{1}+1,a_{2},\cdots]$
\end_inset

 .
 A straightforward manipulation shows that 
\begin_inset Formula $g(x)$
\end_inset

 has an explicit, concrete form: 
\begin_inset Formula $g(x)=x/(x+1)$
\end_inset

.
 Making use of the 
\begin_inset Quotes eld
\end_inset

direct
\begin_inset Quotes erd
\end_inset

 definition of the question mark 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:direct ? fun defn"

\end_inset

, one has that 
\begin_inset Formula $g$
\end_inset

 is a homomorphism of the question mark: 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{equation}
(?\circ g)(x)=?(g(x))=?\left(\frac{x}{x+1}\right)=\frac{?(x)}{2}\label{eq:dyadic g}
\end{equation}

\end_inset

Here, 
\begin_inset Formula $\circ$
\end_inset

 denotes function composition.
 The above identity follows, as adding one to 
\begin_inset Formula $a_{1}$
\end_inset

is the same as dividing by two in 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:direct ? fun defn"

\end_inset

.
 By defining 
\begin_inset Formula $h(x)=x/2$
\end_inset

 the above identitiy can be written in the form of a commuting diagram:
 
\begin_inset Formula $?\circ g=h\circ?$
\end_inset

 which holds for all 
\begin_inset Formula $x$
\end_inset

 in the unit interval.
\end_layout

\begin_layout Standard
The repeated application of the function 
\begin_inset Formula $g$
\end_inset

 generates a symmetry of the question mark.
 Denoting repeated iterations by 
\begin_inset Formula $g^{n}$
\end_inset

, one readily obtains 
\begin_inset Formula $g^{n}(x)=x/(nx+1)$
\end_inset

.
 Equivalently, for a continued fraction, 
\begin_inset Formula 
\[
g^{n}([a_{1},a_{2},\cdots])=[a_{1}+n,a_{2},\cdots]
\]

\end_inset

Iterating under the question mark gives 
\begin_inset Formula 
\[
\left(?\circ g^{n}\right)(x)=?\left(\frac{x}{nx+1}\right)=\frac{?(x)}{2^{n}}=\left(h^{n}\circ?\right)(x)
\]

\end_inset

The generator 
\begin_inset Formula $g$
\end_inset

 maps intervals to intervals, specifically 
\begin_inset Formula $g^{n}:[[0,1]]\rightarrow[[0,\frac{1}{n+1}]]$
\end_inset

.
 Here the non-standard notation 
\begin_inset Formula $x\in[[a,b]]$
\end_inset

 is introduced to denote an interval 
\begin_inset Formula $a\le x\le b$
\end_inset

; the double bracket form is used only to avoid confusion with 
\begin_inset Formula $[]$
\end_inset

 for continued fraction expansions.
 On the dyadic side, we have 
\begin_inset Formula $(?\circ g^{n}):[[0,1]]\rightarrow[[0,1/2^{n}]]$
\end_inset

.
 
\end_layout

\begin_layout Standard
The other symmetry of the question mark is more trivial: the question mark
 is symmetric under a left-right reflection:
\begin_inset Formula 
\[
?(1-x)=1-?(x)
\]

\end_inset

Denoting this by 
\begin_inset Formula $r$
\end_inset

 for 
\begin_inset Quotes eld
\end_inset

reflection
\begin_inset Quotes erd
\end_inset

, a reflection operator may be defined as 
\begin_inset Formula $r(x)=1-x$
\end_inset

.
 As an operator, 
\begin_inset Formula $r$
\end_inset

 commutes with 
\begin_inset Formula $?$
\end_inset

, since 
\begin_inset Formula $(?\circ r)(x)=(r\circ?)(x)$
\end_inset

.
 Clearly, 
\begin_inset Formula $r$
\end_inset

 cannot be applied more than once, since 
\begin_inset Formula $r^{2}$
\end_inset

 is the identity.
 The reflection operator 
\begin_inset Formula $r$
\end_inset

, composed with 
\begin_inset Formula $g$
\end_inset

, generates more self-symmetries.
 Thus, for example, 
\begin_inset Formula 
\begin{align*}
\left(?rg^{n}\right)(x)= & \left(r?g^{n}\right)(x)=\left(rh^{n}?\right)(x)=1-\frac{?(x)}{2^{n}}\\
= & ?\left(r\left(\frac{x}{nx+1}\right)\right)=?\left(\frac{(n-1)x+1}{nx+1}\right)
\end{align*}

\end_inset

shows that 
\begin_inset Formula $rg^{n}$
\end_inset

 is the operation that, under 
\begin_inset Formula $?$
\end_inset

, maps 
\begin_inset Formula $[[0,1]]\rightarrow[[1,1-1/2^{n}]]$
\end_inset

.
 A general self-similarity transform may be written as 
\begin_inset Formula 
\begin{equation}
\gamma\equiv g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}\label{eq:general gr monoid elt}
\end{equation}

\end_inset

Applying the two commutation relations 
\begin_inset Formula $?g=h?$
\end_inset

 and 
\begin_inset Formula $r?=?r$
\end_inset

 repeatedly results in 
\begin_inset Formula 
\begin{align}
(?\circ\gamma)(x)= & \left(?\circ g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}\right)(x)\label{eq:q-mark isomorph}\\
= & \left(h^{a_{1}}rh^{a_{2}}r...rh^{a_{N}}\circ?\right)(x)\nonumber \\
= & \frac{1}{2^{a_{1}}}\left(1-\frac{1}{2^{a_{2}}}\left(1-\frac{1}{2^{a_{3}}}\left(\cdots\left(1-\frac{1}{2^{a_{N}}}?\left(x\right)\right)\right)\right)\right)\nonumber \\
= & \frac{1}{2^{a_{1}}}-\frac{1}{2^{a_{1}+a_{2}}}+\frac{1}{2^{a_{1}+a_{2}+a_{3}}}-\cdots+(-)^{N+1}\frac{?(x)}{2^{a_{1}+a_{2}+a_{3}+...+a_{N}}}\nonumber 
\end{align}

\end_inset

To see the other leg of the commutative diagram of this homomorphism, observe
 that 
\begin_inset Formula $g^{n}(x)$
\end_inset

 may be itself written as a continued fraction: 
\begin_inset Formula 
\[
g^{n}(x)=\frac{1}{n+\frac{1}{x}}=[n,x]
\]

\end_inset

In the same vein, one has 
\begin_inset Formula $(rg^{n})(x)=[1,n-1,x]$
\end_inset

 and, setting 
\begin_inset Formula $n=0$
\end_inset

, with the slight abuse of allowing negative integers in continued fractions:
\begin_inset Formula 
\[
r(x)=\dfrac{1}{1+\dfrac{1}{-1+\dfrac{1}{x}}}=[1,-1,x]
\]

\end_inset

Continuing this exercise, one finds that
\begin_inset Formula 
\begin{equation}
\gamma(x)=(g^{a_{1}}rg^{a_{2}}r\cdots rg^{a_{N}})(x)=[a_{1}+1,a_{2},a_{3},\cdots,a_{N-1},a_{N}-1,x]\label{eq:gamma act on cf}
\end{equation}

\end_inset

 
\end_layout

\begin_layout Standard
To obtain the explicit form of this as a fraction, one need only remark
 that both 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 take the form of a 
\begin_inset Quotes eld
\end_inset

fractional linear transform
\begin_inset Quotes erd
\end_inset

 or a 
\begin_inset Quotes eld
\end_inset

Möbius transform
\begin_inset Quotes erd
\end_inset

.
 That is, given a general 2x2 matrix, one defines the action 
\begin_inset Formula 
\begin{equation}
\left[\begin{array}{cc}
a & b\\
c & d
\end{array}\right]:x\to\frac{ax+b}{cx+d}\label{eq:Mobius xform}
\end{equation}

\end_inset

The utility of the fractional linear transform is that it commutes with
 matrix multiplication; one may multiply matrices on the left-hand side
 to get the correct expression on the right-hand side.
 In terms of Möbius transformations, one then has that 
\begin_inset Formula 
\begin{equation}
g=\left[\begin{array}{cc}
1 & 0\\
1 & 1
\end{array}\right]\quad\mbox{ and }\quad r=\left[\begin{array}{cc}
-1 & 1\\
0 & 1
\end{array}\right]\label{eq:gr elts}
\end{equation}

\end_inset

and so 
\begin_inset Formula $g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}$
\end_inset

 may be evaluated by matrix multiplication, followed by an application of
 the Möbius transformation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Mobius xform"

\end_inset

 to obtain the fractional form.
 
\end_layout

\begin_layout Subsection
Useful Identities
\end_layout

\begin_layout Standard
Some curious combinations of these operators are tabulated here.
 The action of 
\begin_inset Formula $r$
\end_inset

 on a continued fraction is given by 
\begin_inset Formula 
\[
r\left([a_{1},a_{2},..]\right)=\begin{cases}
[1,a_{1}-1,a_{2},\cdots] & \textrm{for }a_{1}\neq1\\{}
[a_{2}+1,a_{3},\cdots] & \textrm{for }a_{1}=1
\end{cases}
\]

\end_inset

Using the above, the operator to insert a digit 
\begin_inset Formula $n\geq1$
\end_inset

 at the front of the continued fraction expansion is 
\begin_inset Formula 
\[
(g^{n-1}rg)\left([a_{1},a_{2},\cdots]\right)=[n,a_{1},a_{2},\cdots]
\]

\end_inset

which can be verified by using the Möbius transformation 
\begin_inset Formula 
\[
(g^{n-1}rg)(x)=\left(\left[\begin{array}{cc}
1 & 0\\
n-1\, & 1
\end{array}\right]\left[\begin{array}{cc}
-1\, & 1\\
0 & 1
\end{array}\right]\left[\begin{array}{cc}
1 & 0\\
1 & 1
\end{array}\right]\right):(x)=\left(\begin{array}{cc}
0 & 1\\
1 & n
\end{array}\right):(x)=\frac{1}{n+x}
\]

\end_inset

The repeated application of the insertion operator leads to 
\begin_inset Formula 
\[
(g^{j-1}rg)(g^{k-1}rg)(g^{m-1}rg)\cdots(x)=(g^{j-1}rg^{k}rg^{m}rg\cdots)(x)=[j,k,m,\cdots,x]
\]

\end_inset

which provides a simple proof of equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:gamma act on cf"

\end_inset

.
\end_layout

\begin_layout Standard
The append operator follows by combining 
\begin_inset Formula 
\[
[a_{1},a_{2},\cdots,a_{N},g^{k}(x)]=[a_{1},a_{2},\cdots,a_{N}+k,x]
\]

\end_inset

and 
\begin_inset Formula 
\[
[a_{1},a_{2},\cdots,a_{N},r(x)]=[a_{1},a_{2},\cdots,a_{N}+1,-1,x]
\]

\end_inset

The appending operator is 
\begin_inset Formula 
\[
\left(g^{-1}rg^{k+1}\right)(x)=\frac{kx+1}{x}
\]

\end_inset

which, for 
\begin_inset Formula $k\geq1$
\end_inset

, acts as 
\begin_inset Formula 
\[
[a_{1},a_{2},\cdots,a_{N},(g^{-1}rg^{k+1})(x)]=[a_{1},a_{2},\cdots,a_{N},k,x]
\]

\end_inset

Appending to the back, instead of the front, starting with 
\begin_inset Formula $(g^{-1}rg)(x)=1/x=[x]$
\end_inset

 gives 
\begin_inset Formula 
\[
(g^{-1}rg)(g^{-1}rg^{j+1})(g^{-1}rg^{k+1})(g^{-1}rg^{m+1})\cdots(x)=(g^{j-1}rg^{k}rg^{m}rg\cdots)(x)=[j,k,m,\cdots,x]
\]

\end_inset

which has the same form as before.
 One can append to the front or the back, and get the same results: the
 operation is associative.
\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "subsec:Representations-of-Real"

\end_inset

Representations of Real Numbers
\end_layout

\begin_layout Standard
In the above, the dyadic numbers and the continued fractions were casually
 taken as 
\begin_inset Quotes eld
\end_inset

being the same thing
\begin_inset Quotes erd
\end_inset

 as the real numbers.
 This section will attempt to be more precise.
\end_layout

\begin_layout Standard
Some formalities are in order.
 The set of all infinite strings of binary digits is called the Cantor space.
 It can be written as 
\begin_inset Formula $2^{\omega}=\left\{ 0,1\right\} ^{\omega}$
\end_inset

 where 
\begin_inset Formula $2=\left\{ 0,1\right\} $
\end_inset

 is just the set containing two items (two letters, which happen to be 0
 and 1 at present).
 The symbol 
\begin_inset Formula $\omega$
\end_inset

 is the ordinal representing countable infinity.
 Thus, 
\begin_inset Formula $2^{\omega}$
\end_inset

 is a product 
\begin_inset Formula $\left\{ 0,1\right\} \times\left\{ 0,1\right\} \times\cdots$
\end_inset

 of countably many copies of 
\begin_inset Formula $2=\left\{ 0,1\right\} $
\end_inset

.
 Likewise, write 
\begin_inset Formula $\mathbb{N}$
\end_inset

 for the natural numbers, the set of positive integers.
 The countably infinite product 
\begin_inset Formula $\mathbb{N}^{\omega}$
\end_inset

 is called Baire space.
\end_layout

\begin_layout Standard
Both these spaces are well-known and carefully studied in mathematics; they
 have a large number of peculiar and interesting properties.
 None of this will be reviewed here: such a review would be longer than
 this text.
 For the present case, both will be treated as discrete spaces, just consisting
 of infinite strings of letters, and nothing more sophisticated.
 In particular, this section, and the rest of this text carefully avoids
 any discussions related to ideas from topology
\end_layout

\begin_layout Standard
there will 
\end_layout

\begin_layout Standard
more precisely, they are 
\emph on
representations
\emph default
 of the reals.
 That is, both systems offer a way of writing down, and computing with the
 real numbers; however, they are not quite the same thing as real numbers
 themselves.
 In particular, they have some strange properties of their own, not shared
 by the reals in general.
 Thus, for example, in the dyadic representation, there are two different
 representations, 
\begin_inset Formula $1.000\cdots$
\end_inset

 and 
\begin_inset Formula $0.111\cdots$
\end_inset

, both of which represent the real number 1.
 Thus, the dyadic representation is not isomorphic to the reals; the map
 it is a surjection 
\end_layout

\begin_layout Standard
For finite-length continued fraction
\end_layout

\begin_layout Standard
In a later section, we'll see the that the dyadic fractions are isomorphic
 to the Cantor set.
 In this section, the relationship of these two representations is spelled
 out in greater detail and in more formal terms.
 
\end_layout

\begin_layout Standard
Denote by 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 the dyadic representation of the real numbers 
\begin_inset Formula $\mathbb{R}$
\end_inset

 in the dyadic expansions; that is, 
\begin_inset Formula $\forall x\in\mathbb{R}\;\exists x_{D}\in\mathbb{R}_{D}$
\end_inset

 which represents the real number 
\begin_inset Formula $x$
\end_inset

 as the dyadic expansion 
\begin_inset Formula $x_{D}$
\end_inset

 with 
\begin_inset Formula 
\begin{equation}
x_{D}=\sum_{n=-\infty}^{\infty}b_{n}2^{n}\label{eq:dyadic expansion}
\end{equation}

\end_inset

where 
\begin_inset Formula $b_{k}\in\left\{ 0,1\right\} \;\forall k\in\mathbb{Z}$
\end_inset

.
 Let 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

 denote the representation of the real numbers as continued fractions, that
 is, 
\begin_inset Formula $\forall x\in\mathbb{R}\;\exists x_{C}\in\mathbb{R}_{C}$
\end_inset

 such that 
\begin_inset Formula 
\[
x_{C}=a_{0}+\dfrac{1}{a_{1}+\dfrac{1}{a_{2}+\dfrac{1}{\cdots}}}=[a_{0};a_{1},a_{2},\cdots]
\]

\end_inset

where 
\begin_inset Formula $a_{k}\in\mathbb{N}\;\forall k\in\mathbb{N}$
\end_inset

, with the exception that 
\begin_inset Formula $a_{0}\in\mathbb{Z}$
\end_inset

.
 
\end_layout

\begin_layout Standard
Both of these representations are acted upon by the self-similarity transformati
on 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:general gr monoid elt"

\end_inset

, but each in a different way.
 On the dyadic representation, the generator 
\begin_inset Formula $g$
\end_inset

 has the representation 
\begin_inset Formula 
\begin{eqnarray*}
g_{D} & :\mathbb{R}_{D} & \,\longrightarrow\mathbb{R}_{D}\\
 & x & \longmapsto x/2
\end{eqnarray*}

\end_inset

when acting on the set of dyadic numbers, whereas as this same element has
 the representation 
\begin_inset Formula 
\begin{eqnarray*}
g_{C} & :\mathbb{R}_{C} & \,\longrightarrow\mathbb{R}_{C}\\
 & x & \longmapsto x/(x+1)
\end{eqnarray*}

\end_inset

when acting on the set of continued fractions.
 The other generator, 
\begin_inset Formula $r$
\end_inset

, has the same representation on both sets: 
\begin_inset Formula $r(x)=1-x$
\end_inset

.
 
\end_layout

\begin_layout Standard
Define the set 
\begin_inset Formula 
\begin{equation}
M=\left\{ \gamma\,\vert\,\gamma=g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}\;\mbox{ for }\;a_{k}\in\mathbb{N}\;\mbox{ and }a_{1},a_{N}\ge0\right\} \label{eq:dyadic monoid}
\end{equation}

\end_inset

 That is, each 
\begin_inset Formula $a_{k}$
\end_inset

 to be a positive integer, with the exception of 
\begin_inset Formula $a_{1}$
\end_inset

 and 
\begin_inset Formula $a_{N}$
\end_inset

 which may be zero.
 The set 
\begin_inset Formula $M$
\end_inset

 is a 
\emph on
monoid
\emph default
, and, more formally, is the 
\emph on
dyadic monoid
\emph default
.
 Recall the definition of a monoid: it is a set with an associative operation
 (in this case, multiplication) that is closed under the operation, in the
 sense that if 
\begin_inset Formula $\gamma_{1}\in M$
\end_inset

 and 
\begin_inset Formula $\gamma_{2}\in M$
\end_inset

 then 
\begin_inset Formula $\gamma_{1}\gamma_{2}\in M$
\end_inset

.
 To complete the definition of a monoid, 
\begin_inset Formula $M$
\end_inset

 must also have an identity element 
\begin_inset Formula $e$
\end_inset

, so that 
\begin_inset Formula $e\gamma=\gamma e=\gamma$
\end_inset

 for all 
\begin_inset Formula $\gamma\in M$
\end_inset

.
 There are no further axioms in the definition of a monoid.
\end_layout

\begin_layout Standard
Monoids are sometimes called 
\emph on
semigroups
\emph default
, although the term semigroup is usually reserved for the idea of a monoid,
 but without an identity element.
 The definition of a monoid is similar to that for a group, with an important
 difference: a monoid does not, in general, contain inverses.
 For a given 
\begin_inset Formula $\gamma\in M$
\end_inset

, there typically is no 
\begin_inset Formula $\beta\in M$
\end_inset

 such that 
\begin_inset Formula $\gamma\beta=e$
\end_inset

.
 Because of this, 
\begin_inset Formula $M$
\end_inset

 cannot a group.
 Now, associative monoids, such as this, do have the universal property
 of being extendable to a full-fledged group, and one certainly could do
 this for 
\begin_inset Formula $M$
\end_inset

.
 However, such an extension can no longer be interpreted as a set of self-simila
rities acting on intervals.
 The extent to which some additional elements, that would act as inverses,
 can be added to 
\begin_inset Formula $M$
\end_inset

, is explored in a later section.
 
\end_layout

\begin_layout Standard
The role of the question mark function in connecting these two representations
 of the reals was just noted.
 This may be turned into a more formal theorem:
\end_layout

\begin_layout Theorem*
The Minkowski question mark provides an homomorphism between 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

 and 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

.
 That is, there is a commuting diagram
\begin_inset Formula 
\[
\begin{array}{ccc}
\mathbb{R}_{C} & \begin{array}{c}
\gamma_{C}\\
\longrightarrow
\end{array} & \mathbb{R}_{C}\\
\begin{array}{ccc}
? & \downarrow\end{array} & \bigcirc & \begin{array}{ccc}
 & \downarrow & ?\end{array}\\
\mathbb{R}_{D} & \begin{array}{c}
\\
\longrightarrow\\
\gamma_{D}
\end{array} & \mathbb{R}_{D}
\end{array}
\]

\end_inset

such that 
\begin_inset Formula $?\circ\gamma_{C}=\gamma_{D}\circ?$
\end_inset

 holds for all 
\begin_inset Formula $\gamma\in M$
\end_inset

.
 More precisely, the homomorphism 
\begin_inset Formula $\left(?\circ\gamma_{C}\right)(x_{C})=\left(\gamma_{D}\circ?\right)(x_{D})$
\end_inset

 holds for all 
\begin_inset Formula $\gamma\in M$
\end_inset

 and 
\begin_inset Formula $x\in\mathbb{R}$
\end_inset

, where 
\begin_inset Formula $x_{D}\in\mathbb{R}_{D}$
\end_inset

 and 
\begin_inset Formula $x_{C}\in\mathbb{R}_{C}$
\end_inset

 are both representations of the same 
\begin_inset Formula $x$
\end_inset

.
 
\end_layout

\begin_layout Proof
The two representations of 
\begin_inset Formula $\gamma$
\end_inset

 in the two spaces was given in the previous section above, but it will
 be repeated here just so to make this particularly clear.
 First, decompose the abstract group element 
\begin_inset Formula $\gamma\in M$
\end_inset

 in terms of the generators 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

: 
\begin_inset Formula 
\[
\gamma=g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}
\]

\end_inset

 Then, this 
\begin_inset Formula $\gamma$
\end_inset

 has the representation 
\begin_inset Formula $\gamma_{D}$
\end_inset

 (the dyadic representation), which is 
\begin_inset Formula 
\begin{equation}
\gamma_{D}(x)=\frac{1}{2^{a_{1}}}-\frac{1}{2^{a_{1}+a_{2}}}+\frac{1}{2^{a_{1}+a_{2}+a_{3}}}-...+(-)^{N+1}\frac{x}{2^{a_{1}+a_{2}+a_{3}+...+a_{N}}}\label{eq:dyadic gamma}
\end{equation}

\end_inset

 It also has the representation 
\begin_inset Formula $\gamma_{C}$
\end_inset

 (the continued-fraction representation), which is 
\begin_inset Formula 
\begin{equation}
\gamma_{C}(x)=[a_{1}+1,a_{2},a_{3},...,a_{N-1},a_{N}-1,x]\label{eq:modular gamma}
\end{equation}

\end_inset

 and so we need to prove that 
\begin_inset Formula $?(\gamma_{C}(x))=\gamma_{D}(?(x))$
\end_inset

.
\end_layout

\begin_layout Proof
First, it is clear that if this equivalence holds for any given 
\begin_inset Formula $\gamma$
\end_inset

 and 
\begin_inset Formula $\gamma^{\prime}$
\end_inset

 (at some fixed 
\begin_inset Formula $x$
\end_inset

), then it also holds for the product 
\begin_inset Formula $\gamma\gamma^{\prime}$
\end_inset

 (at the same fixed 
\begin_inset Formula $x$
\end_inset

).
 Thus, induction on 
\begin_inset Formula $\gamma$
\end_inset

 may be applied to show it holds for all 
\begin_inset Formula $\gamma\in M$
\end_inset

.
 Next, we need to prove that this holds for all 
\begin_inset Formula $x$
\end_inset

.
 The introductory discussions, up top, showed that the relation holds for
 
\begin_inset Formula $x=0$
\end_inset

 and 
\begin_inset Formula $x=1$
\end_inset

 , and, by congruence of the dyadic and Farey trees, that it holds for any
 
\begin_inset Formula $x$
\end_inset

 that is a rational number.
 To complete the proof, one must show that, in the usual topology for the
 reals, that the rationals are dense in the reals, and so the closure of
 the rationals gives the reals.
 Intuitively, this seems obvious just from a consideration of the limiting
 values at the 
\begin_inset Quotes eld
\end_inset

leaves
\begin_inset Quotes erd
\end_inset

 of the infinite binary tree.
 However, care must be taken, as the dyadics have another closure (the 
\begin_inset Formula $p$
\end_inset

-adics) besides the reals; and so the proof requires that 
\begin_inset Formula $?(x)$
\end_inset

 be taken to be a continuous function.
 All this requires a somewhat more subtle discussion that is beyond the
 scope of (the current draft of) this paper.
\end_layout

\begin_layout Standard
To summarize, the continued fractions 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

 and dyadic numbers 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 are two distinct and inequivalent representations of the real numbers,
 both homomorphic to the abstract concept of the reals.
 These two representations are distinct, having different transformation
 properties under the action of the dyadic monoid.
 In fact, both 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 and 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

 are isomorphic to the Cantor set, as will be discussed below, and so the
 Question Mark provides an isomorphism, not just a homomorphism, between
 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 and 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

.
 
\end_layout

\begin_layout Standard
XXX FIXME TODO: This entire section needs to be rewritten.
 Issues include:
\end_layout

\begin_layout Itemize
The proper name for the set of infinite binary strings is Cantor space.
\end_layout

\begin_layout Itemize
careful throwing around the word 
\begin_inset Quotes eld
\end_inset

isomorphic
\begin_inset Quotes erd
\end_inset

, the topologies are not.
 The above needs to be reworded with greater care.
\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "subsec:Blow-ups"

\end_inset

Blow-ups
\end_layout

\begin_layout Standard
The self-similarity maps above were expressed in the form of mapping the
 whole interval to a sub-interval.
 Of course, the direction of this map can be turned around, so that sub-inverval
s are mapped to the whole interval.
 Things become interesting when one concatenates shrinks with blow-ups that
 are valid only on a sub-interval.
 This results in identities that are valid only on a sub-interval.
 However, the range of possibilities is much greater, and some of these
 identities take on new, unusual forms.
 Examples include 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
?(x)+\frac{1}{2}=?\left(\frac{1-x}{2-3x}\right)\quad\mbox{ for }0\le x\le\frac{1}{2},\mbox{ having range }\frac{1}{2}\mbox{ to }1
\]

\end_inset

 and 
\begin_inset Formula 
\[
?(x)+\frac{1}{4}=\begin{cases}
?\left(\frac{1-2x}{3-7x}\right) & \quad\mbox{ for }0\le x\le\frac{1}{3},\mbox{ having range }\frac{1}{4}\mbox{ to }\frac{1}{2}\\
?\left(\frac{4x-1}{5x-1}\right) & \quad\mbox{ for }\frac{1}{3}\le x\le\frac{1}{2},\mbox{ having range }\frac{1}{2}\mbox{ to }\frac{3}{4}\\
?\left(\frac{3-4x}{5-7x}\right) & \quad\mbox{ for }\frac{1}{2}\le x\le\frac{2}{3},\mbox{ having range }\frac{3}{4}\mbox{ to }1
\end{cases}
\]

\end_inset

 and so on.
\end_layout

\begin_layout Standard
XXX finish this section.
 
\end_layout

\begin_layout Itemize
Show how to construct these examples.
\end_layout

\begin_layout Itemize
All such examples derive from the form 
\begin_inset Formula $\gamma=\alpha\beta^{-1}$
\end_inset

 with 
\begin_inset Formula $\alpha,\beta\in M$
\end_inset

, and there are no others.
 This is proved as theorem 
\begin_inset CommandInset ref
LatexCommand ref
reference "thm:The-only-interval"

\end_inset

 in section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Maximal-Extension-of"

\end_inset

.
\end_layout

\begin_layout Itemize
The shrinking maps had continued fractions with positive entries – now consider
 continued fractions with negative entries.
 These maps have poles.
 But these poles never occur in the interval of validity.
\end_layout

\begin_layout Section
Linear Groups and the Modular Group
\end_layout

\begin_layout Standard
Up to this point, we've been considering the infinite rooted binary tree,
 as shown in figures 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Dyadic-Tree"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Farey-Tree"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Stern-Brocot-Tree"

\end_inset

, 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:The-Birthday-Tree"

\end_inset

, and the moves 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 on this tree, that walk one step down the tree, to the left and right,
 respectively.
 These moves can be concatenated: concatenation is a natural product structure
 on strings.
 Can we move upwards? Of course we can: it sort-of makes sense to talk about
 
\begin_inset Formula $L^{-1}$
\end_inset

 and 
\begin_inset Formula $R^{-1}$
\end_inset

 as upwards moves on the tree.
 The inverse notation (the superscript -1) is suggestive and natural, as
 these are inverse moves: 
\begin_inset Formula $L^{-1}L=LL^{-1}=RR^{-1}=R^{-1}R=e$
\end_inset

 is the identity, as long as we are careful not to walk off the root of
 the tree.
 That is, we can almost understand 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 as generating a group, as long as we imagine ourselves starting somewhere
 in the middle of the tree, and don't walk so far so as to hit the root.
 Is it possible to do better? Is there a way of extending this structure
 so that its a real, full-fledged group? The answer is yes, and its easy
 and straightforward, once you see the way.
\end_layout

\begin_layout Standard
First, recall the definition of a group.
 It is a set of elements, with the following three properties:
\end_layout

\begin_layout Itemize
An associative product is defined on the set, such that the product 
\begin_inset Formula $ab$
\end_inset

 of any two elements 
\begin_inset Formula $a$
\end_inset

 and 
\begin_inset Formula $b$
\end_inset

 always exists.
 This is called the 'closure' property.
 Associativity requires that 
\begin_inset Formula $(ab)c=a(bc)=abc$
\end_inset

.
\end_layout

\begin_layout Itemize
There is a special, unique element, the identity element called 
\begin_inset Formula $e$
\end_inset

, having the property that 
\begin_inset Formula $ae=ea=a$
\end_inset

 for any element 
\begin_inset Formula $a.$
\end_inset


\end_layout

\begin_layout Itemize
Every element 
\begin_inset Formula $a$
\end_inset

 has an inverse 
\begin_inset Formula $a^{-1}$
\end_inset

.
 The inverse is double-sided: 
\begin_inset Formula $aa^{-1}=a^{-1}a=e$
\end_inset

.
\end_layout

\begin_layout Standard
The issue preventing the moves 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 from forming a group is that, as one moves upwards in the tree, one eventually
 bumps into the root node.
 To make this clear, let's recall the definition of an action.
 An action is a pair 
\begin_inset Formula $(G,X)$
\end_inset

 with 
\begin_inset Formula $X$
\end_inset

 a set and 
\begin_inset Formula $G$
\end_inset

 another set, possessing an associative product, and an identity element.
 The definition does not require that 
\begin_inset Formula $G$
\end_inset

 have inverses, but that's OK if it does.
 If 
\begin_inset Formula $G$
\end_inset

 is a group, then the action is called a 
\emph on
group action
\emph default
.
 The action is defined with the following two statements:
\end_layout

\begin_layout Itemize
Elements 
\begin_inset Formula $g\in G$
\end_inset

 act on 
\begin_inset Formula $x\in X$
\end_inset

 such that 
\begin_inset Formula $g\cdot x$
\end_inset

 is another element in 
\begin_inset Formula $X$
\end_inset

.
 That is, 
\begin_inset Formula $g\cdot x\in X$
\end_inset

.
\end_layout

\begin_layout Itemize
The action is associative, so that 
\begin_inset Formula $g\cdot(h\cdot x)=(gh)\cdot x$
\end_inset

 for any two members 
\begin_inset Formula $g,h\in X$
\end_inset

.
\end_layout

\begin_layout Standard
So, here, 
\begin_inset Formula $G$
\end_inset

 is the set of moves on the tree, and 
\begin_inset Formula $X$
\end_inset

 is the tree itself.
 The extension of moves on the tree to a full group can be achieved by simply
 eliminating the root of the tree! This can be done by gluing a second tree
 to the first, as shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Unrooted-Tree"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Unrooted Tree
\begin_inset CommandInset label
LatexCommand label
name "fig:Unrooted-Tree"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename bi-tree.svg

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
In the right-hand tree, the central edge is marked with an arrowhead.
 This singles it out as a special edge: the arrow is a device to keep track
 of one's position in the tree, as well as one's orientation, as one moves
 about.
 Without it, things can get confusing.
 The left hand tree shows the effect of the moves 
\begin_inset Formula $e$
\end_inset

, 
\begin_inset Formula $L$
\end_inset

, 
\begin_inset Formula $R$
\end_inset

, 
\begin_inset Formula $L^{-1}$
\end_inset

 and 
\begin_inset Formula $R^{-1}$
\end_inset

.
 The identity 
\begin_inset Formula $e$
\end_inset

 is, of course, no move at all.
 The four neighboring edges are marked with 
\begin_inset Formula $L$
\end_inset

, 
\begin_inset Formula $R$
\end_inset

, 
\begin_inset Formula $L^{-1}$
\end_inset

 and 
\begin_inset Formula $R^{-1}$
\end_inset

; the arrowheads show how the central arrowhead travels, as the moves are
 applied.
 
\end_layout

\begin_layout Standard
Examining this figure, the moves 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 now clearly seem to be able to act without limitation, as the root no longer
 prevents an arbitrary length string of 
\begin_inset Formula $L^{-1}$
\end_inset

 and 
\begin_inset Formula $R^{-1}$
\end_inset

 from being applied.
 Thus, naively, it would seem that this simple trick allows the action of
 the free group 
\begin_inset Formula $F_{\{L,R\}}$
\end_inset

 in two letters 
\begin_inset Formula $\{L,R\}$
\end_inset

 to be defined on the unrooted infinite tree.
 However, something funny happens when one starts considering some non-trivial
 concatenations of moves.
 Consider, for example, the sequence of moves 
\begin_inset Formula $LR^{-1}L$
\end_inset

, illustrated in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:A-three-point-turn"

\end_inset

.
 This is essentially the same as the three-point turn performed in an automobile
: one pulls forward 
\begin_inset Formula $L$
\end_inset

, turning, then back up 
\begin_inset Formula $R^{-1}$
\end_inset

, turning, and again pull forward 
\begin_inset Formula $L$
\end_inset

, straightening.
 The net result is that the car has been turned by 180 degrees!
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
A three-point turn
\begin_inset CommandInset label
LatexCommand label
name "fig:A-three-point-turn"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset VSpace defskip
\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename uturn.svg

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Of course, two such turns, back to back, rotate the car back into it's original
 position and direction.
 Thus, we conclude that, for the unrooted tree 
\begin_inset Formula $t$
\end_inset

, that there is a group action that is the identity 
\begin_inset Formula $LR^{-1}L^{2}R^{-1}Lt=t$
\end_inset

.
 We may interpret this formula in two ways: either we have the free group
 in two letters acting in an unfaithful, non-unique way on the tree, or
 we can think of the tree as imposing a condition on the group: that instead,
 we should look for a group that acts effectively.
 That is, we should impose the group identity 
\begin_inset Formula 
\begin{equation}
LR^{-1}L^{2}R^{-1}L=e\label{eq:grp identity}
\end{equation}

\end_inset

as a condition.
 In the next section, we shall see that this defines the modular group 
\begin_inset Formula $PSL(2,\mathbf{Z})$
\end_inset

.
 That is, we have that 
\begin_inset Formula 
\[
F_{\{L,R\}}/\{LR^{-1}L^{2}R^{-1}L=e\}=PSL(2,\mathbf{Z})
\]

\end_inset

This underlying identity provides the connection between the modular group,
 which is well-known in number theory and the theory of elliptical equations,
 and the period-doubling fractals.
 
\end_layout

\begin_layout Standard
Before exploring the group structure more fully, its worth doing a quick
 calculation.
 Choosing the matrix representation
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
L=\left[\begin{array}{cc}
1 & 0\\
1 & 1
\end{array}\right]\quad\mbox{ and }\quad R=\left[\begin{array}{cc}
1 & 1\\
0 & 1
\end{array}\right]
\]

\end_inset

one can quickly verify that 
\begin_inset Formula $LR^{-1}L^{2}R^{-1}L=-I$
\end_inset

 where 
\begin_inset Formula $I$
\end_inset

 is the identity matrix.
 It is the appearance of this minus sign that makes the resulting group
 
\begin_inset Formula $PSL(2,\mathbf{Z})$
\end_inset

 and not something else: we have to identify the matrices 
\begin_inset Formula $-I$
\end_inset

 and 
\begin_inset Formula $+I$
\end_inset

 both with the group element 
\begin_inset Formula $e$
\end_inset

, if we are to get the symmetries of the unrooted infinite binary tree.
 
\end_layout

\begin_layout Standard
The unrooted infinite tree of figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Unrooted-Tree"

\end_inset

 re-appears again in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Embedded-Tree"

\end_inset

, where it is embedded into the hyperbolic plane.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Geometry-and-Hyperbolic"

\end_inset

 explores the geometric and hyperbolic structures associated with it.
\end_layout

\begin_layout Subsection
Linear Groups 
\end_layout

\begin_layout Standard
Throughout the development above, various two by two matrices appeared and
 were employed in curious ways.
 It is now appropriate to review some of the properties of such matrices;
 they play many important roles in physics and mathematics, and so serve
 to tie the Minkowski question mark into these broader outlines.
 
\end_layout

\begin_layout Standard
The most general case is the 
\emph on
general linear group
\emph default
 
\begin_inset Formula $GL(2,\mathbb{C})$
\end_inset

.
 This is the set of 2x2 matrices 
\begin_inset Formula 
\begin{equation}
A=\left[\begin{array}{cc}
a & b\\
c & d
\end{array}\right]\label{eq:matrix}
\end{equation}

\end_inset

with entries 
\begin_inset Formula $a,b,c,d\in\mathbb{C}$
\end_inset

 from the complex numbers, whose determinant 
\begin_inset Formula $ad-bc\ne0$
\end_inset

 is not zero.
 The non-vanishing determinant means that a given matrix may be inverted;
 as groups must always contain their inverse.
 
\end_layout

\begin_layout Standard
Thanks to the Möbius transformation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Mobius xform"

\end_inset

, this group can be seen to act on the complex plane, taking a value 
\begin_inset Formula $z\in\mathbb{C}$
\end_inset

 to a value 
\begin_inset Formula $(az+b)/(cz+d)$
\end_inset

.
 In fact, it acts on the upper half-plane, as it can be shown that Möbius
 transformations always take complex numbers with a positive imaginary part
 to another complex number with positive imaginary part.
 The Möbius transformation introduces a bit of redundancy, however, as both
 
\begin_inset Formula $A$
\end_inset

 and 
\begin_inset Formula $-A$
\end_inset

 result in the same transformation.
 Thus, it is common to introduce 
\begin_inset Formula $PGL(2,\mathbb{C})$
\end_inset

, the 
\emph on
projective linear group
\emph default
.
 It is obtained by moding out by plus and minus the identity matrix 
\begin_inset Formula $I$
\end_inset

: 
\begin_inset Formula 
\[
PGL(2,\mathbb{C})=GL(2,\mathbb{C})/\left\{ +I,-I\right\} 
\]

\end_inset

The cosets of 
\begin_inset Formula $PGL(2,\mathbb{C})$
\end_inset

 are 
\begin_inset Formula $\left\{ +A,-A\right\} $
\end_inset

 of matrices together with their negative.
 The group 
\begin_inset Formula $PGL(2,\mathbb{C})$
\end_inset

 finds a remarkable application in the theory of 3-manifolds, as it is able
 to represent the set of conformal (angle-preserving) maps of a three-dimensiona
l ball into three-dimensional space
\begin_inset CommandInset citation
LatexCommand cite
key "Mas88,Matsu98"
literal "true"

\end_inset

.
 
\end_layout

\begin_layout Standard
The determinant is an overall scaling factor that can be scaled away, and
 so the 
\emph on
special linear group
\emph default
 
\begin_inset Formula $SL(2,\mathbb{C})$
\end_inset

 consists of matrices with unit determinant.
 This again forms a group, since, for any two matrices 
\begin_inset Formula $A,B$
\end_inset

, one has 
\begin_inset Formula $\det AB=\det A\,\det B$
\end_inset

.
 The special linear group is remarkable for several distinct reasons.
 First, a map of the (whole) complex plane to (all of) itself is conformal
 if and only if it is an element of 
\begin_inset Formula $SL(2,\mathbb{C})$
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "Ran77"
literal "true"

\end_inset

.
 In physics, specifically in special relativity, it describes the transformation
 properties of a spinor under special-relativistic changes of coordinates.
 The product of 
\begin_inset Formula $SL(2,\mathbb{C})$
\end_inset

 and its complex conjugate forms the adjoint representation of 
\begin_inset Formula $SO(3,1)$
\end_inset

, which is the Lorentz group, which describes the transformation of vectors
 in special relativity
\begin_inset CommandInset citation
LatexCommand cite
key "Carm77"
literal "true"

\end_inset

.
 
\end_layout

\begin_layout Standard
It is often convenient to work with the group 
\begin_inset Formula $S^{*}L(2,\mathbb{C})$
\end_inset

, which is defined as the group of 2x2 matrices whose determinant is +1
 
\emph on
or
\emph default
 -1.
 It was already noted above that the partial convergents of a continued
 fraction, when arranged into a 2x2 matrix, will have a determinant of +1
 or -1.
 Finally, 
\begin_inset Formula $PS^{*}L(2,\mathbb{C})=S^{*}L(2,\mathbb{C})/\left\{ +I,-I\right\} $
\end_inset

 is the projective version.
 Since the determinant of both plus and minus the identity is +1, the projective
 case does not mix the signs of the determinants! This is an important yet
 sometimes confusing detail: in two dimensions, 
\begin_inset Formula $\det-I=\det\,I=1$
\end_inset

.
\end_layout

\begin_layout Standard
Restricting the matrix entries to real numbers, one obtains 
\begin_inset Formula $SL(2,\mathbb{R})$
\end_inset

, the 
\emph on
special linear group over the reals
\emph default
.
 The projective linear group over the reals 
\begin_inset Formula $PSL(2,\mathbb{R})$
\end_inset

 plays an important role in the theory of Riemann surfaces, as it is the
 group of all orientation-preserving isometries of the upper half-plane.
 
\end_layout

\begin_layout Standard
The remainder of this article concerns itself with 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset

, the group of invertible 2x2 matrices with integer coefficients, and its
 subgroups 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 and 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

.
 Note that 
\begin_inset Formula $S^{*}L(2,\mathbb{Z})=GL(2,\mathbb{Z})$
\end_inset

, since, if a 2x2 matrix has integer entries and is invertible, it must
 necessarily have a determinant equal to +1 or -1.
 The subgroup 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 consists of those matrices that have unit determinant.
 The subgroup 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

 consists of those matrices that have unit determinant, and where we are
 free to ignore an overall sign.
\end_layout

\begin_layout Subsection
The Modular Group
\end_layout

\begin_layout Standard
The projective linear group of two by two matrices with integer coefficients
 is 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

.
 This group plays an over-arching role in number theory, and has many fascinatin
g properties
\begin_inset CommandInset citation
LatexCommand cite
key "Ran77,Apo90"
literal "true"

\end_inset

.
 Its most important property is that it is the group of isomorphisms of
 the planar grid of parallelograms.
 Take, for example, the square grid of all points 
\begin_inset Formula $(m,n)$
\end_inset

 for integers 
\begin_inset Formula $m,n$
\end_inset

.
 This lattice is generated by two vectors 
\begin_inset Formula $e_{1}$
\end_inset

 and 
\begin_inset Formula $e_{2}$
\end_inset

 
\begin_inset Formula 
\[
e_{1}=\left[\begin{array}{c}
1\\
0
\end{array}\right]\quad\mbox{ and }\quad e_{2}=\left[\begin{array}{c}
0\\
1
\end{array}\right]
\]

\end_inset

in that the linear combinations 
\begin_inset Formula $v=me_{1}+ne_{2}$
\end_inset

 visit every lattice point.
 These two generators are not unique; so, for example, 
\begin_inset Formula $(1,-2)$
\end_inset

 and 
\begin_inset Formula $(0,1)$
\end_inset

 will also generate the lattice.
 The general case is invariant under transformation by any matrix 
\begin_inset Formula $A\in SL(2,\mathbb{Z})$
\end_inset

; that is, if the two vectors 
\begin_inset Formula $e_{1}$
\end_inset

 and 
\begin_inset Formula $e_{2}$
\end_inset

 generate the grid, then so do 
\begin_inset Formula $Ae_{1}$
\end_inset

 and 
\begin_inset Formula $Ae_{2}$
\end_inset

.
 Conversely, any pair of generators of the grid can be expressed as a pair
 of columns in a matrix in 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

.
 
\end_layout

\begin_layout Standard
The connection to fractions follows from the fact that the matrix entries
 are all relatively prime to one another.
 Writing the matrix as 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:matrix"

\end_inset

, one has that the pair of integers 
\begin_inset Formula $(a,b)$
\end_inset

 have no common factors, and so the fraction 
\begin_inset Formula $a/b$
\end_inset

 is in lowest common terms, as are the fractions 
\begin_inset Formula $b/c$
\end_inset

, 
\begin_inset Formula $c/d$
\end_inset

 and 
\begin_inset Formula $d/a$
\end_inset

.
 
\end_layout

\begin_layout Standard
The connection to the Minkowski Question Mark becomes visible when one tries
 to enumerate all of the possible elements of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

.
 There are several ways in which this is commonly done.
 One way is to discover that 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

 is isomorphic to the free group 
\begin_inset Formula $\mathbb{Z}_{2}*\mathbb{Z}_{3}$
\end_inset

.
 That is, one defines two matrices 
\begin_inset Formula $V,P$
\end_inset

 as 
\begin_inset Formula 
\[
V=\left[\begin{array}{cc}
0 & -1\\
1 & 0
\end{array}\right]\quad\mbox{ and }\quad P=\left[\begin{array}{cc}
0 & -1\\
1 & 1
\end{array}\right]
\]

\end_inset

which have the property that 
\begin_inset Formula $V^{2}=P^{3}=-I$
\end_inset

.
 It may then be shown that every element 
\begin_inset Formula $A\in SL(2,\mathbb{Z})$
\end_inset

 may be written as 
\begin_inset Formula 
\begin{equation}
A=\left(-I\right)^{r}P^{p_{0}}VP^{p_{1}}VP^{p_{3}}V\cdots VP^{p_{n}}\label{eq:VP elt}
\end{equation}

\end_inset

for some finite integer 
\begin_inset Formula $n$
\end_inset

.
 Furthermore, it can be shown that this enumeration is unique
\begin_inset CommandInset citation
LatexCommand cite
key "Ran77"
literal "true"

\end_inset

, provided one sticks to the enumeration that 
\begin_inset Formula $r$
\end_inset

 can be only zero or one, 
\begin_inset Formula $p_{0}$
\end_inset

 and 
\begin_inset Formula $p_{n}$
\end_inset

 can take the values 0,1,2 and the remaining 
\begin_inset Formula $p_{k}$
\end_inset

 can only take the values 1,2.
 By 
\begin_inset Quotes eld
\end_inset

ignoring
\begin_inset Quotes erd
\end_inset

 the value of 
\begin_inset Formula $r$
\end_inset

, one gets an element of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

.
 
\end_layout

\begin_layout Standard
The enumeration can be accomplished by using elements of the dyadic rationals
 
\begin_inset Formula $\mathbb{Q}_{2}$
\end_inset

 (eqn 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:p-adic rationals"

\end_inset

) to encode the values 
\begin_inset Formula $p_{k}$
\end_inset

.
 Explicitly, write an element of 
\begin_inset Formula $\mathbb{Q}_{2}$
\end_inset

 on the unit interval as
\begin_inset Formula 
\[
x=\sum_{k=1}^{n+1}b_{k}2^{-k}
\]

\end_inset

with 
\begin_inset Formula $b_{k}\in\left\{ 0,1\right\} $
\end_inset

.
 For each such 
\begin_inset Formula $x$
\end_inset

, set 
\begin_inset Formula $p_{k}=b_{k+1}+1$
\end_inset

; this gives an element 
\begin_inset Formula $x\mapsto A(x)$
\end_inset

.
 Seven additional elements can be obtained by multiplying 
\begin_inset Formula $A(x)$
\end_inset

 by 
\begin_inset Formula $P$
\end_inset

 on the left, the right, or multiplying by -1, thus allowing 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 to be enumerated by elements of 
\begin_inset Formula $\mathbb{Z}_{2}\times\mathbb{Z}_{2}\times\mathbb{Z}_{2}\times\mathbb{Q}_{2}$
\end_inset

.
 We shall call this the 
\begin_inset Quotes eld
\end_inset

dyadic enumeration
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Visualization
\begin_inset CommandInset label
LatexCommand label
name "fig:Visualization"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename lattice.png
	width 90col%

\end_inset


\end_layout

\begin_layout Plain Layout
This figure provides a visualization of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 as Möbius transforms acting on the unit square.
 Specifically, every possible matrix 
\begin_inset Formula $A$
\end_inset

 given by eqn 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:VP elt"

\end_inset

 (with no initial 
\begin_inset Formula $P$
\end_inset

 and with a trailing 
\begin_inset Formula $V$
\end_inset

) is generated, corresponding to all dyadics with denominator less than
 or equal to 
\begin_inset Formula $2^{12}$
\end_inset

.
 Each such 
\begin_inset Formula $A$
\end_inset

 is then treated as a Mobius transform 
\begin_inset Formula $y=(ax+b)/(cx+d)$
\end_inset

.
 A density scatterplot is then taken of the points 
\begin_inset Formula $(x,\left\lfloor y\right\rfloor )$
\end_inset

 with uniform distribution for 
\begin_inset Formula $x$
\end_inset

 combined with a unform distribution for 
\begin_inset Formula $y$
\end_inset

.
 The brighter/redder the color, the greater the density.
 Note how the diagonals resemble those of figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Rotatate-unit-interval"

\end_inset

.
 The same scatterplot, using elements starting with 
\begin_inset Formula $P$
\end_inset

 looks the same, but with the diagonals missing.
 It should be clear that the intersection of a horizonatal or a vertical
 line with this plot will have the distribution shown in figure XXX (wtf,
 where is the measure?)
\end_layout

\begin_layout Plain Layout
\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
figure generated by code in /fractal/misc/lattice/lattice.cc and ./cvt.sh
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
A different pair of generators 
\begin_inset Formula $L,R$
\end_inset

 (for 
\begin_inset Quotes eld
\end_inset

left
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

right
\begin_inset Quotes erd
\end_inset

) may be obtained by defining 
\begin_inset Formula 
\[
L=V^{-1}P^{2}=-VP^{2}=\left[\begin{array}{cc}
1 & 0\\
1 & 1
\end{array}\right]\quad\mbox{ and }\quad R=V^{-1}P=-VP=\left[\begin{array}{cc}
1 & 1\\
0 & 1
\end{array}\right]
\]

\end_inset

The next section will show that these correspond to left and right moves
 on the binary tree, from which they earn their name.
 Using these definitions of 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

, the enumeration 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:VP elt"

\end_inset

 can be brought into the unique form 
\begin_inset Formula 
\begin{equation}
A=\left(-I\right)^{s}\left(R^{-1}L\right)^{p_{0}}L^{a_{1}-1}R^{a_{2}}L^{a_{3}}\cdots R^{a_{n}}\left(R^{-1}LR^{-1}\right)^{v_{0}}\label{eq:RL elt}
\end{equation}

\end_inset

for finite 
\begin_inset Formula $n$
\end_inset

.
 As before, this is a unique enumeration of the elements of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

.
 Here, 
\begin_inset Formula $s$
\end_inset

 can be only zero or one.
 The value of 
\begin_inset Formula $p_{0}$
\end_inset

 is exactly as before, since 
\begin_inset Formula $P=R^{-1}L$
\end_inset

.
 There may or may not be a terminating 
\begin_inset Formula $V=R^{-1}LR^{-1}$
\end_inset

, so that 
\begin_inset Formula $v_{0}$
\end_inset

 is 0 or 1, depending on whether 
\begin_inset Formula $p_{n}$
\end_inset

 was zero or not.
 The remaining coefficients 
\begin_inset Formula $a_{k}$
\end_inset

 are all positive integers, except for 
\begin_inset Formula $a_{n}$
\end_inset

 which may be zero, so as to describe the general case.
 Clearly, the integers 
\begin_inset Formula $a_{k}$
\end_inset

 offer a run-length encoding of the number of times that 
\begin_inset Formula $p_{j}$
\end_inset

 is one or two: 
\begin_inset Formula 
\[
\begin{array}{cccccc}
A=\left(-I\right)^{r+a_{1}+\cdots+a_{n}}P^{p_{0}} & \underbrace{VP^{2}VP^{2}\cdots VP^{2}} & \underbrace{VPVP\cdots VP} & \underbrace{VP^{2}VP^{2}\cdots VP^{2}} & \cdots & \underbrace{VPVP\cdots VP}\left(V\right)^{v_{0}}\\
 & a_{1}-1 & a_{2} & a_{3} &  & a_{n}
\end{array}
\]

\end_inset

This form makes it clear that the elements of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 can be enumerated by writing a rational number 
\begin_inset Formula $q$
\end_inset

 as finite-length continued fraction.
 That is, let 
\begin_inset Formula $q\in\mathbb{Q}$
\end_inset

 on the unit interval be written as
\begin_inset Formula 
\[
q=[0;a_{1},a_{2},a_{3},\cdots]
\]

\end_inset

then the corresponding 
\begin_inset Formula $q\mapsto A(q)$
\end_inset

 belongs to 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

.
 There are 11 additional elements that correspond to this 
\begin_inset Formula $q$
\end_inset

, since 
\begin_inset Formula $s$
\end_inset

 and 
\begin_inset Formula $v_{0}$
\end_inset

 can take one of two values, and 
\begin_inset Formula $p_{0}$
\end_inset

 one of three.
 Thus, the elements of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 can be enumerated by 
\begin_inset Formula $\mathbb{Z}_{2}\times\mathbb{Z}_{2}\times\mathbb{Z}_{3}\times\mathbb{Q}$
\end_inset

.
 There are more enumerations possible; others will be given below.
\end_layout

\begin_layout Standard
The 
\begin_inset Formula $L,R$
\end_inset

 form of the group elements begs the question, what happens if some of the
 
\begin_inset Formula $a_{k}$
\end_inset

 are negative? Although legitimate group elements result, the enumeration
 is no longer unique.
 In particular, 
\begin_inset Formula $L^{-1}=-PV$
\end_inset

 and 
\begin_inset Formula $R^{-1}=-PV^{2}$
\end_inset

 and so strings containing negative powers of 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 can be converted to strings containing only positive powers, after re-grouping
 terms.
 
\end_layout

\begin_layout Standard
The identity 
\begin_inset Formula $P^{3}=V^{2}=-I$
\end_inset

 with 
\begin_inset Formula $P=R^{-1}L$
\end_inset

 and 
\begin_inset Formula $V=-L^{-1}RL^{-1}$
\end_inset

 leads to the curious identity 
\begin_inset Formula $LR^{-1}L=R^{-1}LR^{-1}$
\end_inset

.
 This is reminiscent of the identities defining the braid group.
 The braid group describes what happens when one inter-twines a set of strands,
 that is, when one braids them.
 The braid group, in a certain sense, generalizes the permutation group,
 in that, instead of just permuting objects, one tracks their histories
 as well, by attaching world-line paths or strings to show where they came
 from.
 The general braid group 
\begin_inset Formula $B_{n}$
\end_inset

 of 
\begin_inset Formula $n$
\end_inset

 strands has 
\begin_inset Formula $n-1$
\end_inset

 generators 
\begin_inset Formula $b_{k}$
\end_inset

, which represent the right-handed exchange of a pair of neighboring strands.
 These obey the relations 
\begin_inset Formula $b_{k}b_{k+1}b_{k}=b_{k+1}b_{k}b_{k+1}$
\end_inset

, which show that there are two equivalent ways to exchange a neighboring
 set of three strands in the braid.
 There are no additional relations between the 
\begin_inset Formula $b_{k}$
\end_inset

.
 For the case of 
\begin_inset Formula $n=3$
\end_inset

, the braid group 
\begin_inset Formula $B_{3}$
\end_inset

 has two generators, 
\begin_inset Formula $b_{0}$
\end_inset

 and 
\begin_inset Formula $b_{1}$
\end_inset

.
 Identifying 
\begin_inset Formula $b_{0}=L$
\end_inset

 and 
\begin_inset Formula $b_{1}=R^{-1}$
\end_inset

, it is clear that the braid group 
\begin_inset Formula $B_{3}$
\end_inset

 has a representation in terms of 2x2 matrices.
 As there are no further relations between 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

, then clearly, 
\begin_inset Formula $B_{3}$
\end_inset

 is isomorphic to 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

[xxx provide ref].
 
\end_layout

\begin_layout Standard
Rather remarkably, the free group in two letters appears as a subgroup of
 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

! This can be most easily shown by re-interpreting the (free) monodromy
 group around two branch points as a subgroup of the braid group.
 It is well known that the set of homotopy loops that can be cast around
 two points forms the free group 
\begin_inset Formula $\mathbb{Z}*\mathbb{Z}$
\end_inset

 in two letters.
 That is, letting 
\begin_inset Formula $X$
\end_inset

 denote a loop that winds around one point, and 
\begin_inset Formula $Y$
\end_inset

 a loop around the other point, a general element of the free group is 
\begin_inset Formula $X^{k}Y^{m}X^{n}Y^{p}\cdots$
\end_inset

, where 
\begin_inset Formula $k,m,n$
\end_inset

 and 
\begin_inset Formula $p$
\end_inset

 are any, positive or negative, integers, with no further constraints on
 what values can appear.
 Fixing two strands of the braid group 
\begin_inset Formula $B_{3}$
\end_inset

 so that they are rigid and not movable, the third strand can be made to
 wind around the first two, as long as its tip always returns to its starting
 position.
 Clearly, the third strand can wind around in every which way, thus forming
 the free group.
 In terms of the group generators, these moves correspond to 
\begin_inset Formula $X=b_{0}^{2}=L^{2}$
\end_inset

 and 
\begin_inset Formula $Y=b_{1}^{2}=R^{-2}$
\end_inset

.
 Because only the squares appear, the previously established identity 
\begin_inset Formula $LR^{-1}L=R^{-1}LR^{-1}$
\end_inset

 cannot be applied to limit which combinations of 
\begin_inset Formula $X$
\end_inset

 and 
\begin_inset Formula $Y$
\end_inset

 are unique.
\end_layout

\begin_layout Standard
Another commonly used pair of generators are 
\begin_inset Formula $S,T$
\end_inset

 with 
\begin_inset Formula $S=V$
\end_inset

 and 
\begin_inset Formula $T=R$
\end_inset

.
 These are of interest primarily because the Möbius transformations 
\begin_inset Formula $S\tau=-1/\tau$
\end_inset

 and 
\begin_inset Formula $T\tau=\tau+1$
\end_inset

 give a particularly simple form to the invariance properties of modular
 forms
\begin_inset CommandInset citation
LatexCommand cite
key "Apo90"
literal "true"

\end_inset

.
 The general group element 
\begin_inset Formula $B\in SL(2,\mathbb{Z})$
\end_inset

 may be written as 
\begin_inset Formula 
\begin{equation}
B=T^{m_{1}}ST^{m_{2}}ST^{m_{3}}S\cdots ST^{m_{n}}\label{eq:ST elts}
\end{equation}

\end_inset

for some integers 
\begin_inset Formula $m_{k}$
\end_inset

, which may be taken to be positive or negative.
 In this case, the representation is not unique, as again, negative powers
 may be converted to positive powers.
 Comparing to the left-right generators, one has 
\begin_inset Formula $L=-TST$
\end_inset

 and so 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
L^{a_{1}-1}R^{a_{2}}L^{a_{3}}\cdots R^{a_{n}}=\left(-I\right)^{a_{1}+a_{3}+\cdots-1}T\left(ST^{2}\right)^{a_{1}-1}T^{a_{2}}\left(ST^{2}\right)^{a_{3}}\cdots T^{a_{n}-1}
\]

\end_inset

The requirement for the enumeration 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:RL elt"

\end_inset

 to be unique was that all of the 
\begin_inset Formula $a_{k}$
\end_inset

 be positive integers.
 The equivalent requirement for uniqueness on the 
\begin_inset Formula $ST$
\end_inset

 enumeration then requires that, in general 
\begin_inset Formula $m_{k}\ge2$
\end_inset

.
 An intuitive way for understanding this is to note that 
\begin_inset Formula $P=ST$
\end_inset

, and so there are string identities such as 
\begin_inset Formula $STSTST=-I$
\end_inset

.
 
\end_layout

\begin_layout Standard
XXX Also mention symplectic group.
 
\end_layout

\begin_layout Section
Free Monoids
\end_layout

\begin_layout Standard
XXX ToDo, write this section.
 Discuss generalities first, then note all the things one can do with a
 binary tree.
\end_layout

\begin_layout Itemize
Define a free object.
\end_layout

\begin_layout Itemize
Define a free monoid.
 
\end_layout

\begin_layout Itemize
Define a presentation 
\end_layout

\begin_layout Itemize
Define an act of monoid on set, aka semiautomaton.
\end_layout

\begin_layout Itemize
Discuss presentations with torsion, vs.
 those with that remain free.
\end_layout

\begin_layout Standard
Figures:
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
p-adic Tree 
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename p-adic-tree.eps
	width 60text%

\end_inset


\end_layout

\begin_layout Plain Layout
Figure above shows a tree with p branches, made from a binary tree by equating
 nodes.
\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Polyhedra
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename cube.eps
	width 30text%

\end_inset


\end_layout

\begin_layout Plain Layout
This figure shows a binary tree wrapped onto a polyhedron, a cube in this
 particular case.
 Note that this implies that its a group, since inverse elements are now
 clear.
 Note that unlike the p-adic tree, this has only pure torsion.
 The general case is a labeled graph, aka a semiautomaton.
\end_layout

\begin_layout Plain Layout
Another case are walks on ZxZ, the square, flat euclidean grid.
 Here, we can take L to be walk up and R to walk right.
 Clearly this has all L's and R's commuting, so this is the fully commutative
 monoid, which extends to the free abelian group in two generators.
 
\end_layout

\begin_layout Plain Layout
The paritially commutative subsets are called 
\begin_inset Quotes eld
\end_inset

traces
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

history monoids
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

trace monoids
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes erd
\end_inset

semi-commutative monoids
\begin_inset Quotes erd
\end_inset

, and correspond to systms of communicating finite state machines.
\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The general case is a semiautomaton.
 Consider a finite set of states (aka graph vertices).
 Consider state transitions driven by L,R; these are labeled arrows from
 one state to another.
 Starting from any given node, these show how to project the binary tree
 onto the graph.
 A special case of this are polyhedra.
 The general case are the regular languages.
 
\end_layout

\begin_layout Standard
Note that alternating algebras i.e.
 Grassmanians, can be mapped into a binary tree.
 This includes in particular the superalgebras.
\end_layout

\begin_layout Standard
Other possible embeddings of subtrees into trees.
\end_layout

\begin_layout Standard
Consider, for example, the binary tree as the set of all possible strings
 in 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

.
 Pick two arbitrary elements 
\begin_inset Formula $\gamma_{1}$
\end_inset

 and 
\begin_inset Formula $\gamma_{2}$
\end_inset

 from the monoid, and make the identification 
\begin_inset Formula $L\mapsto\gamma_{1}$
\end_inset

 and 
\begin_inset Formula $R\mapsto\gamma_{2}$
\end_inset

.
 Then the resulting set of strings in 
\begin_inset Formula $\gamma_{1}$
\end_inset

 and 
\begin_inset Formula $\gamma_{2}$
\end_inset

 is then a subtree of dyadic tree, and is, in particular, once again a dyadic
 tree.
 There are an infinite number of such subtrees, and they need not even be
 regular as the one above.
 For any given leftwards or rightwards move, one can pick arbitrary some
 element 
\begin_inset Formula $\gamma$
\end_inset

 to stand in its place.
 Thus, the general infinite dyadic subtree can be represented by a countable
 set of monoid elements 
\begin_inset Formula $\{\gamma_{k}\vert k\in\mathbb{N}\}$
\end_inset

, with the identification that, given a string in 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

, the letter in the 
\begin_inset Formula $k$
\end_inset

'th position is replaced by 
\begin_inset Formula $\gamma_{2k+1}$
\end_inset

 or 
\begin_inset Formula $\gamma_{2k+2}$
\end_inset

; the root of the subtree being given by 
\begin_inset Formula $\gamma_{0}$
\end_inset

.
\end_layout

\begin_layout Standard
XXX ToDo: finish writing out the rest of this section.
\end_layout

\begin_layout Standard
The polyhedra correspond to automorphic forms.
 See geometry section below.
\end_layout

\begin_layout Standard
The general subsets correspond to regular languages that is, are isomorphic
 to finite state machines.
 This has two corollaries: 1) the number of finite state machines are countable.
 2) for every rational number, there is a finite state machine.
 There is an explicit coding– convert rational number to continued fraction.
 Convert continued fraction into binary rep.
 The repeated elements are the Kleene star elements of the regular language.
 An alternate way of thinking about this is that the Kleene-star elements
 correspond to the algebraic numbers (as per traditional Gauss continued
 fraction to algebraic number construction).
\end_layout

\begin_layout Standard
Also – many ODE/PDE numerical solvers can be understood as just small finite
 state machines acting on the 2-adic cantor-set representation of the real
 numbers.
 
\end_layout

\begin_layout Standard
Also – consider Simon Plouffe-type Ramanujan identities extended to automorphic
 forms, and thence to finite state machines.
 These come from theta-function type identities.
 Theta functions are just functions which are invariant for certain symmetries,
 and co-variant for others.
 They express a duality.
 between the torsion and torsion-free subgroups.
\end_layout

\begin_layout Section
Representations of the Dyadic Monoid
\end_layout

\begin_layout Standard
The dyadic monoid, defined as the abstract set 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dyadic monoid"

\end_inset

 of self-similarities, has several possible representations, in terms of
 matrices, as well as other objects.
 These are discussed in greater detail here.
\end_layout

\begin_layout Subsection
The Modular Representation
\end_layout

\begin_layout Standard
The generators 
\begin_inset Formula $g,r$
\end_inset

 of the self-similarities of the question mark, acting on the continued
 fractions, were given in equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:gr elts"

\end_inset

 as
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
g_{C}=\left[\begin{array}{cc}
1 & 0\\
1 & 1
\end{array}\right]\quad\mbox{ and }\quad r_{C}=\left[\begin{array}{cc}
-1 & 1\\
0 & 1
\end{array}\right]
\]

\end_inset

The subscript 
\begin_inset Formula $C$
\end_inset

 is used to indicate that these are the transformations discussed in section
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Representations-of-Real"

\end_inset

.
 These matrices do 
\emph on
not
\emph default
 belong to 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

, since the determinant of 
\begin_inset Formula $r_{C}$
\end_inset

 is -1.
 They do belong to 
\begin_inset Formula $S^{*}L(2,\mathbb{Z})=GL(2,\mathbb{Z})$
\end_inset

, the group of matrices with determinant +1 or -1.
 The group 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset

 can be built from 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 simply by adjoining a matrix 
\begin_inset Formula 
\[
N=\left[\begin{array}{cc}
1 & 0\\
0 & -1
\end{array}\right]
\]

\end_inset

 which has the property that 
\begin_inset Formula $N^{2}=1$
\end_inset

 and 
\begin_inset Formula $\det N=-1$
\end_inset

.
 This matrix, when used as a commutator, has the remarkable property of
 inverting 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

, so that 
\begin_inset Formula $NRN=R^{-1}$
\end_inset

 and 
\begin_inset Formula $NLN=L^{-1}$
\end_inset

.
 Then, using 
\begin_inset Formula $g_{C}=L$
\end_inset

 and 
\begin_inset Formula $r_{C}=-RN$
\end_inset

, the general self-similarity transform 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:general gr monoid elt"

\end_inset

 may be written as 
\begin_inset Formula 
\[
\gamma_{C}=g_{C}^{a_{1}}r_{C}g_{C}^{a_{2}}r_{C}\cdots r_{C}g_{C}^{a_{n}}=\begin{cases}
L^{a_{1}+1}R^{a_{2}}L^{a_{3}}\cdots R^{a_{n-1}}L^{a_{n}-1} & \;\mbox{ for }n\mbox{ odd}\\
F\,R^{a_{1}+1}L^{a_{2}}\cdots R^{a_{n-1}}L^{a_{n}-1} & \;\mbox{ for }n\mbox{ even}
\end{cases}
\]

\end_inset

 That is, the general element is a sequence of left and right moves.
 Here, for 
\begin_inset Formula $n$
\end_inset

 even, the letter 
\begin_inset Formula $F$
\end_inset

 was introduced to stand for a 
\begin_inset Quotes eld
\end_inset

flip
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Formula 
\[
F=VN=g_{C}^{-1}r_{C}g_{C}=\left[\begin{array}{cc}
0 & 1\\
1 & 0
\end{array}\right]
\]

\end_inset

in that it converts 
\begin_inset Formula $L$
\end_inset

's to 
\begin_inset Formula $R$
\end_inset

's when it commutes: 
\begin_inset Formula $LF=FR$
\end_inset

 and 
\begin_inset Formula $RF=FL$
\end_inset

.
 As a Möbius transform, 
\begin_inset Formula $F:x=1/x$
\end_inset

, while, for continued fractions, 
\begin_inset Formula $F:[a_{1},a_{2},\cdots]=[0,a_{1},a_{2},\cdots]$
\end_inset

.
 
\end_layout

\begin_layout Subsection
The Dyadic Representation as Affine Transformations
\end_layout

\begin_layout Standard
The action of 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 on the dyadic numbers, given in eqn 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dyadic g"

\end_inset

, can also be expressed in terms of 2x2 matrices.
 However, quite unlike the modular representation, these matrices are not
 at all a subset of 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset

.
 The action is that of a linear affine transformation.
 A general affine transformation is a map 
\begin_inset Formula 
\[
x\mapsto ax+b
\]

\end_inset

 Affine transformations can always be written as a matrix equation by taking
 
\begin_inset Formula $x$
\end_inset

 to be a vector, and bumping up the dimension of the vector by one.
 Thus, for example, one writes 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\left[\begin{array}{c}
1\\
x
\end{array}\right]\mapsto\left[\begin{array}{cc}
1 & 0\\
b & a
\end{array}\right]\left[\begin{array}{c}
1\\
x
\end{array}\right]=\left[\begin{array}{c}
1\\
ax+b
\end{array}\right]
\]

\end_inset

 The affine representation is then 
\begin_inset Formula 
\[
\left[\begin{array}{c}
1\\
\gamma_{D}(x)
\end{array}\right]=\gamma_{D}\cdot\left[\begin{array}{c}
1\\
x
\end{array}\right]=g_{D}^{a_{1}}r_{D}g_{D}^{a_{2}}r_{D}\cdots r_{D}g_{D}^{a_{N}}\cdot\left[\begin{array}{c}
1\\
x
\end{array}\right]
\]

\end_inset

 where 
\begin_inset Formula 
\begin{equation}
g_{D}=\left[\begin{array}{cc}
1 & 0\\
0 & \frac{1}{2}
\end{array}\right]\quad\mbox{ and }\quad r_{D}=\left[\begin{array}{cc}
1 & 0\\
1 & -1
\end{array}\right]\label{eq:g_D matrix}
\end{equation}

\end_inset

 It is straightforward to verify that this gives the expression 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dyadic gamma"

\end_inset

 for the action of a general monoid element on 
\begin_inset Formula $x$
\end_inset

.
 Although 
\begin_inset Formula $\gamma_{D}$
\end_inset

 is thus representable as a two-by-two matrix, it is utterly different from
 
\begin_inset Formula $\gamma_{C}$
\end_inset

.
 In particular, the determinant of 
\begin_inset Formula $\gamma_{D}$
\end_inset

is not 1.
 The 
\begin_inset Formula $\gamma_{D}$
\end_inset

 are lower-triangular, and thus generate a 
\begin_inset Quotes eld
\end_inset

Borel monoid
\begin_inset Quotes erd
\end_inset

 , in analogy to the name 
\begin_inset Quotes eld
\end_inset

Borel group
\begin_inset Quotes erd
\end_inset

 given to the group of upper-triangular matrices.
 
\end_layout

\begin_layout Subsection
Higher Dimensional Affine Representations
\end_layout

\begin_layout Standard
The dyadic representation can be generalized by using more general, 
\begin_inset Formula $N\times N$
\end_inset

 matrices in place of 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

.
 The full generalization is known as a 
\emph on
de Rham curve
\emph default
, and is discussed in a later section, below.
 A particularly noteworthy example, however, is the three-dimensional representa
tion, as it clearly embeds the dyadic representation.
 It occurs naturally in the description of the self symmetries of the Takagi
 curve.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:The-Takagi-Curve"

\end_inset

The Takagi Curve
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename takagi.png
	width 80text%

\end_inset


\end_layout

\begin_layout Plain Layout
The Takagi-Landsberg or Blancmange Curve.
\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The Takagi-Landsberg curve is shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Takagi-Curve"

\end_inset

.
 It is named after Teiji Takagi, who described it in 1901, proving that
 it was differentiable nowhere
\begin_inset CommandInset citation
LatexCommand cite
key "Tak1903,Man88"
literal "true"

\end_inset

.
 The curve may be constructed as a superposition of triangle waves
\begin_inset Formula 
\begin{equation}
t_{w}(x)=\sum_{n=0}^{\infty}w^{n}\tau^{n+1}(x)=\sum_{n=0}^{\infty}w^{n}\tau\left(2^{n}x\right)\label{eq:Takagi curve}
\end{equation}

\end_inset

 where 
\begin_inset Formula $\tau(x)$
\end_inset

 is the triangle wave 
\begin_inset Formula 
\[
\tau(x)=\begin{cases}
2x & \quad\mbox{ for }0\le x\le\frac{1}{2}\\
2(1-x) & \quad\mbox{ for }\frac{1}{2}\le x\le1
\end{cases}
\]

\end_inset

Here, 
\begin_inset Formula $\tau^{k}$
\end_inset

 simply denotes the 
\begin_inset Formula $k$
\end_inset

-times composition of 
\begin_inset Formula $\tau$
\end_inset

 with itself: 
\begin_inset Formula $\tau^{k}=\tau\circ\tau\circ\cdots\circ\tau$
\end_inset

.
 The variable 
\begin_inset Formula $w$
\end_inset

 is simply a parameter describing the curve; it may be taken as a real or
 complex value, but must have a magnitude of less than one in order for
 the series to converge.
 The figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Takagi-Curve"

\end_inset

 shows the curve for a parameter of 
\begin_inset Formula $w=0.618$
\end_inset

.
\end_layout

\begin_layout Standard
Visually, the Takagi curve has a clear self-similarity.
 The action of 
\begin_inset Formula $g$
\end_inset

 on 
\begin_inset Formula $t_{w}$
\end_inset

, understood to cut the interval in half, is to produce a scaled, sheared
 copy of itself:
\begin_inset Formula 
\[
\left[gt_{w}\right](x)=t_{w}\left(\frac{x}{2}\right)=x+wt_{w}(x)
\]

\end_inset

 By contrast, its left-right symmetry just means that 
\begin_inset Formula $rt_{w}=t_{w}$
\end_inset

.
 It is not hard to deduce that the action of a general element 
\begin_inset Formula $\gamma=g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}$
\end_inset

 on 
\begin_inset Formula $t_{w}$
\end_inset

 will be of the form 
\begin_inset Formula $a+bx+ct_{w}$
\end_inset

 for some constants 
\begin_inset Formula $a,b,c$
\end_inset

.
 This may be recognized immediately as a three-dimensional vector, and so
 the action of 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 can be given as operators acting on a three-dimensional space.
 Its also not hard to see that the action is linear, and so 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 are given by 3x3 matrices.
 Their explicit form may be given by making the identification of 
\begin_inset Formula $1$
\end_inset

, 
\begin_inset Formula $x$
\end_inset

 and 
\begin_inset Formula $t_{w}$
\end_inset

 as the basis vectors of the three dimensional space:
\begin_inset Formula 
\begin{eqnarray*}
1\;\longmapsto\;e_{1} & = & \left[\begin{array}{c}
1\\
0\\
0
\end{array}\right]\\
x\;\longmapsto\;e_{2} & = & \left[\begin{array}{c}
0\\
1\\
0
\end{array}\right]\\
t_{w}(x)\;\longmapsto\;e_{3} & = & \left[\begin{array}{c}
0\\
0\\
1
\end{array}\right]
\end{eqnarray*}

\end_inset

 The transformation of each of these under 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 are given by
\begin_inset Formula 
\[
g_{3}=\left[\begin{array}{ccc}
1 & 0 & 0\\
0 & \frac{1}{2} & 0\\
0 & 1 & w
\end{array}\right]\quad\mbox{ and }\quad r_{3}=\left[\begin{array}{ccc}
1 & 0 & 0\\
1 & -1 & 0\\
0 & 0 & 1
\end{array}\right]
\]

\end_inset

Note that the upper-right 2x2 subparts of these matrices are just exactly
 
\begin_inset Formula $g_{D}$
\end_inset

 and 
\begin_inset Formula $r_{D}$
\end_inset

 given above, in equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:g_D matrix"

\end_inset

, which describe the action on the subspace spanned by 
\begin_inset Formula $(e_{1},e_{2})=(1,x)$
\end_inset

.
 
\end_layout

\begin_layout Standard
A similar curve, transforming as a four-dimensional representation, may
 be constructed from sections of a parabola; a five-dimensional representation
 can be built from sections of a cubic, and so on; this is explored in greater
 detail in 
\begin_inset CommandInset citation
LatexCommand cite
key "Ve-T04"
literal "true"

\end_inset

.
 The development begs several questions: what happens when 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 are replaced by general matrices, and even more generally, what happens
 when 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 are replaced by general maps? This is explored in the next section.
\end_layout

\begin_layout Subsection
Sequences
\end_layout

\begin_layout Standard
The above can be extended to various integer sequences, such as the 
\begin_inset Quotes eld
\end_inset

fusc
\begin_inset Quotes erd
\end_inset

 sequence of the Calkin-Wilf tree – the fusc sequence gives the denominators
 of the Stern-Brocot tree.
 Likewise, the 
\begin_inset Quotes eld
\end_inset

batrachions
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout Itemize
http://mathworld.wolfram.com/Hofstadter-Conway10000-DollarSequence.html
\end_layout

\begin_layout Itemize
http://mathworld.wolfram.com/MallowsSequence.html
\end_layout

\begin_layout Itemize
http://mathworld.wolfram.com/HofstadtersQ-Sequence.html
\end_layout

\begin_layout Standard
Also some discussion of Pompeiu functions that are self-similar.
\end_layout

\begin_layout Subsection
The Interval Map Representation
\end_layout

\begin_layout Standard
Every element of the dyadic monoid corresponds uniquely to a node in the
 infinite binary tree.
 There are several ways to see this.
 First, the letters 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 may be taken to be the left and right moves through the binary tree; thus,
 any finite string consisting of the letters 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 uniquely specify a node on the tree.
 Alternately, 
\begin_inset Formula $g$
\end_inset

 may be taken as a left-ward move on the tree, while 
\begin_inset Formula $r$
\end_inset

 may be taken as a left-right reflection of the entire tree.
 Again, a finite-length string consisting of the letters 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 then uniquely identifies a node in the binary tree.
 It doesn't matter which navigation system is used; either can be converted
 to the other.
 
\end_layout

\begin_layout Standard
The subtree under a node on the tree represents an interval: the subtree
 encompasses everything from the left-most to the right-most sides of the
 subtree.
 Thus, the action of the dyadic monoid on the tree can be understood to
 be the action of a set of maps that map intervals to sub-intervals.
 Each interval is the range of a self-similarity map.
 To different interval maps were already given; these are 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dyadic gamma"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:modular gamma"

\end_inset

.
 
\end_layout

\begin_layout Standard
The endpoints of an interval are the sup and inf of all the values on the
 corresponding subtree.
 For the Farey tree, the endpoints are always rational; for the dyadic tree,
 they are dyadics.
 That they are rational is most easily demonstrated by noting that the interval
 is the range of an interval map, so the endpoints are given by 
\begin_inset Formula $\gamma(0)$
\end_inset

 and 
\begin_inset Formula $\gamma(1)$
\end_inset

.
 For the modular map 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:modular gamma"

\end_inset

, one endpoint is given by the rational number 
\begin_inset Formula $\gamma_{C}(0)=[a_{1}+1,a_{2},a_{3},...,a_{N-1}]$
\end_inset

 (note the missing 
\begin_inset Formula $a_{N}$
\end_inset

).
 The other endpoint is 
\begin_inset Formula $\gamma_{C}(1)=[a_{1}+1,a_{2},a_{3},...,a_{N}]$
\end_inset

 when 
\begin_inset Formula $a_{N}\geq1$
\end_inset

, although it must be written as 
\begin_inset Formula $\gamma_{C}(1)=[a_{1}+1,a_{2},a_{3},...,a_{N-2}]$
\end_inset

 when 
\begin_inset Formula $a_{N}=0$
\end_inset

; this last special case is really just a reversal of the two endpoints.
 By considering interval endpoints, the question mark isomorphism 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:q-mark isomorph"

\end_inset

 can be written in the shorter form
\begin_inset Formula 
\[
?(\gamma_{C}(x))=?(\gamma_{C}(0))+\frac{\left(-1\right)^{N+1}}{\left(2^{a_{1}+a_{2}+...+a_{N}}\right)}?(x)
\]

\end_inset


\end_layout

\begin_layout Standard
The endpoints of an interval are not completely arbitrary, but are correlated.
 Although one endpoint can be picked freely, so, one can pick an arbitrary
 
\begin_inset Formula $\gamma_{C}(0)=p/q\in\mathbb{Q}$
\end_inset

, the choice for the other endpoint is limited: the other end of the interval
 is given by 
\begin_inset Formula $a_{N}\in\mathbb{N}$
\end_inset

 a positive integer.
 Since intervals correspond to elements of the dyadic monoid 
\begin_inset Formula $M$
\end_inset

, elements of 
\begin_inset Formula $M$
\end_inset

 may be enumerated by 
\begin_inset Formula $\mathbb{Q}\times\mathbb{N}$
\end_inset

.
 This, of course, is hardly the only possible enumeration: of course, the
 intervals could have been enumerated by the node at the root of the tree;
 for the Farey tree, this node is a unique rational number, and so the intervals
 could be equally well enumerated just by 
\begin_inset Formula $\mathbb{Q}$
\end_inset

 alone.
 The difference between these two schemes is, of course, just Hilbert's
 infinite hotel.
\end_layout

\begin_layout Standard
The idea of self-similar maps that map intervals to sub-intervals is appealing
 because of its simple intuitive connection to many common fractals.
 When looking at the Koch snowflake curve, for example, one feels that one
 can point anywhere to find a self-similar copy: this is the freedom of
 choosing one endpoint to belong to 
\begin_inset Formula $\mathbb{Q}$
\end_inset

.
 But to find the entire run of the self-similar part, one's choices are
 far more limited: only certain strict sub-intervals appear; this is the
 more limited choice of 
\begin_inset Formula $\mathbb{N}$
\end_inset

 for the other endpoint.
 Thus, the 
\begin_inset Formula $\mathbb{Q}\times\mathbb{N}$
\end_inset

 enumeration of intervals is in this sense one of the more intuitive ways
 of specifying elements of the dyadic monoid.
 
\end_layout

\begin_layout Subsection
The Cantor Set
\end_layout

\begin_layout Standard
The interval maps given by equations 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:dyadic gamma"

\end_inset

 or 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:modular gamma"

\end_inset

 can be generalized in several different ways.
 These maps had several properties:
\end_layout

\begin_layout Enumerate
The maps 
\begin_inset Formula $L(x)$
\end_inset

 and 
\begin_inset Formula $R(x)$
\end_inset

 are maps from the unit interval to the unit interval.
\end_layout

\begin_layout Enumerate
The maps 
\begin_inset Formula $L(x)$
\end_inset

 and 
\begin_inset Formula $R(x)$
\end_inset

 together are surjective onto the unit interval.
 That is, the union of the range of 
\begin_inset Formula $L$
\end_inset

 and the range of 
\begin_inset Formula $R$
\end_inset

 together cover the whole interval.
 There are no gaps.
\end_layout

\begin_layout Enumerate
The range of 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 intersect at exactly one point: 
\begin_inset Formula $L(1)=R(0)$
\end_inset

.
 
\end_layout

\begin_layout Enumerate
The maps 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 meet exactly in the middle; that is, 
\begin_inset Formula $L(1)=R(0)=1/2$
\end_inset

.
\end_layout

\begin_layout Standard
One possible generalization is to relax the first condition, to let 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 be endomorphisms of some general space 
\begin_inset Formula $X$
\end_inset

.
 The result of this generalization is the de Rham curve
\begin_inset CommandInset citation
LatexCommand cite
key "DeR57"
literal "true"

\end_inset

, a continuous curve in the space 
\begin_inset Formula $X$
\end_inset

.
 The construction of this curve is briefly reviewed in the next section.
\end_layout

\begin_layout Standard
Another possibility is to relax the second condition (and so also the third
 and fourth).
 The result of doing so is the Cantor set.
 So, for example, the standard construction of the Cantor set may be given
 as follows.
 Let 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 be the maps 
\begin_inset Formula 
\begin{eqnarray*}
L(x) & = & x/3\\
R(x) & = & (2+x)/3
\end{eqnarray*}

\end_inset

 so that 
\begin_inset Formula $L$
\end_inset

 maps the closed unit interval 
\begin_inset Formula $[0,1]$
\end_inset

 to the closed interval 
\begin_inset Formula $[0,1/3]$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 maps it to 
\begin_inset Formula $[2/3,1]$
\end_inset

.
 Effectively, the open interval 
\begin_inset Formula $(1/3,2/3)$
\end_inset

 in the middle has been excluded.
 But this is just the first step of the standard construction of the Cantor
 set: the removal of the middle third.
 This first step corresponds to the first level of the binary tree: there
 are two branches, and the middle has been excluded.
 Repeating this process, it should be clear that what remains, after an
 infinite number of steps, is the Cantor set.
 Furthermore, it should be clear that every remaining element of the Cantor
 set can be assigned a unique label, an infinite string of 
\begin_inset Formula $L$
\end_inset

's and 
\begin_inset Formula $R$
\end_inset

's applied in succession.
 The Cantor set can be visualized as the limit of the infinite binary tree:
 it is the set of 
\begin_inset Quotes eld
\end_inset

leaves
\begin_inset Quotes erd
\end_inset

 of the infinite binary tree.
 
\end_layout

\begin_layout Standard
All of the properties of the Cantor set are evident in the construction.
 The Cantor set is totally disconnected, in that, given one string of letters
 
\begin_inset Formula $L$
\end_inset

, 
\begin_inset Formula $R$
\end_inset

 specifying one path on the binary tree, every other string will take one
 to another point that is a finite distance away.
 The Cantor set is also a compact Hausdorff space.
 This may be argued by noting that the unit interval is a compact Hausdorff
 space, that both 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 are continuous maps, and that the continuous map of a Hausdorff space is
 a Hausdorff space.
 A totally disconnected, compact Hausdorff space is an example of a Stone
 space, a them that will be returned to when reconsidering the dyadic monoid
 as a semilattice.
\end_layout

\begin_layout Standard
There are several noteworthy corollaries of this exercise.
 First is that the dyadic representation of a real number is isomorphic
 to the Cantor set, in that if 
\begin_inset Formula $x=\sum_{n}b_{n}2^{-n}$
\end_inset

, the binary digits 
\begin_inset Formula $b_{n}$
\end_inset

 can be taken to be the moves 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 on the binary tree.
 Next, the maps 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 can be quite general.
 One need not remove the middle third; one can remove less.
 One can arrange to remove even geometrically less at each step, so that
 the resulting set is no longer a Cantor set of measure zero, but the so-called
 
\begin_inset Quotes eld
\end_inset

fat Cantor set
\begin_inset Quotes erd
\end_inset

, a Cantor set with finite measure.
 Notably, there are Cantor sets with measure one.
 In particular, if one removes the dyadic rationals from the real number
 line, what is left is a Cantor set, but it is a Cantor set with measure
 one (since the dyadic rationals are a set of measure zero).
 If instead one considers the Farey tree, it is then clear that the reals
 with all rationals removed is likewise the Cantor set.
 In essence, this is then a proof of something usually taken for granted:
 every irrational number 
\begin_inset Formula $x$
\end_inset

 has a unique expansion 
\begin_inset Formula $x=\sum_{n}b_{n}2^{-n}$
\end_inset

 in terms of binary digits 
\begin_inset Formula $b_{n}$
\end_inset

.
 It is the disconnectedness of the Cantor set that makes such an expansion
 unique.
\end_layout

\begin_layout Subsection
De Rham Curves
\end_layout

\begin_layout Standard
The maps 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 may be taken to be endomorphisms of some general space 
\begin_inset Formula $X$
\end_inset

.
 Then the repeated iteration of of these maps, as described above, will
 result in the binary tree being mapped to a 
\begin_inset Quotes eld
\end_inset

dust
\begin_inset Quotes erd
\end_inset

 of points, called the 
\begin_inset Quotes eld
\end_inset

Cantor dust
\begin_inset Quotes erd
\end_inset

.
 With the right maps, the points of this dust can be joined together into
 a continuous line.
 If 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 are contracting maps, then, by the Banach fixed-point theorem, they will
 have fixed points.
 Let 
\begin_inset Formula $p_{L}$
\end_inset

 denote a fixed point of 
\begin_inset Formula $L$
\end_inset

, so that 
\begin_inset Formula $L(p_{L})=p_{L}$
\end_inset

, and likewise, let 
\begin_inset Formula $p_{R}$
\end_inset

 denote a fixed point of 
\begin_inset Formula $R$
\end_inset

.
 Then, if 
\begin_inset Formula $p_{L}$
\end_inset

 is in the basin of attraction 
\begin_inset Formula $R$
\end_inset

 and 
\begin_inset Formula $p_{R}$
\end_inset

 is in the basin of attraction for 
\begin_inset Formula $L$
\end_inset

, and furthermore, if the two maps are such that 
\begin_inset Formula $L(p_{R})=R(p_{L})$
\end_inset

, then the Cantor set is mapped into a continuous one-dimensional curve.
 This curve may be called a de Rham curve, in honor of Georges de Rham who
 described them and proved their continuity in 1957
\begin_inset CommandInset citation
LatexCommand cite
key "DeR57"
literal "true"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:A-Generic-de"

\end_inset

A Generic de Rham curve
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename deRham.png
	width 100text%

\end_inset


\end_layout

\end_inset

 
\end_layout

\begin_layout Standard
A 
\begin_inset Quotes eld
\end_inset

typical
\begin_inset Quotes erd
\end_inset

 de Rham curve is shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:A-Generic-de"

\end_inset

.
 Its construction in terms of self-similar left and right pieces should
 be visually self-evident.
 It should also be clear that, with the right choice of parameters, a de
 Rham curve can be a space-filling curve.
 The set of all possible de Rham curves generated by two-dimensional linear
 affine transformations is five-dimensional (excluding degeneracies due
 to rotations, translations and rescaling), and is explored as a picture
 gallery in 
\begin_inset CommandInset citation
LatexCommand cite
key "Ve-deRham"
literal "true"

\end_inset

.
 Several famous fractal curves fall in this class, including the Koch snowflake
 curve, the Peano curve and the Lévy C curve.
\end_layout

\begin_layout Subsection
\begin_inset CommandInset label
LatexCommand label
name "subsec:Maximal-Extension-of"

\end_inset

Maximal Extension of the Dyadic Monoid
\end_layout

\begin_layout Standard
The dyadic monoid 
\begin_inset Formula $M$
\end_inset

 was constructed explicitly as the free product of the transformations 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $r$
\end_inset

 (or 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

), in which only non-negative powers were allowed to appear.
 This restriction implied that every 
\begin_inset Formula $\gamma\in M$
\end_inset

 corresponds to an interval map that is strictly shrinking (except for identity
 element); the unit interval is always mapped into a subinterval.
 Yet clearly, the interval map is invertible: for every 
\begin_inset Formula $\gamma\in M$
\end_inset

 there is a map 
\begin_inset Formula $\gamma^{-1}(x)$
\end_inset

 which maps some subinterval into the whole unit interval.
 The question then arises whether one can freely concatenate maps 
\begin_inset Formula $\gamma(x)$
\end_inset

 and 
\begin_inset Formula $\gamma^{-1}(x)$
\end_inset

 to form a group.
 The answer is no; this has already been touched on, and is explored more
 below.
\end_layout

\begin_layout Standard
Recall the definition of a 
\emph on
groupoid
\emph default
: it is a set where every member has an inverse, and an associative product
 of two members is defined for some of the members (if the product were
 defined for all of the members, it would be a group, not a groupoid).
 For the collection of interval maps, every interval map is invertible,
 but not not every concatenation of interval maps is an interval map (because
 the domain of one may not intersect the range of the other).
 Thus, the collection of interval maps can be understood to be a 
\emph on
groupoid
\emph default
; we call this the 
\emph on
dyadic groupoid
\emph default
.
 It contains both the shrinking and the expanding maps.
\end_layout

\begin_layout Standard
Compare this to the definition of a 
\emph on
monoid
\emph default
: it is a set where the associative product of every two members is defined,
 but some (or maybe all) of the members do not have inverses (if all members
 had inverses, it would be a group, not a monoid).
 If we consider the collection of interval maps, and consider only those
 which map larger intervals into smaller ones, then we have the 
\emph on
dyadic monoid
\emph default
: The composition of any two maps is always defined, but none of the maps
 (except for the identity map) have inverses.
 
\end_layout

\begin_layout Standard
Thus, we see that the collection of interval maps forms a groupoid (the
 dyadic groupoid), and that a subset of these forms a monoid (the dyadic
 monoid).
\end_layout

\begin_layout Standard
Although the monoid 
\begin_inset Formula $M$
\end_inset

 can be embedded in the group 
\begin_inset Formula $GL(2,\mathbb{Z})$
\end_inset

, not all of the group elements will have a well-defined action on intervals.
 One may then ask, what is the maximal extension 
\begin_inset Formula $\widetilde{M}$
\end_inset

 of 
\begin_inset Formula $M$
\end_inset

 such that the elements of 
\begin_inset Formula $\widetilde{M}$
\end_inset

 can still be interpreted as maps of intervals? The rest of this section
 is devoted to exposing this extension; it will be shown that 
\begin_inset Formula $\widetilde{M}$
\end_inset

 is a groupoid, to be called the 
\emph on
dyadic groupoid
\emph default
.
\end_layout

\begin_layout Standard
By considering the elements of 
\begin_inset Formula $M$
\end_inset

 to be functions acting on the unit interval, we are, strictly speaking,
 talking about the action of 
\begin_inset Formula $M$
\end_inset

 on the unit interval.
 To use precise language, this action is sometimes called the 
\emph on
set-theoretic representation
\emph default
 of 
\begin_inset Formula $M$
\end_inset

: it is a representation where elements are functions acting on a set (here,
 the set real numbers in the unit interval).
\end_layout

\begin_layout Standard
Every element 
\begin_inset Formula $\gamma\in M$
\end_inset

 defines an open interval 
\begin_inset Formula $\upsilon_{\gamma}$
\end_inset

 whose endpoints are given by 
\begin_inset Formula $\gamma_{C}(0)$
\end_inset

 and 
\begin_inset Formula $\gamma_{C}(1)$
\end_inset

.
 For the purposes of the following discussion, one can equally consider
 the intervals generated by 
\begin_inset Formula $\gamma_{C}(x)$
\end_inset

 or 
\begin_inset Formula $\gamma_{D}(x)$
\end_inset

; either will do, and so the subscript will be dropped.
 The length of this interval is strictly less than one: 
\begin_inset Formula $\vert\upsilon_{\gamma}\vert=\vert\gamma(0)-\gamma(1)\vert<1$
\end_inset

 (except, of course, for the identity element, for which the interval is
 the unit interval).
 The set 
\begin_inset Formula $M$
\end_inset

 consisted precisely of shrinking maps of the unit interval into itself.
\end_layout

\begin_layout Standard
For each 
\begin_inset Formula $\gamma\in M$
\end_inset

, the function 
\begin_inset Formula $\gamma^{-1}(x)$
\end_inset

 is well-defined on the domain 
\begin_inset Formula $x\in\upsilon$
\end_inset

 and has a range over the entire unit interval.
 This implies that 
\begin_inset Formula $\forall\gamma_{1},\gamma_{2}\in M$
\end_inset

, the map 
\begin_inset Formula $(\gamma_{1}\circ\gamma_{2}^{-1})(x)$
\end_inset

 is well-defined on the domain 
\begin_inset Formula $x\in\upsilon_{2}$
\end_inset

, and has a range over 
\begin_inset Formula $\upsilon_{1}$
\end_inset

.
 Thus, elements of the form 
\begin_inset Formula $\gamma_{1}\gamma_{2}^{-1}$
\end_inset

 also correspond to self-similarities, although they are not defined on
 the whole unit interval.
 Thus, one has that 
\begin_inset Formula $\gamma_{1}\gamma_{2}^{-1}\in\widetilde{M}$
\end_inset

, but, in general, 
\begin_inset Formula $\gamma_{1}\gamma_{2}^{-1}\notin M$
\end_inset

.
 That is, these elements belong to the groupoid but not, in general, to
 the monoid.
\end_layout

\begin_layout Theorem
\begin_inset CommandInset label
LatexCommand label
name "thm:The-only-interval"

\end_inset

The only interval maps that provide a set-theoretic representation of the
 groupoid 
\begin_inset Formula $\widetilde{M}$
\end_inset

 are those maps of the form 
\begin_inset Formula $\gamma=\alpha\beta^{-1}$
\end_inset

 with 
\begin_inset Formula $\alpha,\beta\in M$
\end_inset

.
 There are no other maps.
 That is, the maximal extension of 
\begin_inset Formula $M$
\end_inset

 as a set of interval maps is the set 
\begin_inset Formula $\widetilde{M}=\{\gamma=\alpha\beta^{-1}\vert\alpha,\beta\in M\}$
\end_inset

.
 
\end_layout

\begin_layout Proof
Consider first the reverse ordering.
 That is, given 
\begin_inset Formula $\gamma_{2},\gamma_{3}\in M$
\end_inset

, construct the element 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}\in GL(2,\mathbb{Z})$
\end_inset

, and ask if, or how, it might be a self-similarity.
 Let 
\begin_inset Formula $\upsilon_{2}$
\end_inset

 and 
\begin_inset Formula $\upsilon_{3}$
\end_inset

 be the intervals corresponding to 
\begin_inset Formula $\gamma_{2}$
\end_inset

 and 
\begin_inset Formula $\gamma_{3}$
\end_inset

, and let the superset relation 
\begin_inset Formula $a\supset b$
\end_inset

 simply denote that interval 
\begin_inset Formula $b$
\end_inset

 is contained in interval 
\begin_inset Formula $a$
\end_inset

.
 If 
\begin_inset Formula $\upsilon_{2}\supset\upsilon_{3}$
\end_inset

, then 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset

 has a domain of the entire unit interval, although its range is less than
 the whole interval.
 In fact, one has that 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}\in M$
\end_inset

.
 This is easily demonstrated by appealing to the tree structure.
 The statement that 
\begin_inset Formula $\upsilon_{2}\supset\upsilon_{3}$
\end_inset

 implies that 
\begin_inset Formula $\upsilon_{3}$
\end_inset

 is represented by a sub-tree of 
\begin_inset Formula $\upsilon_{2}$
\end_inset

.
 But the only way of getting from one node to a subnode is by navigating
 left and right branches till one reaches the desired subtree.
 The left and right descent operators are 
\begin_inset Formula $g$
\end_inset

 and 
\begin_inset Formula $rgr$
\end_inset

, and so any descent path in the tree is given by some element 
\begin_inset Formula $\delta\in M$
\end_inset

.
 Thus 
\begin_inset Formula $\gamma_{3}=\gamma_{2}\delta$
\end_inset

 or 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}=\delta\in M$
\end_inset

 which completes the demonstration.
\end_layout

\begin_layout Proof
Consider next the case 
\begin_inset Formula $\upsilon_{3}\supset\upsilon_{2}$
\end_inset

.
 The map 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset

 has a domain that is less than the entire unit interval, although the range
 is clearly the whole unit interval.
 One then has that 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})^{-1}\in M$
\end_inset

, and this may be shown using the same argument as in the last paragraph.
 The interval inclusion order implies that 
\begin_inset Formula $\gamma_{3}^{-1}\gamma_{2}\in M$
\end_inset

, and since 
\begin_inset Formula $\gamma_{3}^{-1}\gamma_{2}=(\gamma_{2}^{-1}\gamma_{3})^{-1}$
\end_inset

, one is done.
 So again, the map induced by 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}$
\end_inset

 doesn't provide 
\begin_inset Quotes eld
\end_inset

anything new
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Proof
Finally, consider the case 
\begin_inset Formula $\upsilon_{2}\cap\upsilon_{3}=\varnothing$
\end_inset

.
 In this case, the map 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset

 is an invalid form: the range of 
\begin_inset Formula $\gamma_{3}(x)$
\end_inset

 does not intersect the domain of 
\begin_inset Formula $\gamma_{2}^{-1}(x)$
\end_inset

.
 Thus, the map 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})(x)$
\end_inset

 cannot generate a self-similarity.
 However, since 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}\notin M$
\end_inset

 and 
\begin_inset Formula $(\gamma_{2}^{-1}\gamma_{3})^{-1}\notin M$
\end_inset

, the element 
\begin_inset Formula $\gamma_{2}^{-1}\gamma_{3}$
\end_inset

 does provide 
\begin_inset Quotes eld
\end_inset

something new
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Proof
The net result of these considerations is that one does not gain anything
 new in considering a chain of elements of the form 
\begin_inset Formula $\gamma=\gamma_{1}\gamma_{2}^{-1}\gamma_{3}\gamma_{4}^{-1}...$
\end_inset

 with each 
\begin_inset Formula $\gamma_{k}\in M$
\end_inset

.
 A necessary condition that 
\begin_inset Formula $\gamma(x)$
\end_inset

 has a domain and a range that is not the empty set is that the intersection
 of intervals is not empty: 
\begin_inset Formula $\upsilon_{2j}\cap\upsilon_{2j+1}\ne\varnothing$
\end_inset

.
 But, as soon as this condition is imposed, each adjacent pair 
\begin_inset Formula $\gamma_{2j}^{-1}\gamma_{2j+1}$
\end_inset

 can be contracted with its neighbor on the left or right.
 Repeating this exercise, one finds eventually that either 
\begin_inset Formula $\gamma(x)$
\end_inset

 has a domain and a range that is the empty set, or that 
\begin_inset Formula $\gamma$
\end_inset

 can be expressed as 
\begin_inset Formula $\gamma=\alpha\beta^{-1}$
\end_inset

 with 
\begin_inset Formula $\alpha,\beta\in M$
\end_inset

.
 This concludes the proof: the only interval maps in the interval map representa
tion are those maps that belong to 
\begin_inset Formula $\widetilde{M}$
\end_inset

.
\end_layout

\begin_layout Standard
Intuitively, the elements of 
\begin_inset Formula $\widetilde{M}$
\end_inset

 are those maps that map a subtree back up into the whole tree, and then
 map the whole tree back down to some other subtree.
 For every map that takes the whole tree to a subtree, the inverse map exists.
 These can be multiplied together, and, for many cases, maps in the forward
 and reverse directions can be composed together.
 However, the general composition of maps and their inverses does not exist,
 which is why 
\begin_inset Formula $\widetilde{M}$
\end_inset

 cannot be a full-fledged group.
 However, this intuitive description does show that 
\begin_inset Formula $\widetilde{M}$
\end_inset

 obeys all of the axioms of a groupoid, given below.
\end_layout

\begin_layout Standard
A 
\emph on
groupoid
\emph default
 is defined as a set 
\begin_inset Formula $G$
\end_inset

 with an associative, partially defined multiplicative operator, and an
 involution that is the multiplicative inverse, which is defined for all
 elements.
 A 
\begin_inset Quotes eld
\end_inset

partially defined multiplicative operator
\begin_inset Quotes erd
\end_inset

 simply means that if 
\begin_inset Formula $g,h\in G$
\end_inset

, then their product 
\begin_inset Formula $g*h$
\end_inset

 may or may not be defined; if it is defined, then it belongs to 
\begin_inset Formula $G$
\end_inset

.
 An 
\begin_inset Quotes eld
\end_inset

associative partially defined multiplicative operator
\begin_inset Quotes erd
\end_inset

 means that, for 
\begin_inset Formula $f,g,h\in G$
\end_inset

, if 
\begin_inset Formula $f*g$
\end_inset

 is defined, and if 
\begin_inset Formula $g*h$
\end_inset

 is defined, then 
\begin_inset Formula $(f*g)*h=f*(g*h)$
\end_inset

.
 A groupoid also has a multiplicative inverse defined for every element,
 so that if 
\begin_inset Formula $g\in G$
\end_inset

, there exists a 
\begin_inset Formula $g^{-1}\in G$
\end_inset

 such that 
\begin_inset Formula $g*g^{-1}=g^{-1}*g=e$
\end_inset

.
 Here, 
\begin_inset Formula $e$
\end_inset

 is the identity element; a groupoid by definition contains an identity
 element.
\end_layout

\begin_layout Subsection
Open topics
\end_layout

\begin_layout Standard
A few unfinished thoughts:
\end_layout

\begin_layout Standard
What is the set of homomorphisms of 
\begin_inset Formula $\widetilde{M}$
\end_inset

? It should be a group, what is that group?
\end_layout

\begin_layout Standard
This groupoid is the fundamental groupoid of what space?
\end_layout

\begin_layout Standard
The general element of 
\begin_inset Formula $\widetilde{M}$
\end_inset

 is not defined on the whole unit interval, and the elements of 
\begin_inset Formula $\widetilde{M}$
\end_inset

 can be understood to for a sort-of sheaf or pre-sheaf.
 XXX.
 Expand on this idea.
\end_layout

\begin_layout Section
The Dyadic lattice
\end_layout

\begin_layout Standard
The introduction of the dyadic groupoid sidestepped some important questions:
 why can't the groupoid be extended to be a full group? Is the groupoid
 the most appropriate algebraic structure, or is there some other structure
 that more closely captures the structure of this thing? There is another,
 perhaps even a more appropriate, structure with which the set of self-symmetrie
s can be understood.
 This is the lattice or Stone space
\begin_inset CommandInset citation
LatexCommand cite
key "John82"
literal "true"

\end_inset

 that is often used in general topology and is the focus of study in order
 theory.
\end_layout

\begin_layout Subsection
Inadequacy of the Dyadic Groupoid
\end_layout

\begin_layout Standard
Calling the set of self-similarities a groupoid is inadequate, and fails
 to capture the full structure of the thing.
 There are several ways to see this.
 Corresponding to a move to sub-trees, there are inverse moves that take
 one back up the tree.
 If one moves to the left branch with 
\begin_inset Formula $L$
\end_inset

, there is an inverse move 
\begin_inset Formula $L^{-1}$
\end_inset

that takes one back to where one started.
 Similarly, there is an 
\begin_inset Formula $R^{-1}$
\end_inset

 to undo a move 
\begin_inset Formula $R$
\end_inset

 to the right branch.
 But 
\begin_inset Formula $L^{-1}$
\end_inset

 and 
\begin_inset Formula $R^{-1}$
\end_inset

are the same thing: there is only one way to move back on the tree, and
 it does not depend on where one came from.
 Call it 
\begin_inset Formula $B$
\end_inset

, for 
\begin_inset Quotes eld
\end_inset

back
\begin_inset Quotes erd
\end_inset

, so that 
\begin_inset Formula $B=L^{-1}=R^{-1}$
\end_inset

, with the non-move given by 
\begin_inset Formula $BL=LB=BR=RB=e$
\end_inset

.
 A number of 
\begin_inset Formula $B$
\end_inset

's can be concatenated together to indicate a number of upward moves.
 Thus, naively, one might want to extend the dyadic monoid by adjoining
 the letter 
\begin_inset Formula $B$
\end_inset

.
 Several uncomfortable problems arise with such an idea.
 First, the adjunction of 
\begin_inset Formula $B$
\end_inset

 does not magically turn the monoid into a group: there is no unique element
 
\begin_inset Formula $B^{-1}$
\end_inset

 (it could be either 
\begin_inset Formula $L$
\end_inset

 or 
\begin_inset Formula $R$
\end_inset

, of course).
 Next, the presence of 
\begin_inset Formula $B$
\end_inset

 in any string of letters 
\begin_inset Formula $R,L$
\end_inset

 automatically 
\begin_inset Quotes eld
\end_inset

erases
\begin_inset Quotes erd
\end_inset

 those letters: thus, there are no strings that mix together 
\begin_inset Formula $L,R$
\end_inset

 and 
\begin_inset Formula $B$
\end_inset

.
 A third problem is that the operation of 
\begin_inset Formula $B$
\end_inset

 is position-dependent.
 If one is at the the root of the tree, there is no way to back up any further.
 Thus, any given string 
\begin_inset Formula $B^{n}$
\end_inset

 of 
\begin_inset Formula $n$
\end_inset

 backwards moves may or may not be idempotent, depending on whether the
 starting point is at least 
\begin_inset Formula $n$
\end_inset

 levels deep in the tree, or not.
 One concludes that there is a legitimate need to be able to formally discuss
 a back-up move, but that simply adding 
\begin_inset Formula $B$
\end_inset

 to the monoid is insufficient.
\end_layout

\begin_layout Standard
There might be a temptation to try a different tack: to define a formal
 inverse.
 Every free monoid has a universal cover that is a group; the covering group
 is obtained by formally adjoining inverse elements to the monoid.
 The construction is straightforward, and is known as a 
\begin_inset Quotes eld
\end_inset

universal property
\begin_inset Quotes erd
\end_inset

, as it can be applied to the category of free monoids.
 In more concrete terms, this just simply means that one adds two elements
 
\begin_inset Formula $R^{-1}$
\end_inset

 and 
\begin_inset Formula $L^{-1}$
\end_inset

 which are, by definition, inverses:
\begin_inset Formula $L^{-1}L=LL^{-1}=R^{-1}R=RR^{-1}=e$
\end_inset

.
 However, in this universal extension, no further conditions are imposed;
 in particular, 
\begin_inset Formula $L^{-1}$
\end_inset

 does not commute with 
\begin_inset Formula $R$
\end_inset

, and similarly 
\begin_inset Formula $R^{-1}$
\end_inset

 does not commute with 
\begin_inset Formula $L$
\end_inset

.
 Thus, this formal extension does not match up with the idea of backwards
 moves on the binary tree.
 
\end_layout

\begin_layout Standard
If one considers the interval map representation, the formal extension also
 results in undefined moves.
 Consider, for example, 
\begin_inset Formula $L(x)$
\end_inset

 to be the function 
\begin_inset Formula $L(x)=x/2$
\end_inset

 that maps the whole unit interval to its left sub-half.
 Then 
\begin_inset Formula $L^{-1}(x)$
\end_inset

 is an inverse, whose domain is the half-interval [0,1/2].
 Similarly, let 
\begin_inset Formula $R(x)=(x+1)/2$
\end_inset

 map the whole interval to the right half.
 What then should one make of 
\begin_inset Formula $(L^{-1}\circ R)(x)$
\end_inset

? The range of 
\begin_inset Formula $R$
\end_inset

 simply does not intersect the domain of 
\begin_inset Formula $L^{-1}$
\end_inset

; so 
\begin_inset Formula $L^{-1}\circ R$
\end_inset

 is undefined as an interval map.
 The universal extension of the free monoid to a free group simply does
 not act on the binary tree in a meaningful way.
 One might try to rescue the situation by defining 
\begin_inset Formula $L^{-1}(x)=2x\mbox{ mod}1$
\end_inset

, so that 
\begin_inset Formula $L^{-1}(x)$
\end_inset

 is well-defined on the entire unit interval.
 But then, 
\begin_inset Formula $L^{-1}(x)=R^{-1}(x)=B(x)$
\end_inset

, and one is back to having a 
\begin_inset Quotes eld
\end_inset

group element
\begin_inset Quotes erd
\end_inset

 that commutes, which is not what the universal extension did.
 
\end_layout

\begin_layout Subsection
Lattices and Semilattices
\end_layout

\begin_layout Standard
A richer structure for the dyadic monoid can be found by observing that
 the thing that it acts on, the collection of intervals or infinite binary
 trees, has the structure of a semilattice on a partially ordered set.
 Actually, there are two possible semilattice structures; one, a distributive
 lattice inherited from the natural topology on the reals, and another,
 non-distributive semilattice that is more appropriate for working with
 the binary tree.
 But first, some definitions to anchor the topic are appropriate.
\end_layout

\begin_layout Standard
A 
\emph on
partial order
\emph default
 on a set 
\begin_inset Formula $A$
\end_inset

 is a binary relation 
\begin_inset Formula $\le$
\end_inset

 with three properties: 1) it is 
\emph on
reflexive
\emph default
, so that 
\begin_inset Formula $a\le a$
\end_inset

 for all 
\begin_inset Formula $a\in A$
\end_inset

; 2) it is 
\emph on
transitive
\emph default
, so that if 
\begin_inset Formula $a\le b$
\end_inset

 and 
\begin_inset Formula $b\le c$
\end_inset

 then 
\begin_inset Formula $a\le c$
\end_inset

, and; 3) it is 
\emph on
antisymmetric
\emph default
, so that if 
\begin_inset Formula $a\le b$
\end_inset

 and 
\begin_inset Formula $b\le a$
\end_inset

, then 
\begin_inset Formula $a=b$
\end_inset

.
 A 
\emph on
partially ordered set
\emph default
, or 
\emph on
poset
\emph default
, is a set equipped with a partial order.
 The term 
\begin_inset Quotes eld
\end_inset


\emph on
partial order
\emph default

\begin_inset Quotes erd
\end_inset

 refers to the idea that not ever pair of elements in the set can be related
 with 
\begin_inset Formula $\le$
\end_inset

; for some pairs, one just can't say.
 A 
\emph on
totally ordered set
\emph default
 is a poset for which the binary relation 
\begin_inset Formula $\le$
\end_inset

 is defined between all pairs.
 Clearly, the set of all (complete, infinite) subtrees of the infinite binary
 tree is a poset, where 
\begin_inset Formula $a\le b$
\end_inset

 means that 
\begin_inset Formula $a$
\end_inset

 is a subtree of 
\begin_inset Formula $b$
\end_inset

.
 Here, as elsewhere in this article, a subtree is understood to be the entire
 infinite subtree anchored at a given node, rather than some other incomplete
 fraction.
\end_layout

\begin_layout Standard
Given any collection of subtrees, there is a unique smallest tree that contains
 the collection.
 This unique smallest containing tree, or least upper bound, is commonly
 called the 
\emph on
join
\emph default
 of all the subtrees, and is denoted by 
\begin_inset Formula $\bigvee$
\end_inset

.
 The concept of a join is generally defined for any poset 
\begin_inset Formula $A$
\end_inset

.
 Given a subset 
\begin_inset Formula $S$
\end_inset

 of the poset 
\begin_inset Formula $A$
\end_inset

, the join 
\begin_inset Formula $a=\bigvee S$
\end_inset

 is defined as an element 
\begin_inset Formula $a\in A$
\end_inset

 which is an upper bound to all elements in 
\begin_inset Formula $S$
\end_inset

, so that 
\begin_inset Formula $a\ge s$
\end_inset

 for all 
\begin_inset Formula $s\in S$
\end_inset

, but is also the least upper bound, so that, for any other upper bound
 
\begin_inset Formula $b$
\end_inset

 on 
\begin_inset Formula $S$
\end_inset

, one has 
\begin_inset Formula $b\ge a$
\end_inset

.
 If 
\begin_inset Formula $S$
\end_inset

 is a two-element set 
\begin_inset Formula $S=\{s,t\}$
\end_inset

, one writes 
\begin_inset Formula $s\vee t=\bigvee\{s,t\}$
\end_inset

, the join of 
\begin_inset Formula $s$
\end_inset

and 
\begin_inset Formula $t$
\end_inset

, thus defining a binary operator 
\begin_inset Formula $\vee$
\end_inset

 between elements of 
\begin_inset Formula $A$
\end_inset

.
 It is not hard to see that all elements 
\begin_inset Formula $a\in A$
\end_inset

 are idempotent under the join operator: 
\begin_inset Formula $a\vee a=a$
\end_inset

, and that the join operator is symmetric 
\begin_inset Formula $a\vee b=b\vee a$
\end_inset

, and that the operation is associative: 
\begin_inset Formula $a\vee(b\vee c)=(a\vee b)\vee c$
\end_inset

 for all 
\begin_inset Formula $a,b,c$
\end_inset

.
 
\end_layout

\begin_layout Standard
For a general poset, joins need not always exist.
 Even when a subset has upper bounds, there may not be a least upper bound
 (such posets are called 
\emph on
directed sets
\emph default
).
 However, when every finite subset of a poset does have a join, then one
 says that 
\begin_inset Formula $A$
\end_inset

 has the structure of a 
\emph on
semilattice
\emph default
 or a 
\emph on
join-semilattice
\emph default
.
 Clearly, the (poset of subtrees of the) binary tree is a join-semilattice,
 as any collection (even an infinite collection) of subtrees has a single
 unique join that contains them all.
 When a semilattice has joins even for infinite subsets, it is called 
\emph on
complete
\emph default
; the binary tree thus forms a complete join semilattice.
 
\end_layout

\begin_layout Standard
Some authors also include the empty set as a possible subset, and define
 an the least upper bound of the empty set to be 
\begin_inset Formula $0=\bigvee\varnothing$
\end_inset

.
 This new element 
\begin_inset Formula $0$
\end_inset

 has the property that 
\begin_inset Formula $0\vee a=a\vee0=a$
\end_inset

.
 In the context of the binary tree join-semilattice, there does not appear
 to be any need for this extra element.
 However, for the construction of the meet-semilattice from the binary tree,
 it will be needed.
\end_layout

\begin_layout Standard
The dual concept to the join is the meet, or greatest lower bound, which
 is obtained by reversing the direction of all of the inequalities in the
 definition above.
 Thus, the meet of a subset is 
\begin_inset Formula $\bigwedge S$
\end_inset

 and the meet of two elements is 
\begin_inset Formula $a\wedge b$
\end_inset

.
 Dual to the concept of zero is 
\begin_inset Formula $1=\bigwedge A$
\end_inset

, which can be thought of as the greatest element in the poset.
 For the poset of subtrees, this element would be the entire tree.
 Meets on the poset of subtrees take one of two distinct forms.
 Given two subtrees, one is either a subtree of the other, or they are non-inter
secting.
 Symbolically, either one has 
\begin_inset Formula $a\le b$
\end_inset

, in which case 
\begin_inset Formula $a\wedge b=a$
\end_inset

 or neither 
\begin_inset Formula $a$
\end_inset

 or 
\begin_inset Formula $b$
\end_inset

 are a subtree of one another, in which case 
\begin_inset Formula $a\wedge b=\varnothing$
\end_inset

.
 This is a very different situation than that for the join on the binary
 tree: the join was always defined, for any pair 
\begin_inset Formula $a,b$
\end_inset

.
 By contrast, the meet of a pair of disjoint trees is not defined; it is
 the empty set.
 Thus, the (poset of subtrees of the) binary tree is, in this sense, not
 a meet-semilattice.
 This may be trivially fixed: adjoin the empty set 
\begin_inset Formula $\varnothing$
\end_inset

 to the poset of subtrees, so that the meet does become defined (it is the
 empty set!).
 This may seem trivial, but is belabored here, since it corresponds to a
 one-point compactification of the underlying structures that the binary
 tree represents.
 As was pointed out above, the removal of the rational numbers from the
 real number line results in a totally disconnected set, the Cantor set,
 which is modeled by the binary tree.
 Allowing something 
\begin_inset Quotes eld
\end_inset

in between
\begin_inset Quotes erd
\end_inset

 the gaps, even if that something is 
\begin_inset Quotes eld
\end_inset

the empty set
\begin_inset Quotes erd
\end_inset

, changes the structure of the 
\begin_inset Quotes eld
\end_inset

leaves
\begin_inset Quotes erd
\end_inset

 of the binary tree from being totally disconnected, to something connected.
 At this point, this may seem to be confusing word-play; it is only offered
 up as an introductory caution for the subsequent discussion of closure.
 
\end_layout

\begin_layout Standard
If a poset is both a join-semilattice, and a meet-semilattice, then it is
 called a lattice.
 Clearly, the poset of subtrees, adjoined with the empty set, is a lattice;
 it shall be called the 
\begin_inset Quotes eld
\end_inset


\emph on
dyadic lattice
\emph default

\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
XXX Also point out that there is a 
\begin_inset Quotes eld
\end_inset

Galois connection
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsection
Distributive and Modular Lattices
\end_layout

\begin_layout Standard
The dyadic lattice has a number of properties; but foremost, perhaps, a
 few words on what it is not: it is not a Boolean lattice, it has no complements
, it is not a distributive lattice, and it is not even a modular lattice.
 Lets look at these in turn.
 A Boolean lattice is a distributive lattice with complements; since the
 dyadic lattice will have neither property, it won't be Boolean.
 
\end_layout

\begin_layout Standard
A 
\emph on
complement
\emph default
 on a lattice is defined as a unary operation 
\begin_inset Formula $\neg:A\to A$
\end_inset

 such that 
\begin_inset Formula $\neg a$
\end_inset

, the complement of 
\begin_inset Formula $a$
\end_inset

, obeys 
\begin_inset Formula $\neg a\vee a=1$
\end_inset

 and 
\begin_inset Formula $\neg a\wedge a=0$
\end_inset

.
 In the poset of subtrees, given some subtree 
\begin_inset Formula $a$
\end_inset

, there is clearly no other tree that could play the role of 
\begin_inset Formula $\neg a$
\end_inset

.
 One could construct a complement of sorts, but it would have to consist
 of many trees, rather than a single tree.
 This point will be explored in greater detail in a later section.
 
\end_layout

\begin_layout Standard
The distributive law is the identity 
\begin_inset Formula $a\wedge(b\vee c)=(a\wedge b)\vee(a\wedge c)$
\end_inset

.
 If the distributive law holds for all 
\begin_inset Formula $a,b$
\end_inset

 and 
\begin_inset Formula $c$
\end_inset

 in a lattice, then the lattice is a 
\emph on
distributive lattice
\emph default
.
 The theorem below shows that the dyadic lattice is not a distributive lattice.
\end_layout

\begin_layout Theorem
The dyadic lattice is not a distributive lattice.
\end_layout

\begin_layout Proof
To show this, one need only find a counter-example.
 This may be found by examining the various cases.
 There are nine distinct arrangements of the posets 
\begin_inset Formula $a,b,c$
\end_inset

, ignoring permutations of 
\begin_inset Formula $b$
\end_inset

 and 
\begin_inset Formula $c$
\end_inset

.
 These are shown in the figure below.
\end_layout

\begin_layout Proof
\begin_inset Graphics
	filename lattices.eps
	width 100text%

\end_inset


\end_layout

\begin_layout Proof
The identity 
\begin_inset Formula $a\wedge(b\vee c)=(a\wedge b)\vee(a\wedge c)$
\end_inset

 holds for all of the arrangements except for that in arrangement 6.
 To illustrate that example, consider first arrangement 1.
 There, one has 
\begin_inset Formula $b\vee c=a$
\end_inset

 since 
\begin_inset Formula $a$
\end_inset

 is the smallest common tree that contains both tree 
\begin_inset Formula $b$
\end_inset

 and tree 
\begin_inset Formula $c$
\end_inset

.
 Thus, clearly 
\begin_inset Formula $a\wedge(b\vee c)=a$
\end_inset

.
 On the other side, one has 
\begin_inset Formula $a\wedge b=b$
\end_inset

, since 
\begin_inset Formula $b$
\end_inset

 is the largest tree that is contained inside of both 
\begin_inset Formula $a$
\end_inset

 and 
\begin_inset Formula $b$
\end_inset

.
 Similarly, 
\begin_inset Formula $a\wedge c=c$
\end_inset

 and so 
\begin_inset Formula $(a\wedge b)\vee(a\wedge c)=b\vee c=a$
\end_inset

 and so the distributive law holds for arrangement 1.
 
\end_layout

\begin_layout Proof
For arrangement 6, one has 
\begin_inset Formula $b\vee c=d$
\end_inset

 and so 
\begin_inset Formula $a\wedge(b\vee c)=a$
\end_inset

.
 On the other side, 
\begin_inset Formula $a\wedge b=b$
\end_inset

 and 
\begin_inset Formula $a\wedge c=\varnothing$
\end_inset

, since tree 
\begin_inset Formula $a$
\end_inset

 and tree 
\begin_inset Formula $c$
\end_inset

 are disjoint.
 Thus, one has 
\begin_inset Formula $(a\wedge b)\vee(a\wedge c)=b\ne a\wedge(b\vee c)$
\end_inset

, and so the dyadic lattice does not obey the distributive law.
\end_layout

\begin_layout Standard
Curiously, arrangement 6 is the only one that violates this distributive
 law.
 If instead, one considers the dual distributive law 
\begin_inset Formula $a\vee(b\wedge c)=(a\vee b)\wedge(a\vee c)$
\end_inset

, one finds that the dual is violated by arrangement 7, and by arrangement
 9.
 The dual distributive law holds for all of the other arrangements.
\end_layout

\begin_layout Standard
A strictly weaker notion than distributivity is modularity.
 A lattice is said to be 
\emph on
modular
\emph default
 if 
\begin_inset Formula $a\vee(b\wedge(a\vee c))=(a\vee b)\wedge(a\vee c)$
\end_inset

 holds for all 
\begin_inset Formula $a,b,c$
\end_inset

 in the lattice.
 It is easily seen that every distributive lattice is a modular lattice.
\end_layout

\begin_layout Theorem
The dyadic lattice is not modular.
\end_layout

\begin_layout Proof
To verify modularity, one must examine 18 cases: the nine arrangements shown
 in the figure, and nine more with 
\begin_inset Formula $b$
\end_inset

 and 
\begin_inset Formula $c$
\end_inset

 reversed.
 Of the eighteen cases, only one does not hold, which is the reversed version
 of arrangement 7.
 For this, the right-hand side is 
\begin_inset Formula $a\vee(c\wedge(a\vee b))=a\vee(c\wedge b)=a\vee\varnothing=a$
\end_inset

 whereas the left-hand side is 
\begin_inset Formula $(a\vee b)\wedge(a\vee c)=b\wedge d=b$
\end_inset

.
 Thus, the dyadic lattice is not modular.
\end_layout

\begin_layout Subsection
Möbius Function
\end_layout

\begin_layout Standard
Given a finite partially ordered set, a Möbius function can be defined [xxx
 need reference].
 The Möbius function is useful for inverting certain sums defined on posets.
 In some cases, it is straight-forward to provide a definition for some
 infinite posets as well.
 In particular, the Möbius function is well-defined on the infinite binary
 tree.
 It is given by:
\begin_inset Formula 
\[
\mu\left(a,b\right)=\begin{cases}
-1 & \;\mbox{ if }a\mbox{ is an immediate child of }b\\
+1 & \;\mbox{ if }a=b\\
0 & \;\mbox{ otherwise}
\end{cases}
\]

\end_inset

Here, the expression 
\begin_inset Quotes eld
\end_inset


\begin_inset Formula $a$
\end_inset

 is an immediate child of 
\begin_inset Formula $b$
\end_inset


\begin_inset Quotes erd
\end_inset

 is the obvious: that 
\begin_inset Formula $a<b$
\end_inset

 and there is no 
\begin_inset Formula $x$
\end_inset

 such that 
\begin_inset Formula $a<x<b$
\end_inset

.
 Here, the symbol 
\begin_inset Formula $<$
\end_inset

 refers to the obvious partial ordering on the binary tree; that is, 
\begin_inset Formula $a<b$
\end_inset

 if and only if 
\begin_inset Formula $a$
\end_inset

 is in the subtree rooted at 
\begin_inset Formula $b$
\end_inset

.
 The Möbius function for this case can be obtained by considering finite
 binary trees; some simple but tedious computation will reveal the above
 answer.
\end_layout

\begin_layout Subsection
Ideals and Filters
\end_layout

\begin_layout Standard
XXX make some intro commentary.
\end_layout

\begin_layout Standard
Define ideals and filters.
\end_layout

\begin_layout Standard
Finish writing me.
\end_layout

\begin_layout Itemize
Every element is an ideal, and in fact a principal ideal; this is trivial,
 since every element is represented by a single root of a tree.
 
\end_layout

\begin_layout Itemize
its meet-irreducible, therefore meet-prime.
 It has no join-primes
\end_layout

\begin_layout Itemize
i.e.
 every element is a prime ideal.
\end_layout

\begin_layout Itemize
Every ideal is the kernel of a semi-lattice homomorphism.
 The cosets of the resulting equivalence relation are the trees that are
 the direct parents of the ideal in question.
 Thus the quotient is always finite, and is always totally ordered.
\end_layout

\begin_layout Itemize
construct the complement via completed dual.
 i.e.take the dual, complete the dual, show its completion has complements!!!!
\end_layout

\begin_layout Itemize
The groupoid and its inverse together form a Galois connection.
 
\end_layout

\begin_layout Itemize
stone spaces
\end_layout

\begin_layout Section
Compact Metric Spaces, Polynomials, Differential equations
\end_layout

\begin_layout Standard
Every compact metric space is the continuous image of the Cantor set
\begin_inset CommandInset citation
LatexCommand cite
key "Carothers2005"
literal "true"

\end_inset

.
 This begs a host of (unanswered) questions: For which compact metric spaces
 is some remnant of the dyadic groupoid preserved? Or, perhaps more succinctly,
 for which compact metric spaces is the dyadic groupoid not evident? So,
 for example, the real numbers seem to have the structure of the Cantor
 set embedded in them, as exposed in this paper.
 How does this generalize to arbitrary compact metric spaces?
\end_layout

\begin_layout Standard
That is, the mapping of the Cantor set to the unit interval gives the unit
 interval a certain 
\begin_inset Quotes eld
\end_inset

hyperbolic
\begin_inset Quotes erd
\end_inset

 structure, as discussed in the section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Geometry-and-Hyperbolic"

\end_inset

.
 This hyperbolic structure follows from the embedding of the dyadic groupoid
 (or binary tree) in the modular group, and essentially 
\begin_inset Quotes eld
\end_inset

explains
\begin_inset Quotes erd
\end_inset

 why iterated functions on the unit interval generate a fractal structure.
 So for example, many iterated functions on the unit interval are isomorphic
 to the Bernoulli map; this explains the fractal structure that results
 from iteration.
 How does this generalize to compact metric spaces in general? 
\end_layout

\begin_layout Standard
The topological structure of a space is closely tied to the structure of
 the ring of functions on that space.
 If a compact metric space inherits a 
\begin_inset Quotes eld
\end_inset

hyperbolic
\begin_inset Quotes erd
\end_inset

 structure from its universal Cantor set covering, when and how is this
 manifested in the ring of functions? What subset(s) of this ring preserve
 the symmetries of the dyadic monoid? 
\end_layout

\begin_layout Standard
To a large degree, it appears that polynomials 
\begin_inset Quotes eld
\end_inset

wipe out
\begin_inset Quotes erd
\end_inset

 or are incompatible with recursive, fractal structure: the smoothness of
 polynomials seems not to be able to support fractal self-similarity.
 There are a few exceptions: The parabola is a special case of the Takagi-Landsb
erg curve 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Takagi curve"

\end_inset

, with 
\begin_inset Formula $w=1/4$
\end_inset

 (this special case, the construction of the parabola by midpoint displacement,
 being known to Archimedes
\begin_inset CommandInset citation
LatexCommand cite
key "Man88"
literal "true"

\end_inset

).
 Insofar as the Takagi curve is self-similar under a representation of the
 dyadic monoid, so is the parabola.
 Under what circumstances can other polynomial curves be considered to be
 self-similar, or in some way exhibit a (hidden) dyadic monoid symmetry?
 Another example shows itself on the complex plane: Modular forms have the
 symmetry of the full modular group, and thus of the dyadic monoid as well.
 What can be said about the set of complex-valued functions having only
 the symmetry of the dyadic monoid alone?
\end_layout

\begin_layout Standard
A related set of questions arise in the study of differential equations.
 Virtually all widely-studied differential equations have smooth, non-fractal
 solutions.
 Crudely speaking, the situation is analogous to a polynomial 
\begin_inset Quotes eld
\end_inset

wiping out
\begin_inset Quotes erd
\end_inset

 fractal structure.
 Yet, many important differential equations and/or integrable systems do
 exhibit a transition to chaos.
 So, for example, one can readily observe period-doubling in the laminar
 flow of the rising smoke from a cigarette, or in the oscillations of airflow
 over obstacles.
 This strongly suggests that the period doubling seen in differential equations
 is a signature of, an expression of the Cantor set in the space of solutions
 of these differential equations, a remnant of the universal nature of the
 Cantor set as a covering space for compact metric spaces.
 But what is the proper way of exhibiting this covering/embedding? 
\end_layout

\begin_layout Standard
Note that the modular group is isomorphic to the symplectic group, that
 is, 
\begin_inset Formula $SL(2,\mathbb{Z})=Sp(2,\mathbb{Z})$
\end_inset

.
 Insofar as the symplectic group is implicated in Hamiltonian dynamics,
 one may wonder if this can provide an opening for studying chaotic dynamics
 or integrable systems.
 The groupoid 
\begin_inset Formula $\widetilde{M}$
\end_inset

 of interval maps seems to exclude the symplectic case: the matrix 
\begin_inset Formula $J=\left(\begin{array}{cc}
0 & 1\\
-1 & 0
\end{array}\right)$
\end_inset

 does not belong to 
\begin_inset Formula $\widetilde{M}$
\end_inset

.
 Although one does have 
\begin_inset Formula $\gamma_{C}^{T}J\gamma_{C}=\pm J$
\end_inset

 for the Farey representation 
\begin_inset Formula $\gamma_{C}\in\widetilde{M}$
\end_inset

, one does not have a satisfying analogous relation for the 
\begin_inset Formula $\gamma_{D}$
\end_inset

.
 The closest that one comes to to find 
\begin_inset Formula $K=\left(\begin{array}{cc}
1 & 0\\
0 & 0
\end{array}\right)$
\end_inset

 which satisfies 
\begin_inset Formula $\gamma_{D}^{T}K\gamma_{D}=K$
\end_inset

, but this 
\begin_inset Formula $K$
\end_inset

 only singles out the trivial representation.
 The dyadic and higher-order interval representations are not symplectic.
 However, there is clearly more to the story: after all, hyperbolic dynamics
 are chaotic, (mixing, and dissipative, even) and hyperbolic manifolds do
 have a Fuchsian symmetry.
 
\end_layout

\begin_layout Section
Geometry and Hyperbolic Structure
\begin_inset CommandInset label
LatexCommand label
name "sec:Geometry-and-Hyperbolic"

\end_inset


\end_layout

\begin_layout Standard
The binary tree has a very nice, symmetric embedding into the hyperbolic
 plane, which will be explored in this section.
 The embedding is completely symmetric, in that, by marginalizing the importance
 of the root of the tree, one finds that the structure is completely symmetric
 and homogeneous.
 Formally speaking, the Cantor set has the property that, for any two points
 
\begin_inset Formula $x$
\end_inset

 and 
\begin_inset Formula $y$
\end_inset

, there exists a function 
\begin_inset Formula $f$
\end_inset

 such that 
\begin_inset Formula $f(x)=y$
\end_inset

 and 
\begin_inset Formula $f$
\end_inset

 is a homeomorphism.
 This is the definition of a homogeneous space, and so this makes the Cantor
 a homogeneous space.
 This set of homeomorphisms is given by the modular group 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

; the embedding makes this manifest.
 The action of the modular group on the hyperbolic plane can then be reformulate
d as an action on the unit interval, by means of the usual embedding of
 the binary tree into the unit interval.
 These functions are sometimes called 
\begin_inset Quotes eld
\end_inset

hyperbolic rotations of the unit interval
\begin_inset Quotes erd
\end_inset

, and have some interesting properties of their own.
\end_layout

\begin_layout Standard
The hyperbolic plane is a two-dimensional surface, having a constant, uniform
 negative curvature of -1.
 As such, it is the hyperbolic partner to the usual to the usual two-dimensional
 sphere, having an everywhere constant curvature of +1, and the ordinary,
 flat Euclidean plane, having everywhere a curvature of 0.
 The hyperbolic plane can be conveniently represented as a subset of the
 complex plane (with a non-Euclidean metric) in two different ways: as the
 so-called 
\begin_inset Quotes eld
\end_inset

upper half-plane
\begin_inset Quotes erd
\end_inset

, and as the 
\begin_inset Quotes eld
\end_inset

Poincaré disk
\begin_inset Quotes erd
\end_inset

.
 The geometry of the hyperbolic plane is explored in a large number of classic
 texts
\begin_inset CommandInset citation
LatexCommand cite
key "Far80,Jost02,Kat92"
literal "true"

\end_inset

[xxx need refs]; this section will assume some basic familiarity, and recap
 only a few basic definitions needed for the presentation.
 
\end_layout

\begin_layout Standard
The upper half-plane is given by the subset of the complex plane having
 positive imaginary values:
\begin_inset Formula 
\[
\mathbb{H}=\left\{ x+iy=z\in\mathbb{C}\,\vert\;\Im z=y>0\right\} 
\]

\end_inset

The hyperbolic metric on the upper-half-plane is given by 
\begin_inset Formula 
\[
ds^{2}=\frac{dx^{2}+dy^{2}}{y^{2}}
\]

\end_inset

This metric is often called the Poincaré metric.
 It is invariant under the action of the fractional linear transformations
 of 
\begin_inset Formula $PSL(2,\mathbb{R})$
\end_inset

.
 That is, suppose that 
\begin_inset Formula $z$
\end_inset

 and 
\begin_inset Formula $z^{\prime}$
\end_inset

 are two different points in the upper half-plane, separated by some distance.
 Then, transforming with the fractional linear transform of eqn 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Mobius xform"

\end_inset

,
\begin_inset Formula 
\[
z\mapsto\frac{az+b}{cz+d}\quad\mbox{ and }\quad z^{\prime}\mapsto\frac{az^{\prime}+b}{cz^{\prime}+d}
\]

\end_inset

leaves the distance between 
\begin_inset Formula $z$
\end_inset

 and 
\begin_inset Formula $z^{\prime}$
\end_inset

 unchanged, whenever 
\begin_inset Formula $a,b,c$
\end_inset

 and 
\begin_inset Formula $d$
\end_inset

 are real-valued, and 
\begin_inset Formula $ad-bc=1$
\end_inset

.
 
\end_layout

\begin_layout Standard
The upper half-plane may be mapped to the unit disk by means of the transformati
on 
\begin_inset Formula 
\[
w=e^{i\phi}\frac{z-z_{0}}{z-\overline{z}_{0}}
\]

\end_inset

This mapping takes a point 
\begin_inset Formula $z_{0}\in\mathbb{H}$
\end_inset

 and maps it to the center of the unit disk; the angular parameter 
\begin_inset Formula $\phi$
\end_inset

 just indicates an ambiguity with respect to the rotation of the disk.
 It is not hard to see that the whole upper half-plane 
\begin_inset Formula $\mathbb{H}$
\end_inset

 is mapped to the disk 
\begin_inset Formula 
\[
\mathbb{D}=\left\{ x+iy=z\in\mathbb{C}\,\vert\;|z|^{2}=x^{2}+y^{2}<1\right\} 
\]

\end_inset

 The disk 
\begin_inset Formula $\mathbb{D}$
\end_inset

 is sometimes called the Poincaré disk.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:The-Embedded-Tree"

\end_inset

The Embedded Tree
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename bent-dyadic-tree.eps
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename tree-bi-on-disk.eps
	width 33text%

\end_inset


\begin_inset Graphics
	filename tree-on-disk.eps
	width 33text%

\end_inset


\begin_inset Graphics
	filename tree-tri-on-disk.eps
	width 33text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename tree-half-plane.eps
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
The rooted binary tree may be converted into the unrooted tree of figure
 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Unrooted-Tree"

\end_inset

 by unfolding it, and removing the root, as shown above.
 In the upper image, the root at 1/2 is removed and replaced with a single
 arc joining the left and right subtrees.
 This may be mapped to the Poincaré disk 
\begin_inset Formula $\mathbb{D}$
\end_inset

, as shown in the three middle images.
 The location of the original root is marked by a small black square.
 The third disk also shows the 
\emph on
fundamental domains
\emph default
 (see ahead to figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Domain on a tree"

\end_inset

).
 The Poincaré disk may be mapped to the upper half-plane 
\begin_inset Formula $\mathbb{H}$
\end_inset

; one such mapping is shown in the bottom image.
 The small black square is located at 
\begin_inset Formula $z=i$
\end_inset

; the leaves of the tree run to the real axis 
\begin_inset Formula $\Im z=0$
\end_inset

.
 The arced segments are circle arcs, so that, for instance, the arcs along
 the top are parts of circles of radius 1, centered at 
\begin_inset Formula $z=n$
\end_inset

.
 They meet at the intersections 
\begin_inset Formula $z=n+\frac{1}{2}+i\sqrt{3}/2$
\end_inset

.
 These figures make clear that the rooted binary tree, after removal of
 the root at at 1/2, is a Cayley tree (also called a Bethe lattice) with
 coordination number 3.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
created with misc/hyperbolic/tree.c and mod-tree.c
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
A visual demonstration of the embedding is shown in the figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Embedded-Tree"

\end_inset

.
 The embedding proceeds in two steps.
 In the first step, one observes that by removing the root node of the binary
 tree, and simply replacing it by an arc, one obtains a very uniform graph,
 where all interior nodes always have three lines coming to them.
 The second step is to embed three points surrounding the origin, so that
 it will tile the hyperbolic plane under the action of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

.
 The embedding that is illustrated puts vertices at 
\begin_inset Formula $a=(1+i\sqrt{3})/4$
\end_inset

, 
\begin_inset Formula $b=-1$
\end_inset

 and 
\begin_inset Formula $c=(1+i\sqrt{3})/4$
\end_inset

, connecting to the blue, red and green subtrees, respectively.
 The rest of the binary tree may be generated recursively, by repositioning
 each of these endpoints to the center of the disk, rotating the disk so
 that the incoming line segment extends from the center to 
\begin_inset Formula $b=-1$
\end_inset

, and then drawing two new line segments to 
\begin_inset Formula $a$
\end_inset

 and 
\begin_inset Formula $c$
\end_inset

.
 This provides a geometric construction of the embedding.
\end_layout

\begin_layout Standard
An algebraic construction of the embedding of the binary tree into the upper
 half-plane can be provided by using the generators 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 given previously: 
\begin_inset Formula 
\[
L=\left[\begin{array}{cc}
1 & 0\\
1 & 1
\end{array}\right]\quad\mbox{ and }\quad R=\left[\begin{array}{cc}
1 & 1\\
0 & 1
\end{array}\right]
\]

\end_inset

Starting with the point 
\begin_inset Formula $\rho=(1+i\sqrt{3})/2$
\end_inset

 in the upper half-plane, one applies 
\begin_inset Formula $L$
\end_inset

 to the the point 
\begin_inset Formula $L\rho\in\mathbb{H}$
\end_inset

, and then draws an arc from 
\begin_inset Formula $\rho$
\end_inset

 to 
\begin_inset Formula $L\rho$
\end_inset

.
 This process is then repeated for 
\begin_inset Formula $R$
\end_inset

, and then recursively for all strings in 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

.
 The result is a binary tree, with a root at 
\begin_inset Formula $\rho$
\end_inset

, and running off to right of the half-plane.
 Because this tree is rooted at 
\begin_inset Formula $\rho$
\end_inset

, it does not fill the half-plane, but only the right quadrant.
 The other quadrant may be obtained by starting at the root 
\begin_inset Formula $\rho-1$
\end_inset

, and recursively applying 
\begin_inset Formula $L^{-1}$
\end_inset

 and 
\begin_inset Formula $R^{-1}$
\end_inset

.
 These two trees are then joined with a segment from 
\begin_inset Formula $\rho-1$
\end_inset

 to 
\begin_inset Formula $\rho$
\end_inset

.
 The result is pictured in the bottom-most image of figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Embedded-Tree"

\end_inset

.
 
\end_layout

\begin_layout Standard
This embedding of the binary tree in the upper half-plane is invariant under
 the action of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

.
 This may be easily seen from the algebraic construction: 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

 is generated by 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 (including the negative powers 
\begin_inset Formula $L^{-1}$
\end_inset

 and 
\begin_inset Formula $R^{-1}$
\end_inset

, of course, as this is the group, not the monoid), whereas the binary tree
 consisted of arc segments connecting neighboring group elements, differing
 only by an 
\begin_inset Formula $L$
\end_inset

 or 
\begin_inset Formula $R$
\end_inset

.
\end_layout

\begin_layout Subsection
Feigenbaum ratio
\end_layout

\begin_layout Standard
Given a concrete mapping of the tree structure to the plane, it is worth
 asking: does the Feignbaum constant appear? The answer appears to be no,
 at least, not in the simplest way.
 Considering, for example, the imaginary coordinate of the vertexes in the
 upper half-plane, and take that to be the Feigenbaum bifurcation parameter.
 Taking the ratio of successive differences, one does not get the Feigenbaum
 constant; one gets, instead, a ratio tending towards 1.0, from above.
\end_layout

\begin_layout Subsection
Limit Points
\end_layout

\begin_layout Standard
If the nodes of the binary tree are labeled, then the embedding of the binary
 tree into the hyperbolic upper half-plane, or the Poincaré disk, induces
 a mapping from tree coordinates to disk coordinates.
 Of particular interest are the coordinate mappings of the limit points,
 that is, of the 
\begin_inset Quotes eld
\end_inset

leaves
\begin_inset Quotes erd
\end_inset

 of the binary tree.
 There are a series of closely-related mappings; they will be needed in
 a later section and are thus spelled out here.
\end_layout

\begin_layout Standard
Consider first the mapping induced by taking the dyadic expansion of a real
 number in the unit interval, and replacing every occurrence of 0 by the
 matrix 
\begin_inset Formula $L$
\end_inset

 and every occurrence of 1 by 
\begin_inset Formula $R$
\end_inset

.
 If the number is a dyadic rational, the expansion stops (ignoring the infinite
 trailing string of zeros).
 Suppose that the resulting matrix has matrix entries 
\begin_inset Formula $a,b,c,d$
\end_inset

, as in equation 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Mobius xform"

\end_inset

.
 The infinite trailing string of zeros corresponds to the matrix 
\begin_inset Formula 
\[
L^{\omega}=\left[\begin{array}{cc}
1 & 0\\
\omega & 1
\end{array}\right]
\]

\end_inset

 where 
\begin_inset Formula $\omega=\infty$
\end_inset

.
 Its not hard to see that the resulting product
\begin_inset Formula 
\[
\left[\begin{array}{cc}
a & b\\
c & d
\end{array}\right]\left[\begin{array}{cc}
1 & 0\\
\omega & 1
\end{array}\right]=\left[\begin{array}{cc}
a+b\omega & b\\
c+d\omega & d
\end{array}\right]
\]

\end_inset

 will map points 
\begin_inset Formula $z\in\mathbb{C}$
\end_inset

 of the complex plane to 
\begin_inset Formula 
\[
z\mapsto\left[\begin{array}{cc}
a+b\omega & b\\
c+d\omega & d
\end{array}\right]:z=\frac{(a+b\omega)z+b}{(c+d\omega)z+d}=\frac{b}{d}
\]

\end_inset

Thus, this procedure associates to every dyadic rational 
\begin_inset Formula $0\le x\le1$
\end_inset

 a positive real number 
\begin_inset Formula $b/d$
\end_inset

 constructed from the dyadic expansion of 
\begin_inset Formula $x$
\end_inset

.
 Recognizing that this is a form of the de Rham curve, its clear that the
 function is continuous.
 Examining the construction process, it can be seen that the map is simply
 a pairing of the dyadic tree to the Stern-Brocot tree.
 Let 
\begin_inset Formula $\beta:[0,1]\to\mathbb{R}^{+}$
\end_inset

 denote this mapping of the dyadic tree to the Stern-Brocot tree.
 Then, applying the analysis developed in previous sections, it is straightforwa
rd to determine that 
\begin_inset Formula 
\[
\beta(x)=\begin{cases}
?^{-1}\left(2x\right) & \quad\mbox{ for }0\le x\le\frac{1}{2}\\
\frac{1}{?^{-1}\left(2\left(1-x\right)\right)} & \quad\mbox{ for }\frac{1}{2}\le x\le1
\end{cases}
\]

\end_inset

This result is essentially a variant of the mapping between the Farey tree
 and the Stern-Brocot tree, given in eqn.
 
\begin_inset CommandInset ref
LatexCommand ref
reference "eq:Farey to Stern-Brocot"

\end_inset

.
 It is noteworthy, in that it provides a rapid algorithm to compute the
 inverse of the question mark function.
\end_layout

\begin_layout Standard
Consider next the embedding of the unrooted dyadic tree into to upper half-plane
, as depicted in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Embedded-Tree"

\end_inset

.
 This mapping takes the left half of the binary tree, and maps it into the
 left quadrant of the complex plane, and the right half of the tree to the
 right quadrant.
 If the dyadic tree is labeled as in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Embedded-Tree"

\end_inset

, then one has a map 
\begin_inset Formula $\delta:[0,1]\to\mathbb{R}$
\end_inset

given by 
\begin_inset Formula 
\[
\delta(x)=\begin{cases}
\frac{-1}{?^{-1}\left(4x\right)} & \quad\mbox{ for }0\le x\le\frac{1}{4}\\
-?^{-1}(2-4x) & \quad\mbox{ for }\frac{1}{4}\le x\le\frac{1}{2}\\
?^{-1}\left(4x-2\right) & \quad\mbox{ for }\frac{1}{2}\le x\le\frac{3}{4}\\
\frac{1}{?^{-1}\left(4-4x\right)} & \quad\mbox{ for }\frac{3}{4}\le x\le1
\end{cases}
\]

\end_inset

This unrooted dyadic tree may be embedded into the Poincaré disk using the
 mapping 
\begin_inset Formula 
\[
w=\frac{z-i}{z+i}
\]

\end_inset

which places 
\begin_inset Formula $z=i$
\end_inset

 at the center of the disk.
 Here, 
\begin_inset Formula $z\in\mathbb{H}$
\end_inset

 is a point in the upper-half-plane, and 
\begin_inset Formula $w\in\mathbb{D}$
\end_inset

 is the corresponding point in the Poincaré disk.
 This mapping wraps the unit interval around the perimeter of the disk in
 a counter-clockwise fashion, starting with 
\begin_inset Formula $x=0$
\end_inset

 at the right-most edge of the circle.
 Again, this is illustrated in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:The-Embedded-Tree"

\end_inset

.
 The mapping is not linear.
 A little bit of work shows that it is given by
\begin_inset Formula 
\[
\theta(x)=\arctan\frac{-2\delta(x)}{\left[\delta\left(x\right)\right]^{2}-1}
\]

\end_inset

A remarkable feature of this mapping is that it roughly impersonates the
 inverse of the question mark function.
 An even closer cognate is given by 
\begin_inset Formula 
\[
\phi(x)=\arctan\frac{-4\delta(x)}{\left[\delta\left(x\right)\right]^{2}-4}
\]

\end_inset

which can be obtained as the projection of the real line to a circle.
 Both of these are shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Poincaré-Disk-Perimeter"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:Poincaré-Disk-Perimeter"

\end_inset

Poincaré Disk Perimeter Functions
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename perimeter.eps
	width 80text%

\end_inset


\end_layout

\begin_layout Plain Layout
This figure shows a graph of the question mark function 
\begin_inset Formula $?(x)$
\end_inset

, and the inverses of the functions 
\begin_inset Formula $\theta(x)/2\pi$
\end_inset

 and 
\begin_inset Formula $\phi(x)/2\pi$
\end_inset

 discussed in the text.
 Note the similarity of the overall features, together with localized variations
 in slope.
 
\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
created with misc/hyperbolic/perimeter.c and perimeter.gplot
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Hyperbolic Rotations
\end_layout

\begin_layout Standard
The geometric embedding of the (unlabeled) binary tree into the hyperbolic
 plane is invariant the action of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

.
 However, if the nodes are labeled, then clearly, the action of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

 permutes these labels.
 Insofar as the tips of the tree can be identified with the irrational numbers
 on the unit interval, so one has an action of 
\begin_inset Formula $PSL(2,\mathbb{Z})$
\end_inset

 on the unit interval.
 This action is briefly explored in this section.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:Rotation-of-tree"

\end_inset

Rotation of the Dyadic Tree
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename rotation.eps
	width 80text%

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
The action of 
\begin_inset Formula $R$
\end_inset

 on the upper half-plane is to shift all nodes to the right, by one.
 Diagramatically, this change is shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Rotation-of-tree"

\end_inset

.
 This rotation preserves the arithmetic ordering of all of the labels on
 the tree; it is monotonically increasing.
 By simply comparing the tree before and after, it is clear that the action
 of this rotation on the unit interval is given by 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\rho_{D}(x)=\begin{cases}
2x & \quad\mbox{ for }0\le x\le\frac{1}{4}\\
x+\frac{1}{4} & \quad\mbox{ for }\frac{1}{4}\le x\le\frac{1}{2}\\
\frac{x+1}{2} & \quad\mbox{ for }\frac{1}{2}\le x\le1
\end{cases}
\]

\end_inset

The corresponding rotation for the Farey tree is given by the similarity
 transform 
\begin_inset Formula $\rho_{D}\circ?=?\circ\rho_{C}$
\end_inset

, with 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\rho_{C}(x)=\begin{cases}
\frac{x}{1-x} & \quad\mbox{ for }0\le x\le\frac{1}{3}\\
\frac{4x-1}{5x-1} & \quad\mbox{ for }\frac{1}{3}\le x\le\frac{1}{2}\\
\frac{1}{2-x} & \quad\mbox{ for }\frac{1}{2}\le x\le1
\end{cases}
\]

\end_inset

To obtain this last form, one makes use of the identities given in section
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Blow-ups"

\end_inset

.
 It is perhaps curious that these rotations are linear and fractional-linear,
 respectively, and do not have a more complex form.
 Since both are monotonically increasing, both are invertible.
 A few of the compositions of these maps are shown in figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Rotatate-unit-interval"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:Rotatate-unit-interval"

\end_inset

Rotations of the Unit Interval
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename rot-dyadic.eps
	width 50text%

\end_inset


\begin_inset Graphics
	filename rot-farey.eps
	width 50text%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
generated with misc/hyperbolic/rotations.c and rotations.gplot
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
xxx finish me,
\end_layout

\begin_layout Itemize
review the non-order-preserving rotations.
\end_layout

\begin_layout Itemize
review rotations of sub-trees, (these are no longer rotations of the disk
 as a whole).
\end_layout

\begin_layout Subsection
Fundamental Domains
\end_layout

\begin_layout Standard
Define a fundamental domain as the properly discontinuous action of a discrete
 group on a topological space.
\end_layout

\begin_layout Itemize
Explain the figures 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Fund Dom on Half-plane"

\end_inset

,
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Domain on a tree"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Domains-from-Subtrees"

\end_inset

 in greater detail.
\end_layout

\begin_layout Itemize
Talk about tiling the hyperbolic plane.
 Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Domains-from-Subtrees"

\end_inset

 shows tiling of the hyperbolic plane.
 Discuss how the 
\begin_inset Quotes eld
\end_inset

pumping lemma for regular languages
\begin_inset Quotes erd
\end_inset


\begin_inset CommandInset citation
LatexCommand cite
key "Hop79"
literal "true"

\end_inset

 is a form of tiling.
 Note that the tiling works not just in the forward direction, but also
 in the backwards direction; this allows the input to a finite state machine
 to extended to negative values (going back in time) similar to the way
 that the Grothendieck group is a construction that turns an abelian monoid
 into an abelian group.
\end_layout

\begin_layout Itemize
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "cap:Domains-from-Subtrees"

\end_inset

 only shows some finite subtrees; should also show some infinite subtrees.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:Fund Dom on Half-plane"

\end_inset

Fundamental Domains on the Upper Half-plane
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename domain-plane.eps
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
This figure illustrates the traditional fundamental domains as used in number
 theory.
 Each is in the shape of a triangle, with two points in the upper-half plane,
 connected by a solid blue line, and a third point, the cusp, located at
 infinity, or, equivalently, on the real axis.
 The dashed yellow lines run from the interior points to the cusp.
 Note that the solid blue lines form the un-rooted binary tree, as demonstrated
 above.
 
\begin_inset Note Note
status collapsed

\begin_layout Plain Layout
Drawn with misc/hyperbolic/mod-tree.c as mod-tree 7 > m.eps; ggv m.eps &
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:Domain on a tree"

\end_inset

Fundamental Domains on a Tree
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename domain-tree.eps
	width 80text%

\end_inset


\end_layout

\begin_layout Plain Layout
A homotopically equivalent representation of fundamental domains, mapped
 to a binary tree.
 The arithmetic significance of the cusps becomes clearer when the geometry
 is deformed.
\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "cap:Domains-from-Subtrees"

\end_inset

Domains from Subtrees
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename domains-from-trees.eps
	width 100text%

\end_inset


\end_layout

\begin_layout Plain Layout
Consider a finite subtree of the infinite tree, shown in bold in the above
 figures.
 To the left and right of each segment lies a domain: these can be paired
 together, and, in a sense, 
\begin_inset Quotes eld
\end_inset

represent
\begin_inset Quotes erd
\end_inset

 that segment.
 These can be used to tile the hyperbolic plane.
 For example, the rightmost figure, consisting of four cusps, can be used
 to tile the plane.
\end_layout

\begin_layout Plain Layout
Note also that such finite tree can be used to represent a finite state
 machine.
 For example, in the rightmost figure, the point 
\begin_inset Quotes eld
\end_inset

a
\begin_inset Quotes erd
\end_inset

 represents the initial state of the machine.
 The machine accepts strings in the two letters, 
\begin_inset Quotes eld
\end_inset

L
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

R
\begin_inset Quotes erd
\end_inset

.
 The input letter 
\begin_inset Quotes eld
\end_inset

R
\begin_inset Quotes erd
\end_inset

 takes the machine to state 
\begin_inset Quotes eld
\end_inset

e
\begin_inset Quotes erd
\end_inset

, which, if the tiling is to succeed, must be the same state as state 
\begin_inset Quotes eld
\end_inset

a
\begin_inset Quotes erd
\end_inset

.
 The input letter 
\begin_inset Quotes eld
\end_inset

L
\begin_inset Quotes erd
\end_inset

 takes one to state 
\begin_inset Quotes eld
\end_inset

b
\begin_inset Quotes erd
\end_inset

, while the input strings 
\begin_inset Quotes eld
\end_inset

LL
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

LR
\begin_inset Quotes erd
\end_inset

 take the machine to states 
\begin_inset Quotes eld
\end_inset

c
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

d
\begin_inset Quotes erd
\end_inset

, respectively, which, again, are exactly the same state as 
\begin_inset Quotes eld
\end_inset

a
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
ToDo: 
\end_layout

\begin_layout Itemize
Compare to L,R,B.
 
\end_layout

\begin_layout Itemize
classical automorphic forms on binary tree.
 
\end_layout

\begin_layout Itemize
automorphic forms for a finite state machine.
\end_layout

\begin_layout Itemize
moduli space of the automorphic forms corresponding to a given finite state
 machine; which are necessarily a subspace of the classical moduli space.
\end_layout

\begin_layout Itemize
eigenstates of the composition operator (of the rotations).
 (as separate chapter?)
\end_layout

\begin_layout Section
xxxxxx
\end_layout

\begin_layout Standard
Everything below is misleadingly or confusingly stated and possibly wrong.
 Everything below this point needs to be corrected and re-written from scratch.
\end_layout

\begin_layout Subsection
More about representations of real numbers
\end_layout

\begin_layout Standard
For one, the set 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 is larger than the set 
\begin_inset Formula $\mathbb{R}$
\end_inset

: the set 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 contains the elements 0.11111...
 and 1.0000...
 which are clearly distinct in 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 but represent the same number in 
\begin_inset Formula $\mathbb{R}$
\end_inset

.
 We have something similar happening in 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

 in that a rational has the multiple representations 
\begin_inset Formula $[a_{0};a_{1},a_{2},...,a_{n},\infty,a_{n+2},a_{n+3},...]$
\end_inset

 where it does not matter what we pick for 
\begin_inset Formula $a_{n+2}$
\end_inset

, etc.
 Thus, both 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

 and 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 are coverings of 
\begin_inset Formula $\mathbb{R}$
\end_inset

.
 So, for example, there exists a homomorphism, a projection, 
\begin_inset Formula $\pi:\mathbb{R}_{D}\rightarrow\mathbb{R}$
\end_inset

 such that 
\begin_inset Formula $\pi(0.1111...)=\pi(1.000...)$
\end_inset

, thus implying that 
\begin_inset Formula $\mbox{Ker}\;\pi$
\end_inset

 is non-trivial.
 The real numbers are then defined as a quotient space of 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 by the equivalence relation induced by 
\begin_inset Formula $\pi$
\end_inset

.
 
\end_layout

\begin_layout Standard
Show 
\begin_inset Formula $\mathbb{R}_{D}$
\end_inset

 as being isomorphic to 
\begin_inset Formula $\mathbb{Z}_{2}\times\mathbb{Z}_{2}\times\cdots=\mathbb{Z}_{2}^{\omega}$
\end_inset

but some care to be taken.
 Multiple possible topologies on 
\begin_inset Formula $\mathbb{Z}_{2}^{\omega}$
\end_inset

, including the product topology (which is what is wanted) and the box topology,
 (which is finer than the reals).
 Is there a need to discuss functions of a continuous variable, and so the
 dual spaces, the weak topology, etc? 
\end_layout

\begin_layout Standard
Show that 
\begin_inset Formula $\mathbb{R}_{C}$
\end_inset

 is isomorphic to 
\begin_inset Formula $\mathbb{Z}\times\mathbb{Z}\times\cdots=\mathbb{Z}^{\omega}$
\end_inset

 and etc.
\end_layout

\begin_layout Subsection
The Modular Group, In General
\end_layout

\begin_layout Standard
The close focus on the interval representation 
\begin_inset Formula $\widetilde{M}$
\end_inset

 in the above begs the questions 
\begin_inset Quotes eld
\end_inset

What about the other elements of the modular group? Where do they fit in?
\begin_inset Quotes erd
\end_inset

 These questions in fact have a simple answer: the modular group is the
 symmetry group of a two dimensional lattice.
 Let 
\begin_inset Formula $\vec{v}_{1},\vec{v}_{2}\in\mathbb{R}^{2}$
\end_inset

 be two non-colinear vectors in the plane.
 Then the lattice 
\begin_inset Formula $\Lambda(\vec{v}_{1},\vec{v}_{2})=\{p\vec{v}_{1}+q\vec{v}_{2}\;:\;p,q\in\mathbb{Z}\}$
\end_inset

 generated by 
\begin_inset Formula $\vec{v}_{1},\vec{v}_{2}$
\end_inset

 can be envisioned as a simple collection of parallelograms tiling the plane.
 The generators 
\begin_inset Formula $\vec{v}_{1},\vec{v}_{2}$
\end_inset

 are not unique; in fact any other pair 
\begin_inset Formula $\vec{w}_{1}=a\vec{v}_{1}+b\vec{v}_{2}$
\end_inset

 and 
\begin_inset Formula $\vec{w}_{2}=c\vec{v}_{1}+d\vec{v}_{2}$
\end_inset

 will generate exactly the same lattice, if and only if 
\begin_inset Formula $a,b,c,d\in\mathbb{Z}$
\end_inset

 and 
\begin_inset Formula $ad-bc=1$
\end_inset

.
 That is, 
\begin_inset Formula $\Lambda(\vec{v}_{1},\vec{v}_{2})=\Lambda(\vec{w}_{1},\vec{w}_{2})$
\end_inset

 iff 
\begin_inset Formula 
\[
\left(\begin{array}{c}
\vec{w}_{1}\\
\vec{w}_{2}
\end{array}\right)=\left(\begin{array}{cc}
a & b\\
c & d
\end{array}\right)\left(\begin{array}{c}
\vec{v}_{1}\\
\vec{v}_{2}
\end{array}\right)
\]

\end_inset

 where 
\begin_inset Formula $\left(\begin{array}{cc}
a & b\\
c & d
\end{array}\right)\in SL(2,\mathbb{Z})$
\end_inset

.
 If we take 
\begin_inset Formula $\vec{v}_{1}=\vec{e}_{1}$
\end_inset

 and 
\begin_inset Formula $\vec{v}_{2}=\vec{e}_{2}$
\end_inset

 so that we have a square grid, then we can visualize the rationals as consistin
g of the points 
\begin_inset Formula $p/q$
\end_inset

 in the upper-right quadrant of the grid, and specifically, those points
 visible from the origin, i.e.
 those points for which 
\begin_inset Formula $p/q$
\end_inset

 is irreducible.
 The rationals confined to the unit interval correspond to those grid points
 lying above the horizontal axis, but below the 
\begin_inset Formula $45^{\circ}$
\end_inset

line extending to the upper right.
 Subintervals of the unit interval can now be understood to correspond tho
 those 
\begin_inset Formula $(\vec{w}_{1},\vec{w}_{2})$
\end_inset

 where both vectors are contained in this octant.
 The semigroup 
\begin_inset Formula $M\subset SL(2,\mathbb{Z})$
\end_inset

 of interval maps can now be understood as precisely those elements that
 stay within this octant.
 The 
\begin_inset Quotes eld
\end_inset

other
\begin_inset Quotes erd
\end_inset

 elements of 
\begin_inset Formula $SL(2,\mathbb{Z})$
\end_inset

 that are not in 
\begin_inset Formula $M$
\end_inset

 are those that take intervals out of the octant.
 In particular, some elements of the modular group will take 
\begin_inset Formula $(\vec{w}_{1},\vec{w}_{2})$
\end_inset

 so that one lies in the left half-plane, the other in the right half-plane.
 Since the vertical line 
\begin_inset Formula $p/q=1/0$
\end_inset

 corresponds to infinity, we see that such maps correspond to Möbius maps
 with a pole.
 
\end_layout

\begin_layout Standard
To summarize, the previous development of the interval representation seems
 to lend an air of mystery to the missing elements, those elements that
 are not in 
\begin_inset Formula $M$
\end_inset

.
 The mystery is dispelled in this wider picture, which accounts for all
 of the elements of the modular group.
 Armed with this knowledge, we could seek to extended the definition of
 the question mark function to the entire real number line, as corresponding
 to the map between the full Farey tree (which contains all of the rationals)
 and the full dyadic tree, rather than just those pieces that correspond
 to the unit interval.
 The full Farey tree is shown in figure xxx (need figure here).
 However, there are several 
\begin_inset Quotes eld
\end_inset

natural
\begin_inset Quotes erd
\end_inset

 extensions of the dyadic tree to numbers larger than one, and so the appropriat
e extension of the question mark function is somewhat ambiguous.
 
\end_layout

\begin_layout Standard
One 
\begin_inset Quotes eld
\end_inset

natural
\begin_inset Quotes erd
\end_inset

 way to generate the dyadic tree is through the Takagi function recurrence
 relation 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
t_{w}\left(\frac{p}{2^{n}}\right)=w^{n-1}+\frac{1}{2}\left[t_{w}\left(\frac{p-1}{2^{n}}\right)+t_{w}\left(\frac{p+1}{2^{n}}\right)\right]
\]

\end_inset

Besides generating the Blancmange curve, which we will explore in a later
 chapter, it also generates other interesting sequences if we pick a different
 set of starting conditions.
 For example, taking 
\begin_inset Formula $w=0$
\end_inset

, and writing 
\begin_inset Formula $t_{0}\equiv d$
\end_inset

, using the initial conditions 
\begin_inset Formula $d(0)=0$
\end_inset

 and 
\begin_inset Formula $d(1)=1$
\end_inset

, we generate the tree of dyadic numbers between 0 and 1; that is, we can
 promptly deduce that 
\begin_inset Formula $d(x)=x$
\end_inset

 for all 
\begin_inset Formula $x=p/2^{n}$
\end_inset

.
 If instead, we write 
\begin_inset Formula $t_{0}\equiv J$
\end_inset

 with the boundary conditions 
\begin_inset Formula $J(1)=1$
\end_inset

 and 
\begin_inset Formula $J(1/2^{n})=2^{n}$
\end_inset

, then we find that 
\begin_inset Formula $J$
\end_inset

 generates the tree of dyadic numbers greater than one.
 This is shown in graph xxx (to-do Show the greater-than-one map explicitly.)
 Show also the extended Minkowski function for this dyadic sequence.
 
\end_layout

\begin_layout Standard
Another approach to the 
\begin_inset Quotes eld
\end_inset

problem
\begin_inset Quotes erd
\end_inset

 of the modular group being 
\begin_inset Quotes eld
\end_inset

bigger
\begin_inset Quotes erd
\end_inset

 than what is naively needed for fractal symmetry is to shrink its size.
 That is, one could try to construct a quotient group, mapping the eight
 octants into one.
 The benefit would seem to be that such a quotient construction would elevate
 the semigroup 
\begin_inset Formula $M$
\end_inset

 to the status of a real group, containing inverses.
 However, it is not clear that any additional insight into fractal self-similari
ty is gained by doing so.
\end_layout

\begin_layout Subsection
Picard Group
\end_layout

\begin_layout Standard
more about 3+1 
\begin_inset Quotes eld
\end_inset

spacetime
\begin_inset Quotes erd
\end_inset

 generated by the complex numbers, (xxx this is actually called the Picard
 group see Fricke and Klein, circa 1897.) which is generated by 
\begin_inset Formula $SL(2,Z\times Z)$
\end_inset

 which is a subgroup of 
\begin_inset Formula $GL(2,C)$
\end_inset

.
 Here 
\begin_inset Formula $Z\times Z$
\end_inset

 are the Gaussian integers.
\end_layout

\begin_layout Section
Notes.
 
\end_layout

\begin_layout Standard
There is also a well-known representation of the Stern-Brocot Tree on the
 lattice 
\begin_inset Formula $\mathbb{Z\mathbb{\times Z}}$
\end_inset

, where a fraction 
\begin_inset Formula $p/q$
\end_inset

 is denoted as the ordered pair 
\begin_inset Formula $(p,q)$
\end_inset

.
 In this representation, the left-right navigation operators 
\begin_inset Formula $L$
\end_inset

 and 
\begin_inset Formula $R$
\end_inset

 have the values 
\begin_inset Formula $L=\left(\begin{array}{cc}
1 & 0\\
1 & 1
\end{array}\right)$
\end_inset

 and 
\begin_inset Formula $R=\left(\begin{array}{cc}
1 & 1\\
0 & 1
\end{array}\right)$
\end_inset

 and thus positions are given as elements of 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset

.
 Maybe we'll elaborate on this later xxx.
 To do...
 elaborate.
\end_layout

\begin_layout Standard
To summarize, it is this expansion in binary digits that provides the underlying
 connection between period-doubling maps, such as the Mandelbrot Set, and
 Farey Numbers.
 Binary expansions, or code-words, occur naturally in the analysis of Duoady-Hub
bard landing rays.
 We'll demonstrate an explicit mapping in a later section.
 XXX cut/reword this last paragraph.
\end_layout

\begin_layout Subsection
Some Curious Properties of the Question Mark 
\end_layout

\begin_layout Standard
If there is a 3-adic or p-adic generalization of the Minkowski Question
 Mark, it is not obvious; one 'obvious' generalization is 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\sum_{k=1}\left(-1\right)^{k}\;3^{-(a_{1}+a_{2}+...+a_{k})}
\]

\end_inset

but its highly discontinuous.
 Other generalizations based on roots of unity in the complex plane also
 don't seem to work.
 One might be able to get traction by looking at groups that have 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset

 as a subgroup but also have some 
\begin_inset Formula $p$
\end_inset

-fold symmetry.
\end_layout

\begin_layout Section
Conclusions
\end_layout

\begin_layout Standard
To conclude, we've demonstrated two different binary trees commonly used
 in the representation of the real numbers, and have shown that the Minkowski
 Question Mark function is the mapping between these two trees.
 We've then reviewed the the modular group in terms of its action on trees,
 and showed that the self-similarity of the trees induces a fractal self-similar
ity on tree homomorphisms; in this case the homomorphism being the Question
 Mark function.
 We will explore the generalization of these ideas in the next chapter.
\end_layout

\begin_layout Standard
The wide-spread occurrence of the rationals fairly screams for an adelic
 (or 
\begin_inset Formula $p$
\end_inset

-adic) treatment of the subject matter.
 That is, in the above, we made no appeals to the closure of the rationals
 
\begin_inset Formula $\mathbb{Q}$
\end_inset

 by 
\begin_inset Formula $\mathbb{R}$
\end_inset

 or by 
\begin_inset Formula $\mathbb{Q}_{p}$
\end_inset

; on the other hand, the interval representation makes numerous appeals
 to a total ordering.
 It would be interesting to see if and how any of the above conclusions
 are modified for the 
\begin_inset Formula $p$
\end_inset

-adic numbers.
 
\end_layout

\begin_layout Standard
Finally, we note that the interval representation is a topology, and that
 it is not exactly a trivial topology for a subset of the modular group.
 A more precise statement of the topological nature of the entire modular
 group, and how it relates to the interval representation, is called for.
\end_layout

\begin_layout Subsection
Handwaving insights
\end_layout

\begin_layout Standard
Note that by imposing the modular group symmetry on the real number line,
 we've essentially introduced a hyperbolic manifold that is homomorphic
 to the real-number line.
 The existence of this hyperbolic manifold and its negative curvature essentiall
y 'explains' why trajectories of iterated functions have positive Lyapunov
 exponents.
 Of course they do, since their 'true' trajectories should be considered
 to live on the hyperbolic manifold rather than on the real-number line.
\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "/home/linas/src/fractal/paper/fractal"
options "plain"

\end_inset


\end_layout

\end_body
\end_document
